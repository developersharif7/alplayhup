<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="google-site-verification" content="xCJbjjBM7DpMNt7VU2I_xBgccK74XNIepvHXGAh2L48" />
    <meta charset="UTF-8">
    <!-- ✨ Enhanced Android App Support - Native Feel -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="AlPlayHub">
    
    <title>AlPlayHub: HTML5 Games & Web Apps | Create, Play & Publish | Free Online Gaming Platform</title>

    <meta name="description" content="AlPlayHub - The ultimate hub for HTML5 games, web apps, and developer tools. Play thousands of free games instantly, upload your own creations, and access powerful tools. Mobile-friendly, no downloads required!">
    
    <!-- Android Enhanced Meta Tags -->
    <link rel="icon" href="https://i.ibb.co/5hsNkn8J/ei-1753297347948-removebg-preview.png">
    <link rel="manifest" href="data:application/json,{&quot;name&quot;:&quot;AlPlayHub&quot;,&quot;short_name&quot;:&quot;AlPlayHub&quot;,&quot;start_url&quot;:&quot;/&quot;,&quot;display&quot;:&quot;standalone&quot;,&quot;background_color&quot;:&quot;#FFFFFF&quot;,&quot;theme_color&quot;:&quot;#FFFFFF&quot;}">
    
    <!-- ✅ ANDROID OPTIMIZED: Dynamic Theme Support -->
    <meta name="theme-color" content="#FFFFFF" id="theme-color-meta">
    <meta name="msapplication-navbutton-color" content="#FFFFFF" id="ms-theme-color">
    <meta name="apple-mobile-web-app-status-bar-style" content="default" id="apple-status-bar">
    
    <!-- External Resources -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script>
        // Android Optimized Theme Configuration - Dynamic Theme Support
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2196F3',
                        secondary: '#4CAF50',
                        accent: '#FF9800',
                        danger: '#F44336',
                        warning: '#FFC107',
                        success: '#4CAF50',
                        info: '#2196F3',
                        lightBg: '#FFFFFF',
                        cardBg: '#FFFFFF',
                        textDark: '#000000',
                        textLight: '#FFFFFF',
                        textMuted: '#6B7280',
                        borderColor: '#E5E7EB'
                    },
                    screens: {
                        'xs': '475px',
                    },
                    animation: {
                        'slide-up': 'slideUp 0.2s ease-out',
                        'fade-in': 'fadeIn 0.3s ease-out',
                        'scale-in': 'scaleIn 0.15s ease-out',
                        'pulse-soft': 'pulseSoft 2s ease-in-out infinite',
                        'float': 'float 2s ease-in-out infinite',
                    },
                    keyframes: {
                        slideUp: {
                            '0%': { transform: 'translateY(8px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        },
                        scaleIn: {
                            '0%': { transform: 'scale(0.95)', opacity: '0' },
                            '100%': { transform: 'scale(1)', opacity: '1' }
                        },
                        pulseSoft: {
                            '0%, 100%': { transform: 'scale(1)', opacity: '1' },
                            '50%': { transform: 'scale(1.02)', opacity: '0.95' }
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-6px)' }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Import Google Fonts for a clean look */
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        /* ✅ DYNAMIC THEME SUPPORT: Light and Dark Themes */
        :root {
            --app-bg: #FFFFFF;
            --card-bg: #FFFFFF;
            --primary-color: #2196F3;
            --secondary-color: #4CAF50;
            --accent-color: #FF9800;
            --danger-color: #F44336;
            --warning-color: #FFC107;
            --success-color: #4CAF50;
            --header-bg: #FFFFFF;
            --nav-bg: #FFFFFF;
            --text-primary: #000000;
            --text-secondary: #6B7280;
            --text-on-header: #000000;
            --text-on-nav: #000000;
            --border-color: #E5E7EB;
            --search-bg: rgba(245, 245, 245, 0.95);
            --search-border: rgba(0, 0, 0, 0.1);
            --search-icon: rgba(0, 0, 0, 0.6);
            --search-placeholder: rgba(0, 0, 0, 0.5);
            --ripple-color: rgba(33, 150, 243, 0.1);
            --elevation-1: 0 1px 1px rgba(0,0,0,0.04);
            --elevation-2: 0 1px 2px rgba(0,0,0,0.06);
            --elevation-3: 0 2px 3px rgba(0,0,0,0.08);
        }

        /* Dark Theme Variables */
        [data-theme="dark"] {
            --app-bg: #1a1a1a;
            --card-bg: #2d2d2d;
            --header-bg: #1a1a1a;
            --nav-bg: #1a1a1a;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-on-header: #FFFFFF;
            --text-on-nav: #FFFFFF;
            --border-color: #404040;
            --search-bg: rgba(45, 45, 45, 0.95);
            --search-border: rgba(255, 255, 255, 0.1);
            --search-icon: rgba(255, 255, 255, 0.6);
            --search-placeholder: rgba(255, 255, 255, 0.5);
            --ripple-color: rgba(33, 150, 243, 0.2);
            --elevation-1: 0 1px 1px rgba(255,255,255,0.04);
            --elevation-2: 0 1px 2px rgba(255,255,255,0.06);
            --elevation-3: 0 2px 3px rgba(255,255,255,0.08);
        }

        /* Green Theme Variables */
        [data-theme="green"] {
            --app-bg: #f0f8f0;
            --card-bg: #ffffff;
            --primary-color: #4CAF50;
            --secondary-color: #8BC34A;
            --header-bg: #f0f8f0;
            --nav-bg: #f0f8f0;
            --text-primary: #1B5E20;
            --text-secondary: #689F38;
            --text-on-header: #1B5E20;
            --text-on-nav: #1B5E20;
            --border-color: #C8E6C9;
            --search-bg: rgba(200, 230, 201, 0.5);
            --search-border: rgba(76, 175, 80, 0.2);
            --search-icon: rgba(27, 94, 32, 0.6);
            --search-placeholder: rgba(27, 94, 32, 0.5);
            --ripple-color: rgba(76, 175, 80, 0.1);
        }

        /* Apply theme variables to elements */
        body {
            background: var(--app-bg);
            color: var(--text-primary);
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            transition: all 0.3s ease;
        }

        /* ✅ ANDROID OPTIMIZED: Ultra-Compact Layout */
        .app-container {
            min-height: 100vh;
            background: var(--app-bg);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        /* Android Material Design Header - Dynamic Theme */
        .new-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 50;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 6px;
            background: var(--header-bg);
            color: var(--text-on-header);
            border-bottom: 1px solid var(--border-color);
            padding: 6px 8px;
            height: 42px;
            backdrop-filter: blur(10px);
            box-shadow: var(--elevation-1);
            transition: all 0.3s ease;
        }

        .hamburger-btn {
            background: transparent;
            border: none;
            font-size: 16px;
            cursor: pointer;
            padding: 6px;
            border-radius: 50%;
            transition: all 0.15s ease;
            color: var(--text-on-header);
            width: 34px;
            height: 34px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 2px;
        }

        .hamburger-btn:active {
            transform: scale(0.95);
            background: var(--ripple-color);
        }

        /* Ultra-Compact Search */
        .search-bar-container {
            flex-grow: 1;
            display: flex;
            align-items: center;
            background: var(--search-bg);
            border-radius: 18px;
            padding: 0 12px;
            height: 28px;
            border: 1px solid var(--search-border);
            transition: all 0.15s ease;
            margin: 0;
            box-shadow: var(--elevation-1);
        }
        
        .search-bar-container:focus-within {
            background: var(--card-bg);
            transform: translateY(-1px);
            box-shadow: var(--elevation-2);
            border-color: var(--primary-color);
        }

        .search-bar-container i {
            color: var(--search-icon);
            font-size: 12px;
            margin-right: 10px;
            flex-shrink: 0;
        }

        .search-input {
            width: 100%;
            background: transparent;
            border: none;
            outline: none;
            font-size: 13px;
            color: var(--text-primary) !important;
            font-weight: 400;
        }

        .search-input::placeholder {
            color: var(--search-placeholder) !important;
            font-size: 12px;
            font-weight: 400;
        }

        /* Android Three-Dot Menu - Ultra-Compact */
        .menu-dots {
            background: transparent;
            border: none;
            font-size: 16px;
            cursor: pointer;
            padding: 6px;
            border-radius: 50%;
            transition: all 0.15s ease;
            color: var(--text-on-header);
            width: 34px;
            height: 34px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 2px;
        }

        .menu-dots:active {
            transform: scale(0.95);
            background: var(--ripple-color);
        }

        /* Dropdown Menu - Ultra-Compact */
        .dropdown-menu {
            position: absolute;
            top: 46px;
            right: 8px;
            background: var(--card-bg);
            border-radius: 6px;
            box-shadow: var(--elevation-2);
            z-index: 100;
            min-width: 140px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-6px);
            transition: all 0.15s ease;
            border: 1px solid var(--border-color);
        }

        .dropdown-menu.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            padding: 8px 10px;
            color: var(--text-primary);
            text-decoration: none;
            font-size: 12px;
            transition: background-color 0.15s;
            cursor: pointer;
        }

        .dropdown-item:hover {
            background: var(--ripple-color);
        }

        .dropdown-item i {
            width: 18px;
            margin-right: 8px;
            text-align: center;
            font-size: 11px;
        }

        /* ✅ RESTORED: Original Promotion Carousel - Slightly More Square */
        .promotion-carousel {
            width: 100%;
            height: 140px;
            margin: 0 0 12px 0;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            box-shadow: var(--elevation-1);
        }

        .carousel-container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .carousel-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.6s ease-in-out;
            z-index: 1;
        }

        .carousel-slide.active {
            opacity: 1;
            z-index: 2;
        }

        .carousel-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        /* ✅ FAST LOADING: Instant image loading */
        .carousel-slide {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .carousel-slide img {
            opacity: 1;
            transition: opacity 0.3s ease;
        }

        .carousel-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.7));
            color: white;
            padding: 10px 12px;
            text-align: left;
        }

        .carousel-title {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 2px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        .carousel-subtitle {
            font-size: 11px;
            opacity: 0.9;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        .carousel-indicators {
            position: absolute;
            bottom: 8px;
            right: 12px;
            display: flex;
            gap: 4px;
            z-index: 3;
        }

        .indicator {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .indicator.active {
            background: white;
            transform: scale(1.2);
        }

        /* Ultra-Compact Screen Layout */
        .screen {
            height: 100vh;
            overflow-y: auto;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: contain;
            scroll-behavior: smooth;
            position: relative;
        }

        /* ✅ OPTIMIZED: Reduced padding for professional look */
        .screen-content {
            padding: 8px 12px;
            min-height: 100vh;
            max-width: 100%;
            margin: 0 auto;
            padding-top: 50px;
            padding-bottom: 64px;
            box-sizing: border-box;
        }

        /* Ultra-Compact Bottom Navigation - Dynamic Theme */
        .bottom-nav {
            height: 50px;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-around;
            align-items: center;
            z-index: 100;
            background: var(--nav-bg);
            border-top: 1px solid var(--border-color);
            padding: 3px 0;
            box-shadow: 0 -1px 2px rgba(0,0,0,0.04);
            transition: all 0.3s ease;
        }

        /* Ultra-Compact Navigation */
        .nav-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 56px;
            height: 42px;
            border-radius: 10px;
            transition: all 0.2s ease;
            position: relative;
            cursor: pointer;
            color: var(--text-on-nav);
            overflow: hidden;
        }

        .nav-button:active {
            transform: scale(0.95);
        }

        .nav-button.active {
            background: var(--ripple-color);
            color: var(--primary-color);
            transform: translateY(-1px);
        }

        .nav-button.active::after {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 16px;
            height: 2px;
            background: var(--primary-color);
            border-radius: 0 0 2px 2px;
        }

        .nav-icon {
            font-size: 14px;
            margin-bottom: 1px;
            z-index: 1;
            color: var(--primary-color);
        }

        .nav-label {
            font-size: 8px;
            font-weight: 600;
            z-index: 1;
            color: var(--primary-color);
        }
        
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }

        /* Ultra-Compact Side Menu */
        .side-menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(2px);
            z-index: 1100;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s ease, visibility 0.2s;
        }

        .side-menu-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .side-menu {
            position: fixed;
            top: 0;
            left: -240px;
            width: 220px;
            height: 100%;
            background-color: var(--card-bg);
            z-index: 1200;
            transition: left 0.25s ease;
            display: flex;
            flex-direction: column;
            padding: 16px;
            box-shadow: var(--elevation-2);
            border-right: 1px solid var(--border-color);
        }

        .side-menu.active {
            left: 0;
        }
        
        .side-menu-header {
            color: var(--primary-color);
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .side-menu-item {
            display: flex;
            align-items: center;
            color: var(--text-primary);
            padding: 10px 0;
            font-size: 13px;
            text-decoration: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.15s ease;
            margin: 1px 0;
        }
        
        .side-menu-item:hover {
            color: var(--primary-color);
            background: var(--ripple-color);
        }

        .side-menu-item i {
            width: 24px;
            margin-right: 10px;
            text-align: center;
            font-size: 12px;
            color: var(--primary-color);
        }
        
        .side-menu-close-btn {
            margin-top: auto;
            width: 100%;
            padding: 10px;
            background-color: var(--primary-color);
            color: #FFFFFF;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.15s ease;
            box-shadow: var(--elevation-1);
        }
        
        .side-menu-close-btn:hover {
            box-shadow: var(--elevation-2);
            transform: translateY(-1px);
        }

        .side-menu-close-btn:active {
            transform: translateY(0);
        }

        /* ✅ FLAT DESIGN: No Boxes or Shadows */
        .stat-card, .developer-card {
            background: var(--card-bg) !important;
            border: 1px solid var(--border-color) !important;
            color: var(--text-primary) !important;
            box-shadow: var(--elevation-1) !important;
            transition: all 0.15s ease;
        }

        .stat-card:hover, .developer-card:hover {
            box-shadow: var(--elevation-2) !important;
            transform: scale(1.02);
        }

        .bg-white {
            background: var(--card-bg) !important;
            border: 1px solid var(--border-color) !important;
            box-shadow: var(--elevation-1) !important;
        }

        .bg-primary {
            background: var(--primary-color) !important;
            color: #FFFFFF !important;
            box-shadow: none !important;
        }

        .text-primary {
            color: var(--primary-color) !important;
        }

        .text-textDark {
            color: var(--text-primary) !important;
        }

        .text-textMuted {
            color: var(--text-secondary) !important;
        }

        /* Enhanced Profile Header - Compact Version */
        .profile-header {
            padding: 6px;
            background: linear-gradient(135deg, var(--primary-color), #1976D2);
            border-radius: 8px;
            margin-bottom: 4px;
            min-height: 50px;
            display: flex;
            align-items: center;
            position: relative;
            overflow: hidden;
            color: white;
        }

        .profile-header::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 20px;
            height: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            transform: translate(8px, -8px);
        }

        .profile-info {
            color: white;
            display: flex;
            align-items: center;
            gap: 4px;
            flex-direction: row;
            flex: 1;
            justify-content: space-between;
            text-align: left;
        }

        .profile-info h1 {
            font-size: 12px;
            font-weight: 700;
            margin-bottom: 1px;
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }

        .profile-info p {
            color: rgba(255,255,255,0.85);
            margin-bottom: 0;
            font-size: 9px;
        }

        /* Ultra-Compact App Icons */
        .item-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: all 0.15s ease;
            position: relative;
            background: transparent !important;
            border: none !important;
            padding: 0;
            width: 64px;
            flex-shrink: 0;
        }

        .item-card:hover { 
            transform: scale(1.05);
        }

        .item-card:active {
            transform: scale(0.95);
        }

        .item-card .card-image {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--card-bg);
            box-shadow: var(--elevation-1);
            margin-bottom: 4px;
            position: relative;
            transition: all 0.15s ease;
            border: 1px solid var(--border-color);
        }

        .item-card:hover .card-image {
            box-shadow: var(--elevation-2);
        }

        .item-card img {
            width: 100%; 
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .item-card .fallback-icon {
            font-size: 20px;
            color: var(--primary-color);
        }

        .item-card .card-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            width: 100%;
        }

        .item-card .item-title {
            font-size: 9px;
            font-weight: 500;
            color: var(--text-primary);
            line-height: 1.2;
            width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .category-scroll-container {
            display: flex;
            overflow-x: auto;
            overflow-y: hidden;
            padding: 6px 2px;
            margin-left: 0;
            margin-right: 0;
            gap: 12px;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }
        
        .category-scroll-container::-webkit-scrollbar {
            display: none;
        }

        /* ✅ ULTRA-COMPACT: Stats Cards */
        .stat-card {
            padding: 6px 4px;
            text-align: center;
            transition: all 0.15s ease;
            background: var(--card-bg);
            border-radius: 6px;
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }

        .stat-card:hover {
            transform: translateY(-1px) scale(1.02);
            box-shadow: var(--elevation-2);
        }

        .stat-number { 
            font-size: 14px;
            font-weight: 800; 
            color: var(--primary-color);
            display: block;
            line-height: 1;
        }

        .stat-label { 
            font-size: 8px;
            color: var(--text-secondary); 
            margin-top: 2px;
            font-weight: 600;
            display: block;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        /* Ultra-Compact Filter Buttons */
        .filter-btn {
            transition: all 0.15s ease;
            color: var(--text-primary);
            border: 1px solid var(--border-color);
            box-shadow: var(--elevation-1);
            background: var(--card-bg);
        }
        
        .filter-btn.active {
            background: var(--primary-color) !important;
            color: #FFFFFF !important;
            box-shadow: var(--elevation-1);
            border-color: var(--primary-color);
            transform: translateY(-1px);
        }

        .filter-btn i {
            color: var(--primary-color);
        }

        .filter-btn.active i {
            color: #FFFFFF;
        }

        /* Ultra-Compact Play Modal */
        #play-modal {
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100vw; 
            height: 100vh;
            background: var(--app-bg); 
            z-index: 2000; 
            display: none;
        }

        #play-modal iframe { 
            width: 100vw; 
            height: 100vh;
            border: none; 
            overflow: auto;
            -webkit-overflow-scrolling: touch;
            background: var(--app-bg);
        }

        #close-modal-btn {
            position: fixed;
            top: 10px;
            right: 10px;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            color: var(--text-primary); 
            border: 1px solid var(--border-color); 
            border-radius: 50%; 
            width: 36px; 
            height: 36px;
            font-size: 14px; 
            cursor: pointer; 
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2001;
            box-shadow: var(--elevation-1);
        }

        #close-modal-btn:hover {
            background: var(--ripple-color);
            transform: scale(1.05);
            box-shadow: var(--elevation-2);
        }

        #close-modal-btn:active {
            transform: scale(0.95);
        }

        /* Ultra-Compact Custom Modal */
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(4px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
        }
        .modal-backdrop.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            width: 90%;
            max-width: 400px;
            max-height: 85vh;
            overflow-y: auto;
            background: var(--card-bg);
            border-radius: 12px;
            transform: scale(0.95);
            transition: transform 0.2s ease;
            color: var(--text-primary);
            box-shadow: var(--elevation-2);
            border: 1px solid var(--border-color);
        }
        .modal-backdrop.active .modal-content {
            transform: scale(1);
        }

        /* ✅ UPLOAD MODAL STYLES */
        .upload-method-btn {
            cursor: pointer;
            transition: all 0.2s ease;
            background: var(--card-bg);
            color: var(--text-primary);
        }

        .upload-method-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .upload-method-btn.border-blue-500 {
            border-color: #3b82f6 !important;
            background: rgba(59, 130, 246, 0.05) !important;
        }

        /* ✅ ENHANCED UPLOAD ICON WITH ANIMATION */
        .upload-icon {
            animation: float 2s ease-in-out infinite;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--elevation-2);
            transition: all 0.3s ease;
        }

        .upload-icon:hover {
            transform: scale(1.1) translateY(-2px);
            box-shadow: var(--elevation-3);
        }

        /* Action Icon Buttons for Online Tab */
        .action-icon {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--elevation-2);
            transition: all 0.3s ease;
            cursor: pointer;
            animation: float 2s ease-in-out infinite;
        }

        .action-icon:hover {
            transform: scale(1.1) translateY(-2px);
            box-shadow: var(--elevation-3);
        }

        .action-icon.shopping {
            background: linear-gradient(135deg, #FF9800, #FF5722);
        }

        .action-icon.marketplace {
            background: linear-gradient(135deg, #9C27B0, #673AB7);
        }

        .action-icon.store {
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
        }

        .action-icon.explore {
            background: linear-gradient(135deg, #FF5722, #D32F2F);
        }

        /* ✅ APK DOWNLOAD BUTTON STYLES */
        .apk-download-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 4px 8px;
            font-size: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 4px;
            margin-top: 4px;
            width: 100%;
            justify-content: center;
        }

        .apk-download-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .apk-download-btn:active {
            transform: translateY(0);
        }

        /* Logo Preview Styles */
        .logo-preview-container {
            transition: all 0.3s ease;
        }

        .logo-preview-success {
            background: #f0f9ff;
            border-color: #0ea5e9;
        }

        .logo-preview-error {
            background: #fef2f2;
            border-color: #ef4444;
        }

        /* Upload Progress Toast */
        .upload-toast {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--card-bg);
            color: var(--text-primary);
            padding: 12px 20px;
            border-radius: 25px;
            box-shadow: var(--elevation-2);
            border: 1px solid var(--border-color);
            z-index: 1001;
            font-size: 14px;
            font-weight: 500;
            backdrop-filter: blur(10px);
        }

        /* Ultra-Compact Scrollbar */
        ::-webkit-scrollbar {
            width: 1px;
            height: 1px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 1px;
        }

        /* Ultra-compact animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(8px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .fade-in {
            animation: fadeInUp 0.4s ease forwards;
        }

        .slide-in {
            animation: slideInUp 0.2s ease-out forwards;
        }

        /* Mobile frame styles for embedded content - Match Home Layout */
        .mobile-frame {
            max-width: 100%;
            margin: 0 auto;
            background: var(--app-bg);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        
        .header-bg {
            background: linear-gradient(135deg, #1a1f36 0%, #2d3561 100%);
        }
        
        .game-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .game-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 12px;
        }
        
        .section-title {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 16px;
            margin: 24px 0 16px 0;
        }
        
        .money-tab {
            background: var(--primary-color);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .money-tab.active {
            background: var(--secondary-color);
        }

        /* Additional dark mode and project card styles */
        .project-card {
            transition: all 0.3s ease;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
        }
        .project-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .loader {
            border: 3px solid var(--border-color);
            border-left: 3px solid var(--primary-color);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Policy modal styling */
        .policy-modal {
            max-height: 70vh;
            overflow-y: auto;
        }

        .policy-section {
            margin-bottom: 16px;
            padding: 12px;
            background: var(--card-bg);
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
            border: 1px solid var(--border-color);
        }

        /* Developer Tab Specific Styles */
        .profile-bg {
            background: linear-gradient(135deg, #F59E0B 0%, #EAB308 50%, #D97706 100%);
        }

        /* Responsive optimizations */
        @media (max-width: 768px) {
            .developer-card {
                flex-direction: column;
                text-align: center;
            }
            
            .developer-avatar {
                margin-right: 0;
                margin-bottom: 10px;
            }
            
            .developer-info {
                text-align: center;
            }
        }

        /* ✅ SHARED LAYOUT STYLES - All tabs follow home layout */
        .tab-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 50;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 6px;
            background: var(--header-bg);
            color: var(--text-on-header);
            border-bottom: 1px solid var(--border-color);
            padding: 6px 8px;
            height: 42px;
            backdrop-filter: blur(10px);
            box-shadow: var(--elevation-1);
            transition: all 0.3s ease;
        }

        .tab-title {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-on-header);
            text-align: center;
            flex: 1;
        }

        .tab-action-btn {
            background: transparent;
            border: none;
            font-size: 16px;
            cursor: pointer;
            padding: 6px;
            border-radius: 50%;
            transition: all 0.15s ease;
            color: var(--text-on-header);
            width: 34px;
            height: 34px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .tab-action-btn:active {
            transform: scale(0.95);
            background: var(--ripple-color);
        }

        .tab-action-btn.primary {
            background: var(--primary-color);
            color: #FFFFFF;
        }

        .tab-action-btn.primary:active {
            background: #1976D2;
        }

        /* Theme transition animations */
        * {
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }

    </style>
</head>
<body>
    <div class="app-container">
        <!-- Ultra-Compact Header with Android Three-Dot Menu -->
        <div class="new-header">
            <button id="hamburger-menu-btn" class="hamburger-btn">
                <i class="fas fa-bars"></i>
            </button>
            <div class="search-bar-container">
                <i class="fas fa-search"></i>
                <input type="text" class="search-input" placeholder="Search games & apps...">
            </div>
            <button id="menu-dots-btn" class="menu-dots">
                <i class="fas fa-ellipsis-v"></i>
            </button>
            <!-- Dropdown Menu -->
            <div id="dropdown-menu" class="dropdown-menu">
                <a class="dropdown-item" onclick="refreshContent()">
                    <i class="fas fa-sync-alt"></i>
                    <span>Refresh</span>
                </a>
                <a class="dropdown-item" onclick="shareApp()">
                    <i class="fas fa-share"></i>
                    <span>Share App</span>
                </a>
                <a class="dropdown-item" onclick="downloadApp()">
                    <i class="fas fa-download"></i>
                    <span>Get App</span>
                </a>
                <a class="dropdown-item" onclick="toggleTheme()">
                    <i class="fas fa-palette"></i>
                    <span id="theme-text">Dark Theme</span>
                </a>
                <a class="dropdown-item" onclick="redirectToAlPlayHub()">
                    <i class="fas fa-external-link-alt"></i>
                    <span>Visit AlPlayHub</span>
                </a>
                <a class="dropdown-item" onclick="showAbout()">
                    <i class="fas fa-info-circle"></i>
                    <span>About</span>
                </a>
                <a class="dropdown-item" onclick="openSettings()">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </div>
        </div>
        
        <!-- Side Menu -->
        <div id="side-menu-overlay" class="side-menu-overlay">
            <div id="side-menu" class="side-menu">
                <div class="side-menu-header">
                    <i class="fas fa-gamepad"></i>
                    AlPlayHub Menu
                </div>
                
                <a class="side-menu-item" onclick="showTab('home-tab'); closeSideMenu();">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </a>
                <a class="side-menu-item" onclick="openExternalPage('privacy'); closeSideMenu();">
                    <i class="fas fa-shield-alt"></i>
                    <span>Privacy Policy</span>
                </a>
                <a class="side-menu-item" onclick="openExternalPage('terms'); closeSideMenu();">
                    <i class="fas fa-file-contract"></i>
                    <span>Terms of Service</span>
                </a>
                <a class="side-menu-item" onclick="openExternalPage('about'); closeSideMenu();">
                    <i class="fas fa-info-circle"></i>
                    <span>About Us</span>
                </a>
                <a class="side-menu-item" onclick="openExternalPage('contact'); closeSideMenu();">
                    <i class="fas fa-envelope"></i>
                    <span>Contact</span>
                </a>
                <a class="side-menu-item" onclick="openExternalPage('feedback'); closeSideMenu();">
                    <i class="fas fa-comment"></i>
                    <span>Feedback</span>
                </a>
                <a class="side-menu-item" onclick="showTab('developer-tab'); closeSideMenu();">
                    <i class="fas fa-code"></i>
                    <span>Developer Info</span>
                </a>
                <a class="side-menu-item" onclick="openCryptoPage(); closeSideMenu();" style="background: linear-gradient(135deg, #FFD700, #FFA500); color: white; border-radius: 8px; margin: 8px 0; animation: pulse 2s infinite;">
                    <i class="fas fa-coins" style="color: white;"></i>
                    <span style="font-weight: 600;">🚀 Free Crypto Airdrops</span>
                </a>
                <button id="side-menu-close-btn" class="side-menu-close-btn">
                    <i class="fas fa-times mr-2"></i>Close
                </button>
            </div>
        </div>

        <!-- Main App -->
        <div id="main-app">
            <!-- Home Tab -->
            <div id="home-tab" class="tab-content active screen">
                <div class="screen-content">
                    <!-- ✅ HOME PAGE: Promotion Carousel - 3 Slides -->
                    <div class="promotion-carousel">
                        <div class="carousel-container" id="carousel-container">
                            <div class="carousel-slide active">
                                <img src="https://i.ibb.co/qYxJxDNF/Untitled-design-20250827-041333-0000.png" alt="Gaming Hub" class="carousel-image" loading="eager" onload="this.style.opacity=1" style="opacity:0;transition:opacity 0.3s">
                                <div class="carousel-overlay">
                                    <h3 class="carousel-title">🎮 Gaming Hub</h3>
                                    <p class="carousel-subtitle">Play instant games</p>
                                </div>
                            </div>
                            <div class="carousel-slide">
                                <img src="https://i.ibb.co/VY9c7F0X/a0-fgraphic.jpg" alt="App Center" class="carousel-image" loading="eager" onload="this.style.opacity=1" style="opacity:0;transition:opacity 0.3s">
                                <div class="carousel-overlay">
                                    <h3 class="carousel-title">📱 App Center</h3>
                                    <p class="carousel-subtitle">Discover amazing apps</p>
                                </div>
                            </div>
                            <div class="carousel-slide">
                                <img src="https://i.ibb.co/1fCXYQS9/developer-background-images.png" alt="Developer Tools" class="carousel-image" loading="eager" onload="this.style.opacity=1" style="opacity:0;transition:opacity 0.3s">
                                <div class="carousel-overlay">
                                    <h3 class="carousel-title">🔧 Dev Tools</h3>
                                    <p class="carousel-subtitle">Create & publish</p>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-indicators" id="carousel-indicators">
                            <span class="indicator active" data-slide="0"></span>
                            <span class="indicator" data-slide="1"></span>
                            <span class="indicator" data-slide="2"></span>
                        </div>
                    </div>
                    
                    <!-- Ultra-Compact Filter Buttons -->
                    <div class="flex justify-center gap-2 mb-3">
                        <button class="filter-btn px-2 py-1 rounded-full text-xs active font-medium bg-primary text-white" data-filter="All" onclick="filterItems('All')">
                            <i class="fas fa-th-large mr-1"></i>All
                        </button>
                        <button class="filter-btn px-2 py-1 rounded-full text-xs font-medium" data-filter="Game" onclick="filterItems('Game')">
                            <i class="fas fa-gamepad mr-1"></i>Games
                        </button>
                        <button class="filter-btn px-2 py-1 rounded-full text-xs font-medium" data-filter="App" onclick="filterItems('App')">
                            <i class="fas fa-mobile-alt mr-1"></i>Apps
                        </button>
                        <button class="filter-btn px-2 py-1 rounded-full text-xs font-medium" data-filter="Tool" onclick="filterItems('Tool')">
                            <i class="fas fa-tools mr-1"></i>Tools
                        </button>
                    </div>
                    
                    <!-- Container for Categories -->
                    <div id="categories-container">
                        <!-- Items will be dynamically loaded here -->
                    </div>
                </div>
            </div>
            
            <!-- Developer Tab - Using Home Layout Structure -->
            <div id="developer-tab" class="tab-content screen">
                <!-- Tab Header matching home layout -->
                <div class="tab-header" style="display: none;">
                    <button class="tab-action-btn">
                        
                    </button>
                    <div class="tab-title">Developer Info</div>
                    <button onclick="toggleDeveloperMenu()" class="tab-action-btn">
                        <i class="fas fa-ellipsis-v"></i>
                    </button>
                </div>

                <!-- Developer Page Dropdown Menu -->
                <div id="developerMenu" class="hidden absolute top-12 right-2 bg-white rounded-lg shadow-lg border border-gray-200 z-50 min-w-44">
                    <div class="py-2">
                        <a href="#" onclick="refreshProjects(); toggleDeveloperMenu();" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 border-b border-gray-100 transition-all duration-200">
                            <span class="text-sm mr-2">🔄</span>
                            <span class="text-xs font-medium">Refresh Projects</span>
                        </a>
                        <a href="#" onclick="redirectToAlPlayHub(); toggleDeveloperMenu();" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 border-b border-gray-100 transition-all duration-200">
                            <span class="text-sm mr-2">🌐</span>
                            <span class="text-xs font-medium">Visit AlPlayHub</span>
                        </a>
                        <a href="https://www.crekode.com/developersharif" target="_blank" onclick="toggleDeveloperMenu();" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 border-b border-gray-100 transition-all duration-200">
                            <span class="text-sm mr-2">💼</span>
                            <span class="text-xs font-medium">Portfolio</span>
                        </a>
                        <a href="mailto:ms2600971@gmail.com" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 transition-all duration-200">
                            <span class="text-sm mr-2">📧</span>
                            <span class="text-xs font-medium">Contact</span>
                        </a>
                    </div>
                </div>

                <div class="screen-content bg-gray-50 dark:bg-dark" style="font-family: 'Inter', sans-serif;">
                    <!-- Profile Section - Same spacing as home carousel -->
                    <div class="h-32 relative overflow-hidden rounded-2xl mb-3">
                        <div class="absolute inset-0 bg-cover bg-center" 
                             style="background-image: url('https://i.ibb.co/1fCXYQS9/developer-background-images.png')"></div>
                        <div class="absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"></div>
                        
                        <!-- Logo positioned on left side -->
                        <div class="absolute bottom-3 left-3">
                            <div class="relative">
                                <img src="https://i.ibb.co/jPjvv9Lc/833-d664fd374556c9aa42509614d-1746341384.png" 
                                     alt="Mohammed Sharif" 
                                     class="w-16 h-16 rounded-xl border-2 border-white bg-white">
                                <div class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white flex items-center justify-center">
                                    <i class="fas fa-check text-white text-xs"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Developer Details - Compact like home content -->
                    <div class="mb-4">
                        <!-- Developer Name & Info -->
                        <div class="text-center mb-4">
                            <h1 class="text-xl font-bold text-gray-900 dark:text-white mb-1">MOHAMMED SHARIF</h1>
                            <p class="text-gray-600 dark:text-gray-400 mb-1 text-sm">Game & Web Developer</p>
                            <p class="text-xs text-gray-500 dark:text-gray-500">🇵🇰 Made in Pakistan</p>
                            
                            <!-- Social Media Icons -->
                            <div class="flex justify-center space-x-3 mt-3">
                                <a href="#" class="w-10 h-10 bg-black rounded-full flex items-center justify-center text-white hover:bg-gray-800 transition-colors">
                                    <i class="fab fa-tiktok text-sm"></i>
                                </a>
                                <a href="#" class="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center text-white hover:bg-gray-900 transition-colors">
                                    <i class="fab fa-twitter text-sm"></i>
                                </a>
                                <a href="mailto:ms2600971@gmail.com" class="w-10 h-10 bg-red-500 rounded-full flex items-center justify-center text-white hover:bg-red-600 transition-colors">
                                    <i class="fas fa-envelope text-sm"></i>
                                </a>
                            </div>
                        </div>

                        <!-- Quick Stats - Same spacing as filter buttons -->
                        <div class="grid grid-cols-3 gap-2 mb-3">
                            <div class="stat-card">
                                <p class="stat-number" id="projectCount">0</p>
                                <p class="stat-label">Projects</p>
                            </div>
                            <div class="stat-card">
                                <p class="stat-number text-green-500">5+</p>
                                <p class="stat-label">Years</p>
                            </div>
                            <div class="stat-card">
                                <p class="stat-number text-orange-500">⭐</p>
                                <p class="stat-label">Quality</p>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="flex space-x-2 mb-4">
                            <a href="https://www.crekode.com/developersharif" target="_blank" 
                               class="flex-1 bg-primary text-white py-2 px-3 rounded-xl text-center hover:bg-opacity-90 transition-colors font-medium text-sm">
                                <i class="fas fa-globe mr-2"></i>Visit Portfolio
                            </a>
                            <button onclick="refreshProjects()" 
                                    class="px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                <i class="fas fa-sync-alt" id="dev-refresh-icon"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Projects Section -->
                    <div class="pb-6">
                        <div class="flex items-center justify-between mb-3">
                            <h2 class="text-base font-bold text-gray-900 dark:text-white flex items-center">
                                💼 My Projects
                            </h2>
                            <div class="text-xs text-gray-500 dark:text-gray-400" id="lastUpdated"></div>
                        </div>

                        <!-- Loading State -->
                        <div id="loadingState" class="flex flex-col items-center justify-center py-6">
                            <div class="loader mb-3"></div>
                            <p class="text-gray-500 dark:text-gray-400 text-sm">Loading projects...</p>
                        </div>

                        <!-- Error State -->
                        <div id="errorState" class="hidden flex flex-col items-center justify-center py-6">
                            <i class="fas fa-exclamation-triangle text-secondary text-xl mb-3"></i>
                            <p class="text-gray-500 dark:text-gray-400 text-sm mb-3">Failed to load projects</p>
                            <button onclick="loadProjects()" 
                                    class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-opacity-90 transition-colors text-sm">
                                Try Again
                            </button>
                        </div>

                        <!-- Projects Grid -->
                        <div id="projectsGrid" class="grid grid-cols-2 gap-2"></div>

                        <!-- Empty State -->
                        <div id="emptyState" class="hidden flex flex-col items-center justify-center py-6">
                            <i class="fas fa-folder-open text-gray-400 text-xl mb-3"></i>
                            <p class="text-gray-500 dark:text-gray-400 text-sm">No projects found</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- APK Downloader Tab - Using Home Layout Structure -->
            <div id="upload-tab" class="tab-content screen">
                <!-- Tab Header matching home layout -->
                <div class="tab-header" style="display: none;">
                    <button class="tab-action-btn">
                       
                    </button>
                    <div class="tab-title">APK DOWNLOADER</div>
                    <button onclick="toggleAPKMenu()" class="tab-action-btn">
                        
                    </button>
                </div>

                <!-- APK Page Dropdown Menu -->
                <div id="apkMenu" class="hidden absolute top-12 right-2 bg-white rounded-lg shadow-lg border border-gray-200 z-50 min-w-44">
                    <div class="py-2">
                        <a href="#" onclick="loadAPKGames(); toggleAPKMenu();" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 border-b border-gray-100 transition-all duration-200">
                            <span class="text-sm mr-2">🔄</span>
                            <span class="text-xs font-medium">Refresh Games</span>
                        </a>
                        <a href="#" onclick="redirectToAlPlayHub(); toggleAPKMenu();" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 border-b border-gray-100 transition-all duration-200">
                            <span class="text-sm mr-2">🌐</span>
                            <span class="text-xs font-medium">Visit AlPlayHub</span>
                        </a>
                        <a href="mailto:ms2600971@gmail.com" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 transition-all duration-200">
                            <span class="text-sm mr-2">📧</span>
                            <span class="text-xs font-medium">Support</span>
                        </a>
                    </div>
                </div>

                <div class="screen-content bg-white font-poppins">
                    <!-- ✅ APK PAGE: Promotion Carousel - 3 Slides -->
                    <div class="promotion-carousel">
                        <div class="carousel-container" id="apk-carousel-container">
                            <div class="carousel-slide active">
                                <img src="https://i.ibb.co/ZpmZVKdC/0-fgraphic.png" alt="APK Downloads" class="carousel-image">
                                <div class="carousel-overlay">
                                    <h3 class="carousel-title">📱 APK Downloads</h3>
                                    <p class="carousel-subtitle">Download Android Games</p>
                                </div>
                            </div>
                            <div class="carousel-slide">
                                <img src="https://i.ibb.co/WppmyzYT/inline.png" alt="Gaming Hub" class="carousel-image">
                                <div class="carousel-overlay">
                                    <h3 class="carousel-title">🎮 Mobile Gaming</h3>
                                    <p class="carousel-subtitle">Premium APK Games</p>
                                </div>
                            </div>
                            <div class="carousel-slide">
                                <img src="https://images.unsplash.com/photo-1551650975-87deedd944c3?w=800&h=400&fit=crop" alt="App Center" class="carousel-image">
                                <div class="carousel-overlay">
                                    <h3 class="carousel-title">🚀 Free Apps</h3>
                                    <p class="carousel-subtitle">Download & Install</p>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-indicators" id="apk-carousel-indicators">
                            <span class="indicator active" data-slide="0"></span>
                            <span class="indicator" data-slide="1"></span>
                            <span class="indicator" data-slide="2"></span>
                        </div>
                    </div>

                    <!-- Search Bar - Same style as home -->
                    <div class="search-bar-container mb-3">
                        <i class="fas fa-search"></i>
                        <input 
                            type="text" 
                            id="apk-searchInput" 
                            placeholder="Search games..." 
                            class="search-input"
                        >
                    </div>

                    <!-- Loading State -->
                    <div id="apk-loadingState" class="text-center py-8">
                        <div class="loader mx-auto mb-3"></div>
                        <p class="text-gray-600 text-sm">Loading games...</p>
                    </div>

                    <!-- Error State -->
                    <div id="apk-errorState" class="hidden text-center py-8">
                        <p class="text-red-500 mb-4 text-sm">Failed to load games</p>
                        <button id="apk-retry-button" class="bg-blue-500 text-white px-4 py-2 rounded-lg text-sm">
                            Try Again
                        </button>
                    </div>

                    <!-- Games Sections -->
                    <div id="apk-gamesSections" class="hidden">
                        <h2 class="text-base font-bold my-2 px-1 text-textDark flex items-center">
                            🎮 Games <span class="ml-2 text-sm font-semibold opacity-60" id="apk-gameCount"></span>
                        </h2>
                        <div class="category-scroll-container">
                            <div id="apk-allGames" class="flex gap-3"></div>
                        </div>
                    </div>

                    <!-- No Results -->
                    <div id="apk-noResults" class="hidden text-center py-8">
                        <p class="text-gray-600 text-sm">No games found</p>
                    </div>
                </div>
            </div>
            
            <!-- Online Gaming Tab - Fixed Layout -->
            <div id="profile-tab" class="tab-content screen">
                <!-- Tab Header matching home layout -->
                <div class="tab-header" style="display: none;">
                    <button class="tab-action-btn">
                        
                    </button>
                    <div class="tab-title">DASHBOARD</div>
                    <button onclick="toggleOnlineMenu()" class="tab-action-btn">
                        <i class="fas fa-ellipsis-v"></i>
                    </button>
                </div>

                <!-- Online Page Dropdown Menu -->
                <div id="onlineMenu" class="hidden absolute top-12 right-2 bg-white rounded-lg shadow-lg border border-gray-200 z-50 min-w-44">
                    <div class="py-2">
                        <a href="#" onclick="showUploadModal(); toggleOnlineMenu();" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 border-b border-gray-100 transition-all duration-200">
                            <span class="text-sm mr-2">📤</span>
                            <span class="text-xs font-medium">Upload Content</span>
                        </a>
                        <a href="#" onclick="redirectToAlPlayHub(); toggleOnlineMenu();" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 border-b border-gray-100 transition-all duration-200">
                            <span class="text-sm mr-2">🌐</span>
                            <span class="text-xs font-medium">Visit AlPlayHub</span>
                        </a>
                        <a href="#" onclick="showUploadPolicy(); toggleOnlineMenu();" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 border-b border-gray-100 transition-all duration-200">
                            <span class="text-sm mr-2">📋</span>
                            <span class="text-xs font-medium">Upload Guidelines</span>
                        </a>
                        <a href="mailto:ms2600971@gmail.com" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 border-b border-gray-100 transition-all duration-200">
                            <span class="text-sm mr-2">📧</span>
                            <span class="text-xs font-medium">Support Email</span>
                        </a>
                        <a href="#" onclick="showTermsPolicy(); toggleOnlineMenu();" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 transition-all duration-200">
                            <span class="text-sm mr-2">⚖️</span>
                            <span class="text-xs font-medium">Terms & Policies</span>
                        </a>
                    </div>
                </div>

                <div class="screen-content bg-white font-poppins">
                    <!-- ✅ ONLINE PAGE: Promotion Carousel - 3 Slides -->
                    <div class="promotion-carousel">
                        <div class="carousel-container" id="online-carousel-container">
                            <div class="carousel-slide active">
                                <img src="https://i.ibb.co/bgNxbQSY/images.jpg" alt="Online Gaming" class="carousel-image">
                                <div class="carousel-overlay">
                                    <h3 class="carousel-title">🎮 Online Gaming</h3>
                                    <p class="carousel-subtitle">Play games online instantly</p>
                                </div>
                            </div>
                            <div class="carousel-slide">
                                <img src="https://i.ibb.co/Jj8SsQK2/images.png" alt="Community" class="carousel-image">
                                <div class="carousel-overlay">
                                    <h3 class="carousel-title">👥 Community</h3>
                                    <p class="carousel-subtitle">Join creators worldwide</p>
                                </div>
                            </div>
                            <div class="carousel-slide">
                                <img src="https://images.unsplash.com/photo-1552820728-8b83bb6b773f?w=800&h=400&fit=crop" alt="Featured" class="carousel-image">
                                <div class="carousel-overlay">
                                    <h3 class="carousel-title">⭐ Featured</h3>
                                    <p class="carousel-subtitle">Top rated content</p>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-indicators" id="online-carousel-indicators">
                            <span class="indicator active" data-slide="0"></span>
                            <span class="indicator" data-slide="1"></span>
                            <span class="indicator" data-slide="2"></span>
                        </div>
                    </div>

                    <!-- Action Icons Section with Names -->
                    <div class="flex justify-center items-center gap-3 mb-3">
                        <!-- Shopping Cart Icon -->
                        <div class="text-center w-14">
                            <button onclick="openShoppingCenter()" class="action-icon shopping mx-auto w-9 h-9" title="Shopping Center">
                                <i class="fas fa-shopping-cart text-sm"></i>
                            </button>
                            <p class="text-xs mt-1 text-gray-600 font-normal leading-tight">Coming</p>
                        </div>
                        
                        <!-- Marketplace Icon -->
                        <div class="text-center w-14">
                            <button onclick="openMarketplace()" class="action-icon marketplace mx-auto w-9 h-9" title="Marketplace">
                                <i class="fas fa-store text-sm"></i>
                            </button>
                            <p class="text-xs mt-1 text-gray-600 font-normal leading-tight">Coming</p>
                        </div>
                        
                        <!-- Center Upload Cloud Icon -->
                        <div class="text-center w-14">
                            <button onclick="showUploadModal()" class="upload-icon mx-auto w-9 h-9" title="Upload Content">
                                <i class="fas fa-cloud-upload-alt text-sm"></i>
                            </button>
                            <p class="text-xs mt-1 text-gray-600 font-normal leading-tight">Upload</p>
                        </div>
                        
                        <!-- My Uploads Icon -->
                        <div class="text-center w-14">
                            <button onclick="showMyUploadsModal()" class="action-icon mx-auto w-9 h-9" title="My Uploads" style="background: linear-gradient(135deg, #6366F1, #8B5CF6);">
                                <i class="fas fa-folder-open text-sm"></i>
                            </button>
                            <p class="text-xs mt-1 text-gray-600 font-normal leading-tight">Files</p>
                        </div>
                        
                         
                    </div>

                    <!-- Search Bar - Same style as home -->
                    <div class="search-bar-container mb-3">
                        <i class="fas fa-search"></i>
                        <input 
                            type="text" 
                            id="online-searchInput" 
                            placeholder="Search games..." 
                            class="search-input"
                        >
                    </div>

                    <!-- Loading State -->
                    <div id="online-loadingState" class="text-center py-8">
                        <div class="loader mx-auto mb-3"></div>
                        <p class="text-gray-600 text-sm">Loading games...</p>
                    </div>

                    <!-- Error State -->
                    <div id="online-errorState" class="hidden text-center py-8">
                        <p class="text-red-500 mb-4 text-sm">Failed to load games</p>
                        <button id="online-retry-button" class="bg-blue-500 text-white px-4 py-2 rounded-lg text-sm">
                            Try Again
                        </button>
                    </div>

                    <!-- Games Sections -->
                    <div id="online-gamesSections" class="hidden">
                        <h2 class="text-base font-bold my-2 px-1 text-textDark flex items-center">
                            🎮 Games <span class="ml-2 text-sm font-semibold opacity-60" id="online-gameCount"></span>
                        </h2>
                        <div class="category-scroll-container">
                            <div id="online-allGames" class="flex gap-3"></div>
                        </div>
                    </div>

                    <!-- No Results -->
                    <div id="online-noResults" class="hidden text-center py-8">
                        <p class="text-gray-600 text-sm">No games found</p>
                    </div>
                </div>
            </div>

            <!-- Ultra-Compact Bottom Navigation -->
            <div class="bottom-nav">
                <button id="nav-home" class="nav-button active" onclick="showTab('home-tab')">
                    <i class="nav-icon fas fa-home"></i>
                    <span class="nav-label">Home</span>
                </button>
                <button id="nav-developer" class="nav-button" onclick="showTab('developer-tab')">
                    <i class="nav-icon fas fa-user-tie"></i>
                    <span class="nav-label">Developer</span>
                </button>
                <button id="nav-upload" class="nav-button" onclick="showTab('upload-tab')">
                    <i class="nav-icon fas fa-download"></i>
                    <span class="nav-label">APK</span>
                </button>
                <button id="nav-profile" class="nav-button" onclick="showTab('profile-tab')">
                    <i class="nav-icon fas fa-gamepad"></i>
                    <span class="nav-label">Online</span>
                </button>
            </div>
        </div>
        
        <!-- Ultra-Compact Play Modal -->
        <div id="play-modal">
            <iframe id="play-iframe"></iframe>
            <button id="close-modal-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <!-- Ultra-Compact Custom Modal -->
        <div id="custom-modal" class="modal-backdrop">
            <div class="modal-content">
                <div class="p-3 border-b border-borderColor">
                    <h3 id="modal-title" class="font-bold text-textDark text-sm">AlPlayHub Notification</h3>
                </div>
                <div class="p-3">
                    <p id="modal-message" class="text-textMuted mb-3 text-sm"></p>
                    <div class="flex gap-2">
                        <button id="modal-ok" class="flex-1 py-2 bg-primary text-white rounded-lg font-semibold text-sm">OK</button>
                        <button id="modal-cancel" class="flex-1 py-2 bg-gray-200 text-textDark rounded-lg font-semibold hidden text-sm">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Upload Modal -->
        <div id="upload-modal" class="modal-backdrop">
            <div class="modal-content max-w-md">
                <div class="p-4 border-b border-gray-200 bg-gradient-to-r from-blue-600 to-purple-600 rounded-t-xl">
                    <div class="flex justify-between items-center">
                        <h3 class="text-lg font-bold text-white flex items-center">
                            <i class="fas fa-upload mr-2"></i>Upload Content
                        </h3>
                        <button onclick="closeUploadModal()" class="text-white hover:text-gray-200 transition-colors">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    <p class="text-white/90 text-sm mt-1">Share your game or app with the community</p>
                </div>
                <div class="p-4 max-h-[60vh] overflow-y-auto">
                    <form id="upload-form" class="space-y-4">
                        <!-- App/Game Name -->
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fas fa-gamepad mr-1 text-blue-500"></i>App/Game Name *
                            </label>
                            <input type="text" id="app-name" required class="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all text-base" placeholder="Enter your app name">
                        </div>

                        <!-- Logo URL with Preview -->
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fas fa-image mr-1 text-green-500"></i>Logo Image URL *
                            </label>
                            <input type="url" id="logo-url" required class="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all text-base" placeholder="https://example.com/logo.png" onpaste="setTimeout(previewLogo, 100)" oninput="previewLogo()">
                            <p class="text-xs text-gray-500 mt-1">Square image recommended (512x512px)</p>
                            
                            <!-- Logo Preview -->
                            <div id="logo-preview" class="hidden mt-3 p-3 bg-gray-50 rounded-lg border">
                                <p class="text-sm font-medium text-gray-700 mb-2">Logo Preview:</p>
                                <div class="flex items-center space-x-3">
                                    <img id="preview-image" src="" alt="Logo Preview" class="w-16 h-16 rounded-lg object-cover border">
                                    <div>
                                        <p class="text-sm text-green-600 font-medium">✅ Logo loaded successfully</p>
                                        <p class="text-xs text-gray-500">This will be your app icon</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Logo Error -->
                            <div id="logo-error" class="hidden mt-3 p-3 bg-red-50 rounded-lg border border-red-200">
                                <p class="text-sm text-red-600 font-medium">❌ Invalid logo URL</p>
                                <p class="text-xs text-gray-500">Please provide a valid image URL</p>
                            </div>
                        </div>

                        <!-- Category Selection -->
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fas fa-tags mr-1 text-purple-500"></i>Category *
                            </label>
                            <select id="category" required class="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all text-base">
                                <option value="">Select Category</option>
                                <option value="Game">🎮 Game</option>
                                <option value="App">📱 App</option>
                                <option value="Tool">🔧 Tool</option>
                            </select>
                        </div>

                        <!-- Upload Method -->
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fas fa-upload mr-1 text-orange-500"></i>Upload Method *
                            </label>
                            <div class="grid grid-cols-2 gap-2">
                                <button type="button" onclick="selectUploadMethod('html')" class="upload-method-btn border-2 border-gray-300 rounded-lg p-3 text-center hover:border-blue-500 transition-all" data-method="html">
                                    <i class="fas fa-code text-2xl text-blue-500 mb-2"></i>
                                    <p class="text-sm font-medium">HTML Code</p>
                                </button>
                                <button type="button" onclick="selectUploadMethod('url')" class="upload-method-btn border-2 border-gray-300 rounded-lg p-3 text-center hover:border-blue-500 transition-all" data-method="url">
                                    <i class="fas fa-link text-2xl text-green-500 mb-2"></i>
                                    <p class="text-sm font-medium">Website URL</p>
                                </button>
                            </div>
                        </div>

                        <!-- HTML Code Upload -->
                        <div id="html-upload" class="hidden">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fas fa-code mr-1 text-blue-500"></i>HTML Code *
                            </label>
                            <textarea id="html-code" rows="6" class="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all text-base font-mono text-sm" placeholder="Paste your HTML code here..."></textarea>
                            <p class="text-xs text-gray-500 mt-1">Include complete HTML with CSS and JavaScript</p>
                        </div>

                        <!-- URL Upload -->
                        <div id="url-upload" class="hidden">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fas fa-link mr-1 text-green-500"></i>Website URL *
                            </label>
                            <input type="url" id="website-url" class="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all text-base" placeholder="https://yourgame.com">
                            <p class="text-xs text-gray-500 mt-1">Direct link to your game or app</p>
                        </div>

                        <!-- Description -->
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fas fa-align-left mr-1 text-teal-500"></i>Description
                            </label>
                            <textarea id="description" rows="3" class="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all text-base" placeholder="Describe your game or app..."></textarea>
                        </div>

                        <!-- Terms and Privacy Policy -->
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-gray-800 mb-2 flex items-center">
                                <i class="fas fa-shield-alt mr-2 text-blue-500"></i>Upload Guidelines
                            </h4>
                            <ul class="text-xs text-gray-600 space-y-1">
                                <li>• Content must be family-friendly and appropriate</li>
                                <li>• No copyright infringement or stolen content</li>
                                <li>• Games should be fully functional and tested</li>
                                <li>• Adult content or violence is not allowed</li>
                                <li>• Content will be reviewed before approval</li>
                            </ul>
                            <div class="mt-3">
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" id="agree-terms" required class="mr-2">
                                    <span class="text-gray-700">I agree to the upload guidelines and terms</span>
                                </label>
                            </div>
                        </div>

                        <!-- Upload Status Message -->
                        <div id="upload-status" class="hidden mb-4 p-4 rounded-lg">
                            <div id="upload-status-content"></div>
                        </div>

                        <!-- Submit Button -->
                        <div class="flex gap-3 pt-2">
                            <button type="button" onclick="closeUploadModal()" class="flex-1 py-3 px-4 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition-colors">
                                Cancel
                            </button>
                            <button type="submit" id="upload-submit-btn" class="flex-1 py-3 px-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:shadow-lg transition-all transform hover:scale-105">
                                <i class="fas fa-paper-plane mr-2"></i>Submit for Review
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Policy Modal -->
        <div id="policy-modal" class="modal-backdrop">
            <div class="modal-content policy-modal">
                <div class="p-4 border-b border-gray-200 bg-gradient-to-r from-blue-600 to-purple-600 rounded-t-xl">
                    <div class="flex justify-between items-center">
                        <h3 id="policy-title" class="text-lg font-bold text-white flex items-center">
                            <i class="fas fa-clipboard-list mr-2"></i>Upload Guidelines
                        </h3>
                        <button onclick="closePolicyModal()" class="text-white hover:text-gray-200 transition-colors">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                </div>
                <div id="policy-content" class="p-4 max-h-[60vh] overflow-y-auto">
                    <!-- Content will be dynamically loaded -->
                </div>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    
    <script>
        // ✅ FIREBASE CONFIG
        const firebaseConfig = {
            apiKey: "AIzaSyCth7R_Lsz4e_2Y1W19Wor-e6e_H-Ha10g",
            authDomain: "alplayhub-d1ea2.firebaseapp.com",
            databaseURL: "https://alplayhub-d1ea2-default-rtdb.firebaseio.com",
            projectId: "alplayhub-d1ea2",
            storageBucket: "alplayhub-d1ea2.firebasestorage.app",
            messagingSenderId: "1000142252130",
            appId: "1:1000142252130:web:b7c455d88dbcacf40a093b"
        };
        
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const storage = firebase.storage();

        // Enhanced App System with Theme Support
        let allItems = [];
        let currentFilter = 'All';
        let isLoading = false;
        let carouselCurrentSlide = 0;
        let carouselInterval;
        let currentTheme = 'light';

        // ✅ DEVELOPER TAB SPECIFIC VARIABLES
        let projectsData = [];

        // ✅ APK DOWNLOADER SPECIFIC VARIABLES
        let allGames = [];

        // ✅ ONLINE GAMING SPECIFIC VARIABLES
        let onlineGames = [];

        // ✅ SEPARATE CAROUSEL SYSTEMS FOR DIFFERENT TABS
        let apkCarouselInterval;
        let onlineCarouselInterval;
        let apkCurrentSlide = 0;
        let onlineCurrentSlide = 0;

        const typeIcons = {
            'Game': '🎮',
            'App': '📱', 
            'Tool': '🔧'
        };

        // ✅ LOGO PREVIEW FUNCTIONALITY
        function previewLogo() {
            const logoUrl = document.getElementById('logo-url').value.trim();
            const previewContainer = document.getElementById('logo-preview');
            const errorContainer = document.getElementById('logo-error');
            const previewImage = document.getElementById('preview-image');
            
            // Hide both containers initially
            previewContainer.classList.add('hidden');
            errorContainer.classList.add('hidden');
            
            if (!logoUrl) {
                return;
            }
            
            // Test if the URL is a valid image
            const img = new Image();
            img.onload = function() {
                previewImage.src = logoUrl;
                previewContainer.classList.remove('hidden');
                errorContainer.classList.add('hidden');
            };
            img.onerror = function() {
                previewContainer.classList.add('hidden');
                errorContainer.classList.remove('hidden');
            };
            img.src = logoUrl;
        }

        // ✅ THEME MANAGEMENT
        const themes = ['light', 'dark', 'green'];
        
        function initializeTheme() {
            const savedTheme = localStorage.getItem('alplayhub-theme') || 'light';
            currentTheme = savedTheme;
            applyTheme(currentTheme);
            updateThemeText();
        }

        function toggleTheme() {
            const currentIndex = themes.indexOf(currentTheme);
            const nextIndex = (currentIndex + 1) % themes.length;
            currentTheme = themes[nextIndex];
            
            applyTheme(currentTheme);
            updateThemeText();
            localStorage.setItem('alplayhub-theme', currentTheme);
            document.getElementById('dropdown-menu').classList.remove('active');
            
            showToast(`🎨 Switched to ${currentTheme} theme!`, 2000);
        }

        function applyTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            
            // Update meta theme color based on theme
            const themeColors = {
                'light': '#FFFFFF',
                'dark': '#1a1a1a',
                'green': '#f0f8f0'
            };
            
            updateThemeColorImmediate(themeColors[theme]);
        }

        function updateThemeText() {
            const themeText = document.getElementById('theme-text');
            const themeNames = {
                'light': 'Dark Theme',
                'dark': 'Green Theme', 
                'green': 'Light Theme'
            };
            
            if (themeText) {
                themeText.textContent = themeNames[currentTheme];
            }
        }

        // ✅ URL REDIRECTION
        function redirectToAlPlayHub() {
            showToast('🌐 Opening AlPlayHub website...', 2000);
            setTimeout(() => {
                window.open('https://alplayhub.netlify.app/', '_blank');
            }, 500);
        }

        // ✅ ACTION ICON FUNCTIONS FOR ONLINE TAB - Updated with proper names
        function openShoppingCenter() {
            showToast('🛒 Opening Shopping Center...', 2000);
            setTimeout(() => {
                window.open('https://example.com/shopping', '_blank');
            }, 500);
        }

        function openDeveloperHub() {
            showToast('👨‍💻 Opening Developer Hub...', 2000);
            setTimeout(() => {
                window.open('https://github.com/', '_blank');
            }, 500);
        }

        function openMarketplace() {
            showToast('🏪 Opening Marketplace...', 2000);
            setTimeout(() => {
                window.open('https://example.com/marketplace', '_blank');
            }, 500);
        }

        function openGameStore() {
            showToast('🎮 Opening Game Store...', 2000);
            setTimeout(() => {
                window.open('https://example.com/gamestore', '_blank');
            }, 500);
        }

        // ✅ CRYPTO PAGE FUNCTION
        function openCryptoPage() {
            showToast('🚀 Opening Free Crypto Airdrops page...', 2000);
            setTimeout(() => {
                // You can replace this URL later
                window.open('https://alplayhub.netlify.app/FreeCryptoAirdrops', '_blank');
            }, 500);
        }

        // ✅ MY UPLOADS FUNCTIONALITY
        function showMyUploadsModal() {
            // Create modal HTML
            const modalHTML = `
                <div id="my-uploads-modal" class="modal-backdrop active">
                    <div class="modal-content max-w-md">
                        <div class="p-4 border-b border-gray-200 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-t-xl">
                            <div class="flex justify-between items-center">
                                <h3 class="text-lg font-bold text-white flex items-center">
                                    <i class="fas fa-folder-open mr-2"></i>My Uploads Dashboard
                                </h3>
                                <button onclick="closeMyUploadsModal()" class="text-white hover:text-gray-200 transition-colors">
                                    <i class="fas fa-times text-xl"></i>
                                </button>
                            </div>
                            <p class="text-white/90 text-sm mt-1">Track your uploaded content status</p>
                        </div>
                        <div class="p-4 max-h-[60vh] overflow-y-auto">
                            <div id="my-uploads-content">
                                <div class="text-center py-8">
                                    <div class="loader mx-auto mb-3"></div>
                                    <p class="text-gray-600 text-sm">Loading your uploads...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Add modal to body
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            
            // Load user uploads
            loadMyUploads();
        }

        function closeMyUploadsModal() {
            const modal = document.getElementById('my-uploads-modal');
            if (modal) {
                modal.remove();
            }
        }

        function loadMyUploads() {
            const content = document.getElementById('my-uploads-content');
            
            // Load from Firebase uploads collection
            db.ref('uploads').orderByChild('timestamp').once('value')
                .then(snapshot => {
                    const uploads = [];
                    snapshot.forEach(child => {
                        uploads.push({ key: child.key, ...child.val() });
                    });
                    
                    uploads.reverse(); // Show latest first
                    
                    if (uploads.length === 0) {
                        content.innerHTML = `
                            <div class="text-center py-8">
                                <i class="fas fa-inbox text-gray-400 text-4xl mb-3"></i>
                                <h3 class="text-gray-600 font-medium mb-2">No Uploads Yet</h3>
                                <p class="text-gray-500 text-sm mb-4">You haven't uploaded any content yet.</p>
                                <button onclick="closeMyUploadsModal(); showUploadModal();" class="bg-purple-600 text-white px-4 py-2 rounded-lg text-sm">
                                    <i class="fas fa-plus mr-2"></i>Upload Content
                                </button>
                            </div>
                        `;
                        return;
                    }
                    
                    const uploadsHTML = uploads.map(upload => {
                        const statusColors = {
                            'pending': 'bg-yellow-100 text-yellow-800',
                            'approved': 'bg-green-100 text-green-800',
                            'rejected': 'bg-red-100 text-red-800'
                        };
                        
                        const statusIcons = {
                            'pending': 'fas fa-clock',
                            'approved': 'fas fa-check-circle',
                            'rejected': 'fas fa-times-circle'
                        };
                        
                        const uploadDate = new Date(upload.timestamp).toLocaleDateString();
                        
                        return `
                            <div class="border border-gray-200 rounded-lg p-3 mb-3 hover:shadow-sm transition-shadow">
                                <div class="flex items-start space-x-3">
                                    <img src="${upload.logo}" alt="${upload.title}" 
                                         class="w-12 h-12 rounded-lg object-cover flex-shrink-0"
                                         onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIGZpbGw9IiNmM2Y0ZjYiLz48Y2lyY2xlIGN4PSIyNCIgY3k9IjI0IiByPSIxMiIgZmlsbD0iIzk5OTk5OSIvPjwvc3ZnPg=='">
                                    
                                    <div class="flex-1 min-w-0">
                                        <h4 class="font-medium text-gray-900 text-sm truncate">${upload.title}</h4>
                                        <p class="text-xs text-gray-500 mt-1">${upload.type} • ${uploadDate}</p>
                                        
                                        <div class="flex items-center justify-between mt-2">
                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${statusColors[upload.status] || statusColors.pending}">
                                                <i class="${statusIcons[upload.status] || statusIcons.pending} mr-1"></i>
                                                ${upload.status || 'pending'}
                                            </span>
                                            
                                            ${upload.status === 'approved' ? 
                                                '<span class="text-xs text-green-600 font-medium">✅ Live on Platform</span>' : 
                                                upload.status === 'rejected' ? 
                                                '<span class="text-xs text-red-600 font-medium">❌ Rejected</span>' :
                                                '<span class="text-xs text-gray-500 font-medium">⏳ Under Review</span>'
                                            }
                                        </div>
                                    </div>
                                </div>
                                
                                ${upload.description ? 
                                    `<p class="text-xs text-gray-600 mt-2 line-clamp-2">${upload.description}</p>` : 
                                    ''
                                }
                            </div>
                        `;
                    }).join('');
                    
                    content.innerHTML = `
                        <div class="mb-4">
                            <div class="flex items-center justify-between mb-3">
                                <h4 class="font-medium text-gray-900">Your Content (${uploads.length})</h4>
                                <button onclick="closeMyUploadsModal(); showUploadModal();" class="text-purple-600 hover:text-purple-700 text-sm font-medium">
                                    <i class="fas fa-plus mr-1"></i>Add New
                                </button>
                            </div>
                            
                            <!-- Status Legend -->
                            <div class="bg-gray-50 rounded-lg p-3 mb-4">
                                <p class="text-xs font-medium text-gray-700 mb-2">Status Guide:</p>
                                <div class="grid grid-cols-3 gap-2 text-xs">
                                    <div class="flex items-center">
                                        <span class="inline-block w-2 h-2 bg-yellow-500 rounded-full mr-2"></span>
                                        <span class="text-gray-600">Under Review</span>
                                    </div>
                                    <div class="flex items-center">
                                        <span class="inline-block w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                                        <span class="text-gray-600">Approved</span>
                                    </div>
                                    <div class="flex items-center">
                                        <span class="inline-block w-2 h-2 bg-red-500 rounded-full mr-2"></span>
                                        <span class="text-gray-600">Rejected</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="space-y-3">
                            ${uploadsHTML}
                        </div>
                        
                        <div class="mt-4 pt-4 border-t border-gray-200 text-center">
                            <p class="text-xs text-gray-500">
                                💡 Only admin can approve/reject content. Contact support for questions.
                            </p>
                        </div>
                    `;
                })
                .catch(error => {
                    console.error('Error loading uploads:', error);
                    content.innerHTML = `
                        <div class="text-center py-8">
                            <i class="fas fa-exclamation-triangle text-red-400 text-4xl mb-3"></i>
                            <h3 class="text-red-600 font-medium mb-2">Loading Failed</h3>
                            <p class="text-gray-500 text-sm mb-4">Failed to load your uploads.</p>
                            <button onclick="loadMyUploads();" class="bg-red-600 text-white px-4 py-2 rounded-lg text-sm">
                                <i class="fas fa-sync-alt mr-2"></i>Try Again
                            </button>
                        </div>
                    `;
                });
        }

        // ✅ MENU TOGGLE FUNCTIONS
        function toggleDeveloperMenu() {
            const menu = document.getElementById('developerMenu');
            if (menu) {
                menu.classList.toggle('hidden');
            }
        }

        function toggleAPKMenu() {
            const menu = document.getElementById('apkMenu');
            if (menu) {
                menu.classList.toggle('hidden');
            }
        }

        function toggleOnlineMenu() {
            const menu = document.getElementById('onlineMenu');
            if (menu) {
                menu.classList.toggle('hidden');
            }
        }

        // Close all dropdown menus when clicking outside
        document.addEventListener('click', function(event) {
            const menus = ['developerMenu', 'apkMenu', 'onlineMenu'];
            menus.forEach(menuId => {
                const menu = document.getElementById(menuId);
                if (menu && !event.target.closest(`#${menuId}`) && !event.target.closest(`button[onclick="toggle${menuId.replace('Menu', '').charAt(0).toUpperCase() + menuId.replace('Menu', '').slice(1)}Menu()"]`)) {
                    menu.classList.add('hidden');
                }
            });
        });
        
        document.addEventListener('DOMContentLoaded', () => {
            initializeApp();
            setupEventListeners();
            loadData();
            setupSideMenu();
            setupSearch();
            optimizeForAndroid();
            initializeHeaderVisibility();
            setupDropdownMenu();
            setupEngagingFeatures();
            setupCarousel();
            initializeDeveloperTab();
            initializeAPKDownloaderTab();
            initializeOnlineGamingTab();
            setupUploadForm();
            initializeTheme();
            setupAPKCarousel();
            setupOnlineCarousel();
        });

        // ✅ SETUP SEPARATE CAROUSEL FOR APK PAGE WITH UNIQUE IMAGES
        function setupAPKCarousel() {
            const slides = document.querySelectorAll('#apk-carousel-container .carousel-slide');
            const indicators = document.querySelectorAll('#apk-carousel-indicators .indicator');
            
            if (slides.length === 0) return;
            
            const totalSlides = slides.length;
            
            indicators.forEach((indicator, index) => {
                indicator.addEventListener('click', () => {
                    goToAPKSlide(index);
                });
            });
            
            function startAPKCarousel() {
                apkCarouselInterval = setInterval(() => {
                    apkCurrentSlide = (apkCurrentSlide + 1) % totalSlides;
                    goToAPKSlide(apkCurrentSlide);
                }, 4000);
            }
            
            function goToAPKSlide(slideIndex) {
                slides.forEach(slide => slide.classList.remove('active'));
                indicators.forEach(indicator => indicator.classList.remove('active'));
                
                slides[slideIndex].classList.add('active');
                indicators[slideIndex].classList.add('active');
                
                apkCurrentSlide = slideIndex;
            }
            
            startAPKCarousel();
            
            const carousel = document.querySelector('#upload-tab .promotion-carousel');
            if (carousel) {
                carousel.addEventListener('mouseenter', () => {
                    clearInterval(apkCarouselInterval);
                });
                
                carousel.addEventListener('mouseleave', () => {
                    startAPKCarousel();
                });
            }
        }

        // ✅ SETUP SEPARATE CAROUSEL FOR ONLINE PAGE WITH UNIQUE IMAGES
        function setupOnlineCarousel() {
            const slides = document.querySelectorAll('#online-carousel-container .carousel-slide');
            const indicators = document.querySelectorAll('#online-carousel-indicators .indicator');
            
            if (slides.length === 0) return;
            
            const totalSlides = slides.length;
            
            indicators.forEach((indicator, index) => {
                indicator.addEventListener('click', () => {
                    goToOnlineSlide(index);
                });
            });
            
            function startOnlineCarousel() {
                onlineCarouselInterval = setInterval(() => {
                    onlineCurrentSlide = (onlineCurrentSlide + 1) % totalSlides;
                    goToOnlineSlide(onlineCurrentSlide);
                }, 4000);
            }
            
            function goToOnlineSlide(slideIndex) {
                slides.forEach(slide => slide.classList.remove('active'));
                indicators.forEach(indicator => indicator.classList.remove('active'));
                
                slides[slideIndex].classList.add('active');
                indicators[slideIndex].classList.add('active');
                
                onlineCurrentSlide = slideIndex;
            }
            
            startOnlineCarousel();
            
            const carousel = document.querySelector('#profile-tab .promotion-carousel');
            if (carousel) {
                carousel.addEventListener('mouseenter', () => {
                    clearInterval(onlineCarouselInterval);
                });
                
                carousel.addEventListener('mouseleave', () => {
                    startOnlineCarousel();
                });
            }
        }

        // ✅ UPLOAD FUNCTIONALITY
        function showUploadModal() {
            document.getElementById('upload-modal').classList.add('active');
        }

        function closeUploadModal() {
            document.getElementById('upload-modal').classList.remove('active');
            document.getElementById('upload-form').reset();
            document.querySelectorAll('.upload-method-btn').forEach(btn => {
                btn.classList.remove('border-blue-500', 'bg-blue-50');
                btn.classList.add('border-gray-300');
            });
            document.getElementById('html-upload').classList.add('hidden');
            document.getElementById('url-upload').classList.add('hidden');
            document.getElementById('logo-preview').classList.add('hidden');
            document.getElementById('logo-error').classList.add('hidden');
        }

        function selectUploadMethod(method) {
            // Reset all buttons
            document.querySelectorAll('.upload-method-btn').forEach(btn => {
                btn.classList.remove('border-blue-500', 'bg-blue-50');
                btn.classList.add('border-gray-300');
            });
            
            // Highlight selected button
            const selectedBtn = document.querySelector(`[data-method="${method}"]`);
            selectedBtn.classList.add('border-blue-500', 'bg-blue-50');
            selectedBtn.classList.remove('border-gray-300');
            
            // Show/hide upload sections
            document.getElementById('html-upload').classList.add('hidden');
            document.getElementById('url-upload').classList.add('hidden');
            
            if (method === 'html') {
                document.getElementById('html-upload').classList.remove('hidden');
            } else if (method === 'url') {
                document.getElementById('url-upload').classList.remove('hidden');
            }
        }

        // Setup upload form
        function setupUploadForm() {
            const uploadForm = document.getElementById('upload-form');
            if (uploadForm) {
                uploadForm.addEventListener('submit', handleUploadSubmit);
            }
        }

        // ✅ FIXED: UPLOAD WITH INLINE FEEDBACK ON SAME PAGE
        function handleUploadSubmit(event) {
            event.preventDefault();
            console.log('🔥 Upload form submitted!'); // Debug log
            
            // Show inline status immediately
            showInlineStatus('⏳ Starting upload process...', 'info');
            
            // Validate form first
            if (!validateUploadForm()) {
                console.log('❌ Form validation failed'); // Debug log
                showInlineStatus('❌ Please fill all required fields correctly', 'error');
                return;
            }
            
            console.log('✅ Form validation passed'); // Debug log
            
            // Show loading state
            const submitBtn = event.target.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Uploading...';
            submitBtn.disabled = true;
            
            // Show inline upload progress
            showInlineStatus('📤 Uploading your content to admin for review...', 'loading');
            
            const formData = {
                title: document.getElementById('app-name').value.trim(),
                logo: document.getElementById('logo-url').value.trim(),
                type: document.getElementById('category').value,
                description: document.getElementById('description').value.trim(),
                timestamp: Date.now(),
                submitDate: new Date().toLocaleDateString(),
                submitTime: new Date().toLocaleTimeString(),
                status: 'pending',
                uploader: 'user_' + Date.now(),
                userAgent: navigator.userAgent
            };

            // Get upload method specific data
            const selectedMethod = document.querySelector('.upload-method-btn.border-blue-500');
            if (selectedMethod) {
                const method = selectedMethod.getAttribute('data-method');
                formData.uploadMethod = method;
                
                if (method === 'html') {
                    const htmlCode = document.getElementById('html-code').value.trim();
                    if (!htmlCode) {
                        resetSubmitButton(submitBtn, originalText);
                        showInlineStatus('❌ Please provide HTML code', 'error');
                        return;
                    }
                    formData.htmlCode = htmlCode;
                } else if (method === 'url') {
                    const gameUrl = document.getElementById('website-url').value.trim();
                    if (!gameUrl) {
                        resetSubmitButton(submitBtn, originalText);
                        showInlineStatus('❌ Please provide website URL', 'error');
                        return;
                    }
                    formData.gameUrl = gameUrl;
                }
            } else {
                resetSubmitButton(submitBtn, originalText);
                showInlineStatus('❌ Please select upload method (HTML or URL)', 'error');
                return;
            }

            console.log('📋 Form data prepared:', formData); // Debug log

            // Submit to Firebase uploads collection for admin review
            try {
                db.ref('uploads').push(formData)
                    .then((ref) => {
                        console.log('✅ Upload successful:', ref.key); // Debug log
                        
                        // Reset button
                        resetSubmitButton(submitBtn, originalText);
                        
                        // Show SUCCESS message on same page
                        showInlineStatus(`🎉 Upload Successful! "${formData.title}" has been sent to admin for review. Upload ID: ${ref.key.substr(-8)}`, 'success');
                        
                        // Clear form after 3 seconds
                        setTimeout(() => {
                            document.getElementById('upload-form').reset();
                            resetUploadModal();
                            hideInlineStatus();
                        }, 3000);
                        
                        // Show success toast
                        showToast(`🎉 "${formData.title}" successfully uploaded!`, 3000);
                    })
                    .catch((error) => {
                        console.error('❌ Upload error:', error); // Debug log
                        
                        // Reset button
                        resetSubmitButton(submitBtn, originalText);
                        
                        // Show error on same page
                        showInlineStatus(`❌ Upload failed: ${error.message}. Please check your internet connection and try again.`, 'error');
                    });
            } catch (error) {
                console.error('❌ Firebase error:', error); // Debug log
                resetSubmitButton(submitBtn, originalText);
                showInlineStatus('❌ Firebase connection error. Please try again.', 'error');
            }
        }

        // Show inline status messages on same page
        function showInlineStatus(message, type) {
            const statusDiv = document.getElementById('upload-status');
            const contentDiv = document.getElementById('upload-status-content');
            
            // Set styling based on type
            statusDiv.className = 'mb-4 p-4 rounded-lg';
            contentDiv.innerHTML = '';
            
            if (type === 'success') {
                statusDiv.classList.add('bg-green-50', 'border', 'border-green-200');
                contentDiv.innerHTML = `
                    <div class="flex items-start">
                        <div class="flex-shrink-0">
                            <i class="fas fa-check-circle text-green-500 text-lg"></i>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium text-green-800">${message}</p>
                            <p class="text-xs text-green-600 mt-1">Form will be cleared automatically in a few seconds.</p>
                        </div>
                    </div>
                `;
            } else if (type === 'error') {
                statusDiv.classList.add('bg-red-50', 'border', 'border-red-200');
                contentDiv.innerHTML = `
                    <div class="flex items-start">
                        <div class="flex-shrink-0">
                            <i class="fas fa-exclamation-circle text-red-500 text-lg"></i>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium text-red-800">${message}</p>
                        </div>
                    </div>
                `;
            } else if (type === 'loading') {
                statusDiv.classList.add('bg-blue-50', 'border', 'border-blue-200');
                contentDiv.innerHTML = `
                    <div class="flex items-start">
                        <div class="flex-shrink-0">
                            <i class="fas fa-spinner fa-spin text-blue-500 text-lg"></i>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium text-blue-800">${message}</p>
                            <p class="text-xs text-blue-600 mt-1">Please wait while we process your upload...</p>
                        </div>
                    </div>
                `;
            } else {
                statusDiv.classList.add('bg-gray-50', 'border', 'border-gray-200');
                contentDiv.innerHTML = `
                    <div class="flex items-start">
                        <div class="flex-shrink-0">
                            <i class="fas fa-info-circle text-gray-500 text-lg"></i>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium text-gray-800">${message}</p>
                        </div>
                    </div>
                `;
            }
            
            statusDiv.classList.remove('hidden');
            
            // Scroll to status message
            statusDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Hide inline status
        function hideInlineStatus() {
            const statusDiv = document.getElementById('upload-status');
            statusDiv.classList.add('hidden');
        }

        // Reset upload modal to initial state
        function resetUploadModal() {
            // Reset upload method buttons
            document.querySelectorAll('.upload-method-btn').forEach(btn => {
                btn.classList.remove('border-blue-500', 'bg-blue-50');
                btn.classList.add('border-gray-300');
            });
            
            // Hide upload sections
            document.getElementById('html-upload').classList.add('hidden');
            document.getElementById('url-upload').classList.add('hidden');
            document.getElementById('logo-preview').classList.add('hidden');
            document.getElementById('logo-error').classList.add('hidden');
        }

        // Show BIG success message
        function showBigSuccessMessage(title, uploadKey) {
            const successHTML = `
                <div id="success-overlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]" style="backdrop-filter: blur(4px);">
                    <div class="bg-white rounded-2xl p-6 mx-4 max-w-sm w-full text-center shadow-2xl">
                        <div class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-check text-white text-2xl"></i>
                        </div>
                        <h2 class="text-xl font-bold text-gray-800 mb-2">🎉 Upload Successful!</h2>
                        <p class="text-gray-600 mb-4">"${title}" has been sent to admin for review</p>
                        <div class="bg-gray-50 rounded-lg p-3 mb-4">
                            <p class="text-sm text-gray-700"><strong>Upload ID:</strong> ${uploadKey.substr(-8)}</p>
                            <p class="text-sm text-gray-700"><strong>Status:</strong> Pending Review</p>
                        </div>
                        <p class="text-xs text-gray-500 mb-4">Review typically takes 24-48 hours. You can check status in "My Uploads" section.</p>
                        <button onclick="closeSuccessMessage()" class="w-full bg-green-500 text-white py-3 rounded-lg font-semibold hover:bg-green-600 transition-colors">
                            ✅ Got it!
                        </button>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', successHTML);
        }

        // Close success message
        function closeSuccessMessage() {
            const overlay = document.getElementById('success-overlay');
            if (overlay) {
                overlay.remove();
            }
        }

        // Helper function to reset submit button
        function resetSubmitButton(submitBtn, originalText) {
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
        }

        // Enhanced form validation
        function validateUploadForm() {
            const appName = document.getElementById('app-name').value.trim();
            const logoUrl = document.getElementById('logo-url').value.trim();
            const category = document.getElementById('category').value;
            const agreeTerms = document.getElementById('agree-terms').checked;

            if (!appName) {
                showToast('❌ Please enter app/game name', 3000);
                document.getElementById('app-name').focus();
                return false;
            }

            if (appName.length < 3) {
                showToast('❌ App name must be at least 3 characters', 3000);
                document.getElementById('app-name').focus();
                return false;
            }

            if (!logoUrl) {
                showToast('❌ Please provide logo URL', 3000);
                document.getElementById('logo-url').focus();
                return false;
            }

            if (!category) {
                showToast('❌ Please select a category', 3000);
                document.getElementById('category').focus();
                return false;
            }

            if (!agreeTerms) {
                showToast('❌ Please agree to upload guidelines', 3000);
                document.getElementById('agree-terms').focus();
                return false;
            }

            return true;
        }

        // Enhanced success modal with detailed instructions
        function showUploadSuccessModal(title, uploadKey) {
            const message = `🎉 Upload Successful!\n\n✅ "${title}" has been submitted for review\n\nUpload ID: ${uploadKey.substr(-8)}\n\n📋 Next Steps:\n• Your content is now with our admin team\n• Review typically takes 24-48 hours\n• Once approved, it will appear on the platform\n• You can check status in "My Uploads" section\n\n📧 You'll be notified when it's live!\n\n🚀 Thank you for contributing to AlPlayHub!`;
            
            showModal(message, '🎉 Upload Complete!');
        }

        // ✅ POLICY FUNCTIONALITY
        function showUploadPolicy() {
            const content = `
                <div class="space-y-4">
                    <div class="policy-section">
                        <h4 class="font-semibold text-gray-800 mb-2 flex items-center">
                            <i class="fas fa-upload mr-2 text-blue-500"></i>Content Upload Guidelines
                        </h4>
                        <ul class="text-sm text-gray-600 space-y-2">
                            <li>• Submit only original content or content you have rights to distribute</li>
                            <li>• Ensure your games/apps are fully functional and tested</li>
                            <li>• Provide accurate descriptions and appropriate logos</li>
                            <li>• Content must be family-friendly and appropriate for all ages</li>
                            <li>• No malicious code, viruses, or harmful content</li>
                        </ul>
                    </div>
                    
                    <div class="policy-section">
                        <h4 class="font-semibold text-gray-800 mb-2 flex items-center">
                            <i class="fas fa-check-circle mr-2 text-green-500"></i>Review Process
                        </h4>
                        <ul class="text-sm text-gray-600 space-y-2">
                            <li>• All uploads are reviewed by our admin team</li>
                            <li>• Review typically takes 24-48 hours</li>
                            <li>• You'll be notified via email about approval status</li>
                            <li>• Only approved content appears on the platform</li>
                        </ul>
                    </div>
                    
                    <div class="policy-section">
                        <h4 class="font-semibold text-gray-800 mb-2 flex items-center">
                            <i class="fas fa-shield-alt mr-2 text-red-500"></i>Content Management
                        </h4>
                        <ul class="text-sm text-gray-600 space-y-2">
                            <li>• Admin has the right to approve or reject any content</li>
                            <li>• Users cannot delete content after upload</li>
                            <li>• Only admin can remove content from the platform</li>
                            <li>• Contact support for content-related issues</li>
                        </ul>
                    </div>
                    
                    <div class="policy-section">
                        <h4 class="font-semibold text-gray-800 mb-2 flex items-center">
                            <i class="fas fa-envelope mr-2 text-purple-500"></i>Support & Contact
                        </h4>
                        <p class="text-sm text-gray-600 mb-2">For any questions or support:</p>
                        <a href="mailto:ms2600971@gmail.com" class="text-blue-500 underline text-sm">ms2600971@gmail.com</a>
                    </div>
                </div>
            `;
            
            showPolicyModal('Upload Guidelines & Policies', content);
        }

        function showTermsPolicy() {
            const content = `
                <div class="space-y-4">
                    <div class="policy-section">
                        <h4 class="font-semibold text-gray-800 mb-2">Terms of Service</h4>
                        <div class="text-sm text-gray-600 space-y-2">
                            <p>By using AlPlayHub, you agree to:</p>
                            <ul class="list-disc list-inside space-y-1 ml-4">
                                <li>Comply with all platform guidelines</li>
                                <li>Submit only legal and appropriate content</li>
                                <li>Respect intellectual property rights</li>
                                <li>Accept admin decisions on content approval</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="policy-section">
                        <h4 class="font-semibold text-gray-800 mb-2">Privacy Policy</h4>
                        <div class="text-sm text-gray-600 space-y-2">
                            <p>We respect your privacy:</p>
                            <ul class="list-disc list-inside space-y-1 ml-4">
                                <li>We collect minimal necessary information</li>
                                <li>Your email is used only for notifications</li>
                                <li>Content metadata is stored for platform functionality</li>
                                <li>We don't share personal data with third parties</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="policy-section">
                        <h4 class="font-semibold text-gray-800 mb-2">Content Ownership</h4>
                        <div class="text-sm text-gray-600 space-y-2">
                            <p>Important notes:</p>
                            <ul class="list-disc list-inside space-y-1 ml-4">
                                <li>You retain ownership of your original content</li>
                                <li>By uploading, you grant us license to distribute</li>
                                <li>We reserve the right to moderate content</li>
                                <li>Removal requests must go through admin</li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
            
            showPolicyModal('Terms & Privacy Policy', content);
        }

        function showPolicyModal(title, content) {
            document.getElementById('policy-title').innerHTML = `<i class="fas fa-clipboard-list mr-2"></i>${title}`;
            document.getElementById('policy-content').innerHTML = content;
            document.getElementById('policy-modal').classList.add('active');
        }

        function closePolicyModal() {
            document.getElementById('policy-modal').classList.remove('active');
        }

        // ✅ DEVELOPER TAB FUNCTIONS
        function initializeDeveloperTab() {
            loadProjects();
        }

        const CSV_URL = 'https://docs.google.com/spreadsheets/d/1Zoj9EK4D2I2PUktNemO7wyXwVfcOWYedEEXzNKNGFRE/export?format=csv';

        function showLoadingState() {
            document.getElementById('loadingState').classList.remove('hidden');
            document.getElementById('errorState').classList.add('hidden');
            document.getElementById('emptyState').classList.add('hidden');
        }

        function showErrorState() {
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('errorState').classList.remove('hidden');
            document.getElementById('emptyState').classList.add('hidden');
        }

        function showEmptyState() {
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('errorState').classList.add('hidden');
            document.getElementById('emptyState').classList.remove('hidden');
        }

        function hideAllStates() {
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('errorState').classList.add('hidden');
            document.getElementById('emptyState').classList.add('hidden');
        }

        function parseCSV(text) {
            const lines = text.trim().split('\n');
            const headers = lines[0].split(',').map(h => h.trim());
            const projects = [];

            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split(',').map(v => v.trim());
                if (values.length >= headers.length && values[0]) {
                    const project = {};
                    headers.forEach((header, index) => {
                        project[header] = values[index] || '';
                    });
                    projects.push(project);
                }
            }

            return projects;
        }

        function createProjectCard(project) {
            return `
                <div class="project-card rounded-xl shadow-sm overflow-hidden">
                    <img src="${project.logo}" 
                         alt="${project.name}" 
                         class="w-full h-20 object-cover"
                         onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9Ijk2IiB2aWV3Qm94PSIwIDAgMTYwIDk2IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxNjAiIGhlaWdodD0iOTYiIGZpbGw9IiNmM2Y0ZjYiLz48Y2lyY2xlIGN4PSI4MCIgY3k9IjQ4IiByPSIyMCIgZmlsbD0iIzk5OTk5OSIvPjwvc3ZnPg=='">
                    
                    <div class="p-2">
                        <h3 class="font-semibold text-xs mb-1 line-clamp-2 leading-tight">
                            ${project.name}
                        </h3>
                        <p class="text-xs text-gray-500 mb-2">HTML5 Game</p>
                        
                        <div class="flex space-x-1">
                            <button onclick="buyProject('${project.URL}')" 
                                    class="bg-primary text-white px-2 py-1 rounded-lg hover:bg-opacity-90 transition-colors text-xs font-medium flex-1">
                                <i class="fas fa-shopping-cart mr-1"></i>Buy
                            </button>
                            <button onclick="previewProject('${project.URL}')" 
                                    class="bg-gray-100 text-gray-700 px-2 py-1 rounded-lg hover:bg-gray-200 transition-colors text-xs">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function displayProjects() {
            const grid = document.getElementById('projectsGrid');
            
            if (projectsData.length === 0) {
                showEmptyState();
                return;
            }

            hideAllStates();
            grid.innerHTML = projectsData.map(createProjectCard).join('');
            
            // Update project count
            document.getElementById('projectCount').textContent = projectsData.length;
            
            // Update last updated time
            document.getElementById('lastUpdated').textContent = `Updated: ${new Date().toLocaleTimeString()}`;
        }

        async function loadProjects() {
            try {
                showLoadingState();
                
                const response = await fetch(CSV_URL);
                if (!response.ok) {
                    throw new Error('Failed to fetch data');
                }
                
                const csvText = await response.text();
                projectsData = parseCSV(csvText);
                displayProjects();
                
            } catch (error) {
                console.error('Error loading projects:', error);
                showErrorState();
            }
        }

        function refreshProjects() {
            const refreshIcon = document.getElementById('dev-refresh-icon');
            refreshIcon.classList.add('fa-spin');
            
            setTimeout(() => {
                refreshIcon.classList.remove('fa-spin');
            }, 1000);
            
            loadProjects();
        }

        function buyProject(url) {
            if (url) {
                window.open(url, '_blank');
            }
        }

        function previewProject(url) {
            if (url) {
                window.open(url, '_blank');
            }
        }

        // ✅ APK DOWNLOADER TAB FUNCTIONS
        function initializeAPKDownloaderTab() {
            loadAPKGames();
        }

        // CSV Parser for APK Downloader
        function parseAPKCSV(csvText) {
            const lines = csvText.split('\n');
            const result = [];
            
            // Skip header row and process data
            for (let i = 1; i < lines.length; i++) {
                const line = lines[i].trim();
                if (!line) continue;
                
                // Simple CSV parsing (handles basic cases)
                const values = line.split(',').map(val => val.trim());
                if (values.length >= 3) {
                    result.push({
                        name: values[0] || 'Untitled Game',
                        logo: values[1] || '',
                        url: values[2] || '#'
                    });
                }
            }
            
            return result;
        }

        // Create mobile game card with download functionality matching home style
        function createMobileGameCard(game) {
            return `
                <div class="item-card">
                    <div class="card-image">
                        ${game.logo ? 
                            `<img src="${game.logo}" alt="${game.name}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                             <div class="fallback-icon" style="display:none;">🎮</div>` : 
                            `<div class="fallback-icon">🎮</div>`
                        }
                    </div>
                    <div class="card-content">
                        <div class="item-title">${game.name}</div>
                        <button class="apk-download-btn" onclick="downloadGame('${game.url}', '${game.name}')">
                            <i class="fas fa-download"></i>
                            Download
                        </button>
                    </div>
                </div>
            `;
        }

        // Download game function - Direct APK download (FIXED)
        function downloadGame(url, gameName) {
            if (url && url !== '#') {
                // Direct download without creating HTML file
                window.open(url, '_blank');
                showToast(`📱 Downloading ${gameName}...`, 3000);
            }
        }

        // Render games in home layout style for APK downloader
        function renderAPKMobileDashboard() {
            const gamesSections = document.querySelector('#apk-gamesSections');
            const loadingState = document.querySelector('#apk-loadingState');
            
            if (gamesSections && loadingState) {
                loadingState.classList.add('hidden');
                gamesSections.classList.remove('hidden');
                
                const allGamesContainer = document.querySelector('#apk-allGames');
                const gameCount = document.querySelector('#apk-gameCount');
                if (allGamesContainer && gameCount) {
                    allGamesContainer.innerHTML = '';
                    allGames.forEach(game => {
                        const gameElement = document.createElement('div');
                        gameElement.innerHTML = createMobileGameCard(game);
                        allGamesContainer.appendChild(gameElement.firstElementChild);
                    });
                    gameCount.textContent = `(${allGames.length})`;
                }
            }
        }

        // Search functionality for APK downloader
        function searchAPKGames(query) {
            if (!query.trim()) {
                renderAPKMobileDashboard();
                return;
            }
            
            const filteredGames = allGames.filter(game => 
                game.name.toLowerCase().includes(query.toLowerCase())
            );
            
            const gamesSections = document.querySelector('#apk-gamesSections');
            const noResults = document.querySelector('#apk-noResults');
            
            if (gamesSections && noResults) {
                if (filteredGames.length === 0) {
                    gamesSections.classList.add('hidden');
                    noResults.classList.remove('hidden');
                    return;
                }
                
                noResults.classList.add('hidden');
                gamesSections.classList.remove('hidden');
                
                const allGamesContainer = document.querySelector('#apk-allGames');
                const gameCount = document.querySelector('#apk-gameCount');
                if (allGamesContainer && gameCount) {
                    allGamesContainer.innerHTML = '';
                    filteredGames.forEach(game => {
                        const gameElement = document.createElement('div');
                        gameElement.innerHTML = createMobileGameCard(game);
                        allGamesContainer.appendChild(gameElement.firstElementChild);
                    });
                    gameCount.textContent = `(${filteredGames.length})`;
                    document.querySelector('#apk-gamesSections h2').innerHTML = '🔍 Search Results <span class="ml-2 text-sm font-semibold opacity-60" id="apk-gameCount">('+filteredGames.length+')</span>';
                }
            }
        }

        // Load games from CSV for APK downloader
        async function loadAPKGames() {
            const loadingState = document.querySelector('#apk-loadingState');
            const errorState = document.querySelector('#apk-errorState');
            
            try {
                if (loadingState && errorState) {
                    loadingState.classList.remove('hidden');
                    errorState.classList.add('hidden');
                }
                
                const csvUrl = 'https://docs.google.com/spreadsheets/d/13FHwwwupiISo8xw-SbXmSCMA2kgIj4KZOGKdAvsGge8/export?format=csv';
                const response = await fetch(csvUrl);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const csvText = await response.text();
                allGames = parseAPKCSV(csvText);
                
                renderAPKMobileDashboard();
                
            } catch (error) {
                console.error('Error loading APK games:', error);
                if (loadingState && errorState) {
                    loadingState.classList.add('hidden');
                    errorState.classList.remove('hidden');
                }
            }
        }

        // ✅ ONLINE GAMING TAB FUNCTIONS
        function initializeOnlineGamingTab() {
            loadOnlineGames();
        }

        // Create mobile game card for online gaming matching home style
        function createOnlineMobileGameCard(game) {
            return `
                <div class="item-card">
                    <div class="card-image">
                        ${game.logo ? 
                            `<img src="${game.logo}" alt="${game.name}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                             <div class="fallback-icon" style="display:none;">🎮</div>` : 
                            `<div class="fallback-icon">🎮</div>`
                        }
                    </div>
                    <div class="card-content">
                        <div class="item-title">${game.name}</div>
                    </div>
                </div>
            `;
        }

        // Open game for online gaming
        function openGame(url) {
            if (url && url !== '#') {
                window.open(url, '_blank');
            }
        }

        // Render games in home layout style for online gaming
        function renderOnlineMobileDashboard() {
            const gamesSections = document.querySelector('#online-gamesSections');
            const loadingState = document.querySelector('#online-loadingState');
            
            if (gamesSections && loadingState) {
                loadingState.classList.add('hidden');
                gamesSections.classList.remove('hidden');
                
                const allGamesContainer = document.querySelector('#online-allGames');
                const gameCount = document.querySelector('#online-gameCount');
                if (allGamesContainer && gameCount) {
                    allGamesContainer.innerHTML = '';
                    onlineGames.forEach(game => {
                        const gameElement = document.createElement('div');
                        gameElement.innerHTML = createOnlineMobileGameCard(game);
                        gameElement.firstElementChild.addEventListener('click', () => openGame(game.url));
                        allGamesContainer.appendChild(gameElement.firstElementChild);
                    });
                    gameCount.textContent = `(${onlineGames.length})`;
                }
            }
        }

        // Search functionality for online gaming
        function searchOnlineGames(query) {
            if (!query.trim()) {
                renderOnlineMobileDashboard();
                return;
            }
            
            const filteredGames = onlineGames.filter(game => 
                game.name.toLowerCase().includes(query.toLowerCase())
            );
            
            const gamesSections = document.querySelector('#online-gamesSections');
            const noResults = document.querySelector('#online-noResults');
            
            if (gamesSections && noResults) {
                if (filteredGames.length === 0) {
                    gamesSections.classList.add('hidden');
                    noResults.classList.remove('hidden');
                    return;
                }
                
                noResults.classList.add('hidden');
                gamesSections.classList.remove('hidden');
                
                const allGamesContainer = document.querySelector('#online-allGames');
                const gameCount = document.querySelector('#online-gameCount');
                if (allGamesContainer && gameCount) {
                    allGamesContainer.innerHTML = '';
                    filteredGames.forEach(game => {
                        const gameElement = document.createElement('div');
                        gameElement.innerHTML = createOnlineMobileGameCard(game);
                        gameElement.firstElementChild.addEventListener('click', () => openGame(game.url));
                        allGamesContainer.appendChild(gameElement.firstElementChild);
                    });
                    gameCount.textContent = `(${filteredGames.length})`;
                    document.querySelector('#online-gamesSections h2').innerHTML = '🔍 Search Results <span class="ml-2 text-sm font-semibold opacity-60" id="online-gameCount">('+filteredGames.length+')</span>';
                }
            }
        }

        // Load games from CSV for online gaming
        async function loadOnlineGames() {
            const loadingState = document.querySelector('#online-loadingState');
            const errorState = document.querySelector('#online-errorState');
            
            try {
                if (loadingState && errorState) {
                    loadingState.classList.remove('hidden');
                    errorState.classList.add('hidden');
                }
                
                const csvUrl = 'https://docs.google.com/spreadsheets/d/15p-2dQQ82N5q52A4z2c_CY1JT7to_Fjn9E41hBZrBAc/export?format=csv';
                const response = await fetch(csvUrl);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const csvText = await response.text();
                onlineGames = parseAPKCSV(csvText);
                
                renderOnlineMobileDashboard();
                
            } catch (error) {
                console.error('Error loading online games:', error);
                if (loadingState && errorState) {
                    loadingState.classList.add('hidden');
                    errorState.classList.remove('hidden');
                }
            }
        }

        // ✅ HOME PAGE CAROUSEL SYSTEM - ONLY 3 SLIDES WITH DIFFERENT IMAGES
        function setupCarousel() {
            const slides = document.querySelectorAll('#home-tab .carousel-slide');
            const indicators = document.querySelectorAll('#home-tab .indicator');
            const totalSlides = slides.length;
            
            if (totalSlides === 0) return;
            
            indicators.forEach((indicator, index) => {
                indicator.addEventListener('click', () => {
                    goToSlide(index);
                });
            });
            
            function startCarousel() {
                carouselInterval = setInterval(() => {
                    carouselCurrentSlide = (carouselCurrentSlide + 1) % totalSlides;
                    goToSlide(carouselCurrentSlide);
                }, 4000);
            }
            
            function goToSlide(slideIndex) {
                slides.forEach(slide => slide.classList.remove('active'));
                indicators.forEach(indicator => indicator.classList.remove('active'));
                
                slides[slideIndex].classList.add('active');
                indicators[slideIndex].classList.add('active');
                
                carouselCurrentSlide = slideIndex;
            }
            
            startCarousel();
            
            const carousel = document.querySelector('#home-tab .promotion-carousel');
            if (carousel) {
                carousel.addEventListener('mouseenter', () => {
                    clearInterval(carouselInterval);
                });
                
                carousel.addEventListener('mouseleave', () => {
                    startCarousel();
                });
            }
        }

        function initializeHeaderVisibility() {
            const header = document.querySelector('.new-header');
            const homeTab = document.getElementById('home-tab');
            
            if (homeTab.classList.contains('active')) {
                header.style.display = 'flex';
                header.style.opacity = '1';
                header.style.visibility = 'visible';
            }
        }

        function setupDropdownMenu() {
            const menuBtn = document.getElementById('menu-dots-btn');
            const dropdown = document.getElementById('dropdown-menu');
            
            menuBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                dropdown.classList.toggle('active');
            });
            
            document.addEventListener('click', () => {
                dropdown.classList.remove('active');
            });
            
            dropdown.addEventListener('click', (e) => {
                e.stopPropagation();
            });
        }

        // Android Functions
        window.refreshContent = function() {
            showToast('🔄 Refreshing content...', 2000);
            loadData();
            document.getElementById('dropdown-menu').classList.remove('active');
        }

        window.shareApp = function() {
            if (navigator.share) {
                navigator.share({
                    title: 'AlPlayHub - Ultimate Gaming Platform',
                    text: 'Check out AlPlayHub - thousands of games & apps!',
                    url: 'https://alplayhub.netlify.app/'
                });
            } else {
                const url = 'https://alplayhub.netlify.app/';
                navigator.clipboard.writeText(url).then(() => {
                    showToast('📋 App link copied to clipboard!', 3000);
                });
            }
            document.getElementById('dropdown-menu').classList.remove('active');
        }

        window.downloadApp = function() {
            showToast('🚀 Opening AlPlayHub download page...', 2000);
            setTimeout(() => {
                window.open('https://alplayhub.netlify.app/', '_blank');
            }, 500);
            document.getElementById('dropdown-menu').classList.remove('active');
        }

        window.showAbout = function() {
            showModal('AlPlayHub v2.0\n\nUltimate HTML5 Games & Apps Platform\n\nDeveloped by Mohammed Sharif\n\nFeatures:\n• Instant Gaming\n• Easy Upload\n• Material Design\n• Android Optimized\n• Dynamic Themes\n• Compact Design', '📱 About AlPlayHub');
            document.getElementById('dropdown-menu').classList.remove('active');
        }

        window.openSettings = function() {
            showTab('profile-tab');
            document.getElementById('dropdown-menu').classList.remove('active');
        }

        function setupEngagingFeatures() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.engaging-card, .stat-card, .item-card').forEach(card => {
                observer.observe(card);
            });
        }

        function optimizeForAndroid() {
            document.body.style.webkitUserSelect = 'none';
            document.body.style.userSelect = 'none';
            document.body.style.webkitTouchCallout = 'none';
            document.body.style.webkitTapHighlightColor = 'transparent';
            
            setTimeout(() => {
                window.scrollTo(0, 1);
            }, 100);
        }

        function updateThemeColorImmediate(color) {
            document.getElementById('theme-color-meta').setAttribute('content', color);
            document.getElementById('ms-theme-color').setAttribute('content', color);
        }

        function initializeApp() {
            // Basic initialization
        }

        function setupEventListeners() {
            setupModals();
        }

        function setupSearch() {
            const searchInput = document.querySelector('.search-input');
            let searchTimeout;
            
            searchInput.addEventListener('input', (e) => {
                clearTimeout(searchTimeout);
                const query = e.target.value.toLowerCase().trim();
                searchTimeout = setTimeout(() => {
                    renderItems(allItems, query);
                }, 300);
            });
        }
        
        function setupSideMenu() {
            const hamburgerBtn = document.getElementById('hamburger-menu-btn');
            const sideMenu = document.getElementById('side-menu');
            const overlay = document.getElementById('side-menu-overlay');
            const closeBtn = document.getElementById('side-menu-close-btn');

            hamburgerBtn.addEventListener('click', () => {
                overlay.classList.add('active');
                sideMenu.classList.add('active');
            });

            const closeMenu = () => {
                overlay.classList.remove('active');
                sideMenu.classList.remove('active');
            }
            
            closeBtn.addEventListener('click', closeMenu);
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    closeMenu();
                }
            });
        }
        
        window.closeSideMenu = function() {
            document.getElementById('side-menu-overlay').classList.remove('active');
            document.getElementById('side-menu').classList.remove('active');
        }

        function openExternalPage(page) {
            const pages = {
                'privacy': 'https://alplayhub.netlify.app/privacy-policy',
                'terms': 'https://alplayhub.netlify.app/terms-of-service',
                'about': 'https://alplayhub.netlify.app/about-us',
                'contact': 'https://alplayhub.netlify.app/contact',
                'feedback': 'https://alplayhub.netlify.app/feedback'
            };
            
            if (pages[page]) {
                showToast(`Opening ${page} page...`);
                setTimeout(() => {
                    window.open(pages[page], '_blank');
                }, 500);
            }
        }

        function showTab(tabId) {
            // Close all dropdown menus
            document.querySelectorAll('[id$="Menu"]').forEach(menu => {
                menu.classList.add('hidden');
            });
            
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            
            const newHeader = document.querySelector('.new-header');
            const bottomNav = document.querySelector('.bottom-nav');
            
            // Show main header only for home tab
            if (tabId === 'home-tab') {
                newHeader.style.display = 'flex';
            } else {
                newHeader.style.display = 'none';
            }
            
            // Show/hide tab headers for non-home tabs
            document.querySelectorAll('.tab-header').forEach(header => {
                header.style.display = 'none';
            });
            
            if (tabId !== 'home-tab') {
                const tabHeader = document.querySelector(`#${tabId} .tab-header`);
                if (tabHeader) {
                    tabHeader.style.display = 'flex';
                }
            }
            
            bottomNav.style.display = 'flex';
            
            document.querySelectorAll('.nav-button').forEach(btn => btn.classList.remove('active'));
            const activeNavId = 'nav-' + tabId.replace('-tab', '');
            const activeBtn = document.getElementById(activeNavId);
            if (activeBtn) {
                activeBtn.classList.add('active');
                activeBtn.style.animation = 'scale-in 0.2s ease-out';
            }
            
            const targetScreen = document.querySelector(`#${tabId}`);
            if(targetScreen) targetScreen.scrollTop = 0;
            
            if (tabId === 'developer-tab') {
                loadProjects();
            } else if (tabId === 'upload-tab') {
                loadAPKGames();
                setupAPKCarousel();
            } else if (tabId === 'profile-tab') {
                loadOnlineGames();
                setupOnlineCarousel();
            }
        }

        function filterItems(filter) {
            currentFilter = filter;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-primary', 'text-white');
                if (btn.dataset.filter === filter) {
                    btn.classList.add('active', 'bg-primary', 'text-white');
                }
            });
            renderItems(allItems);
        }

        function setupModals() {
            document.querySelectorAll('.close-modal').forEach(btn => btn.addEventListener('click', (e) => e.target.closest('.modal-backdrop').classList.remove('active')));
            document.querySelectorAll('.modal-backdrop').forEach(modal => modal.addEventListener('click', (e) => { if (e.target === modal) modal.classList.remove('active'); }));
            document.getElementById('modal-ok').addEventListener('click', () => closeModal('custom-modal'));
            document.getElementById('modal-cancel').addEventListener('click', () => closeModal('custom-modal'));
        }

        function showModal(message, title = 'AlPlayHub Notification', isConfirm = false) {
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-message').textContent = message;
            document.getElementById('modal-cancel').classList.toggle('hidden', !isConfirm);
            document.getElementById('custom-modal').classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }
        
        function loadData() {
            if (isLoading) return;
            isLoading = true;
            const container = document.getElementById('categories-container');
            container.innerHTML = '<div class="text-center py-6 w-full"><div class="loading mx-auto mb-3"></div><p class="text-textMuted text-sm">Loading amazing content...</p></div>';
            
            db.ref('items').on('value', snapshot => {
                allItems = [];
                if (snapshot.exists()) {
                    snapshot.forEach(child => {
                        allItems.push({ key: child.key, ...child.val() });
                    });
                    allItems.reverse();
                }
                renderItems(allItems);
                isLoading = false;
            }, (error) => {
                console.error("Firebase Read Failed: " + error.code);
                isLoading = false;
                container.innerHTML = '<div class="text-center py-6 w-full"><p class="text-red-500 text-sm">Failed to load content.</p></div>';
            });
        }
        
        function renderItems(items, searchQuery = '') {
            const mainContainer = document.getElementById('categories-container');
            mainContainer.innerHTML = '';

            let sourceItems = items;
            if (searchQuery) {
                sourceItems = items.filter(item => 
                    item.title.toLowerCase().includes(searchQuery)
                );
            }
            
            const categoriesToShow = currentFilter === 'All' ? ['Game', 'App', 'Tool'] : [currentFilter];
            let itemsFound = false;

            categoriesToShow.forEach(category => {
                const categoryItems = sourceItems.filter(item => item.type === category);

                if (categoryItems.length > 0) {
                    itemsFound = true;
                    
                    const header = document.createElement('h2');
                    header.className = 'text-base font-bold my-2 px-1 text-textDark flex items-center';
                    header.innerHTML = `${getTypeIcon(category)} ${category}s <span class="ml-2 text-sm font-semibold opacity-60">(${categoryItems.length})</span>`;
                    mainContainer.appendChild(header);

                    const scrollContainer = document.createElement('div');
                    scrollContainer.className = 'category-scroll-container';
                    
                    const fragment = document.createDocumentFragment();
                    categoryItems.forEach((item, index) => {
                        const card = createItemCard(item, index);
                        fragment.appendChild(card);
                    });
                    scrollContainer.appendChild(fragment);
                    mainContainer.appendChild(scrollContainer);
                }
            });

            if (!itemsFound) {
                mainContainer.innerHTML = `<div class="text-center py-6 w-full"><h3 class="text-sm font-bold text-textDark">No items found</h3><p class="text-textMuted mt-1 text-sm">Try a different search term</p></div>`;
            }
        }
        
        function createItemCard(item, index = 0) {
            const card = document.createElement('div');
            card.className = 'item-card fade-in';
            
            const imageDiv = document.createElement('div');
            imageDiv.className = 'card-image';
            
            const img = document.createElement('img');
            img.src = item.logo || getPlaceholderImage(item.type, item.title);
            img.alt = `${item.title} - ${item.type}`;
            img.loading = index > 6 ? 'lazy' : 'eager';
            img.onerror = function() {
                this.style.display = 'none';
                const fallback = document.createElement('div');
                fallback.className = 'fallback-icon';
                fallback.innerHTML = getTypeIcon(item.type);
                imageDiv.appendChild(fallback);
            };
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'card-content';
            
            const titleDiv = document.createElement('div');
            titleDiv.className = 'item-title';
            titleDiv.textContent = item.title;
            
            imageDiv.appendChild(img);
            contentDiv.appendChild(titleDiv);
            card.appendChild(imageDiv);
            card.appendChild(contentDiv);
            
            card.addEventListener('click', () => {
                playItem(item);
            });
            
            return card;
        }

        function playItem(item) {
            const playModal = document.getElementById('play-modal');
            const iframe = document.getElementById('play-iframe');
            
            if (item.key) {
                db.ref(`items/${item.key}/playCount`).transaction(current => (current || 0) + 1);
            }
            
            if (item.uploadMethod === 'url' && item.gameUrl) {
                const fullScreenStyle = `
                    <style>
                        html, body { margin: 0 !important; padding: 0 !important; height: 100vh !important; width: 100vw !important; overflow: hidden !important; }
                        iframe { width: 100vw !important; height: 100vh !important; border: none !important; }
                    </style>
                `;
                const iframeHTML = `${fullScreenStyle}<iframe src="${item.gameUrl}" allowfullscreen allow="autoplay; fullscreen; gamepad; microphone; camera"></iframe>`;
                iframe.srcdoc = iframeHTML;
            } else {
                const fullScreenStyle = `
                    <style>
                        html, body { margin: 0 !important; padding: 0 !important; height: 100vh !important; width: 100vw !important; overflow: auto !important; -webkit-overflow-scrolling: touch !important; }
                        * { box-sizing: border-box !important; }
                        body { background: var(--app-bg) !important; }
                    </style>
                `;
                iframe.srcdoc = fullScreenStyle + item.htmlCode;
            }
            
            playModal.style.display = 'block';
            showToast(`🎮 Loading ${item.title}...`, 2000);
        }

        document.getElementById('close-modal-btn').addEventListener('click', () => {
            document.getElementById('play-modal').style.display = 'none';
            document.getElementById('play-iframe').srcdoc = '';
        });
        
        function getTypeIcon(type) {
            return typeIcons[type] || '📄';
        }

        function getPlaceholderImage(type, title) {
            const colors = { 'Game': '2196F3', 'App': '4CAF50', 'Tool': 'FF9800' };
            const color = colors[type] || '9E9E9E';
            const letter = encodeURIComponent(title.charAt(0).toUpperCase());
            return `https://via.placeholder.com/200x200/${color}/ffffff?text=${letter}`;
        }

        function showToast(message, duration = 3000) {
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-16 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg z-50 text-sm font-medium';
            toast.style.backdropFilter = 'blur(8px)';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.transform = 'translateX(-50%) translateY(-3px)';
                toast.style.opacity = '1';
            }, 10);
            
            setTimeout(() => {
                if (document.body.contains(toast)) {
                    document.body.removeChild(toast);
                }
            }, duration);
        }

        // Add search functionality for embedded tabs
        document.addEventListener('DOMContentLoaded', function() {
            const apkSearchInput = document.querySelector('#apk-searchInput');
            if (apkSearchInput) {
                apkSearchInput.addEventListener('input', (e) => {
                    searchAPKGames(e.target.value);
                });
            }

            const onlineSearchInput = document.querySelector('#online-searchInput');
            if (onlineSearchInput) {
                onlineSearchInput.addEventListener('input', (e) => {
                    searchOnlineGames(e.target.value);
                });
            }

            const apkRetryButton = document.querySelector('#apk-retry-button');
            if (apkRetryButton) {
                apkRetryButton.addEventListener('click', loadAPKGames);
            }

            const onlineRetryButton = document.querySelector('#online-retry-button');
            if (onlineRetryButton) {
                onlineRetryButton.addEventListener('click', loadOnlineGames);
            }
        });
    </script>
</body>
</html>
