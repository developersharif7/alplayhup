
<head>
    <meta name="google-site-verification" content="xCJbjjBM7DpMNt7VU2I_xBgccK74XNIepvHXGAh2L48" />
    <meta charset="UTF-8">
    <!-- ✨ Enhanced Android App Support - Native Feel with Status Bar -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="AlPlayHub">
    
    <!-- Android Status Bar Configuration -->
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="mobile-web-app-status-bar-style" content="black-translucent">
    
    <title>AlPlayHub: HTML5 Games & Web Apps | Create, Play & Publish | Free Online Gaming Platform</title>

    <meta name="description" content="AlPlayHub - The ultimate hub for HTML5 games, web apps, and developer tools. Play thousands of free games instantly, upload your own creations, and access powerful tools. Mobile-friendly, no downloads required!">
    
    <!-- Android Enhanced Meta Tags -->
    <link rel="icon" href="https://i.ibb.co/5hsNkn8J/ei-1753297347948-removebg-preview.png">
    <link rel="manifest" href="data:application/json,{&quot;name&quot;:&quot;AlPlayHub&quot;,&quot;short_name&quot;:&quot;AlPlayHub&quot;,&quot;start_url&quot;:&quot;/&quot;,&quot;display&quot;:&quot;standalone&quot;,&quot;background_color&quot;:&quot;#FFFFFF&quot;,&quot;theme_color&quot;:&quot;#FFFFFF&quot;}">
    
    <!-- ✅ DYNAMIC THEME WITH DARK STATUS BAR ICONS -->
    <meta name="theme-color" content="#FFFFFF" id="theme-color-meta">
    <meta name="msapplication-navbutton-color" content="#FFFFFF" id="ms-theme-color">
    <meta name="apple-mobile-web-app-status-bar-style" content="default" id="apple-status-bar">
    <meta name="color-scheme" content="light">
    
    <!-- External Resources -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script>
        // Multiple Theme Configuration
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2196F3',
                        secondary: '#4CAF50',
                        accent: '#FF9800',
                        danger: '#F44336',
                        warning: '#FFC107',
                        success: '#4CAF50',
                        info: '#2196F3',
                        purple: '#9C27B0',
                        indigo: '#3F51B5',
                        pink: '#E91E63',
                        teal: '#009688',
                        lightBg: '#FFFFFF',
                        cardBg: '#FFFFFF',
                        textDark: '#6B7280',
                        textLight: '#FFFFFF',
                        textMuted: '#6B7280',
                        borderColor: '#E5E7EB'
                    },
                    screens: {
                        'xs': '475px',
                    },
                    animation: {
                        'slide-up': 'slideUp 0.2s ease-out',
                        'fade-in': 'fadeIn 0.3s ease-out',
                        'scale-in': 'scaleIn 0.15s ease-out',
                        'pulse-soft': 'pulseSoft 2s ease-in-out infinite',
                        'float': 'float 2s ease-in-out infinite',
                        'rotate': 'rotate 0.3s ease-in-out',
                    },
                    keyframes: {
                        slideUp: {
                            '0%': { transform: 'translateY(8px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        },
                        scaleIn: {
                            '0%': { transform: 'scale(0.95)', opacity: '0' },
                            '100%': { transform: 'scale(1)', opacity: '1' }
                        },
                        pulseSoft: {
                            '0%, 100%': { transform: 'scale(1)', opacity: '1' },
                            '50%': { transform: 'scale(1.02)', opacity: '0.95' }
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-6px)' }
                        },
                        rotate: {
                            '0%': { transform: 'rotate(0deg)' },
                            '100%': { transform: 'rotate(360deg)' }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Import Google Fonts for a clean look */
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        /* ✅ DYNAMIC THEME SYSTEM */
        :root {
            --app-bg: #FFFFFF;
            --card-bg: #FFFFFF;
            --primary-color: #2196F3;
            --secondary-color: #4CAF50;
            --accent-color: #FF9800;
            --danger-color: #F44336;
            --warning-color: #FFC107;
            --success-color: #4CAF50;
            --purple-color: #9C27B0;
            --indigo-color: #3F51B5;
            --pink-color: #E91E63;
            --teal-color: #009688;
            --header-bg: #FFFFFF;
            --nav-bg: #FFFFFF;
            --text-primary: #2196F3;
            --text-secondary: #6B7280;
            --text-on-header: #2196F3;
            --text-on-nav: #2196F3;
            --border-color: #E5E7EB;
            --search-bg: rgba(245, 245, 245, 0.95);
            --search-border: rgba(0, 0, 0, 0.1);
            --search-icon: rgba(0, 0, 0, 0.6);
            --search-placeholder: rgba(0, 0, 0, 0.5);
            --ripple-color: rgba(33, 150, 243, 0.1);
            --elevation-1: 0 1px 1px rgba(0,0,0,0.04);
            --elevation-2: 0 1px 2px rgba(0,0,0,0.06);
            --elevation-3: 0 2px 3px rgba(0,0,0,0.08);
        }

        /* Ocean Theme */
        [data-theme="ocean"] {
            --app-bg: #E3F2FD;
            --card-bg: #FFFFFF;
            --primary-color: #2196F3;
            --secondary-color: #00BCD4;
            --accent-color: #3F51B5;
            --header-bg: #FFFFFF;
            --nav-bg: #FFFFFF;
            --text-primary: #2196F3;
            --text-secondary: #455A64;
            --text-on-header: #2196F3;
            --text-on-nav: #2196F3;
            --border-color: #BBDEFB;
            --search-bg: rgba(227, 242, 253, 0.8);
            --ripple-color: rgba(33, 150, 243, 0.15);
        }

        /* Sunset Theme */
        [data-theme="sunset"] {
            --app-bg: #FFF3E0;
            --card-bg: #FFFFFF;
            --primary-color: #FF5722;
            --secondary-color: #FF9800;
            --accent-color: #E91E63;
            --header-bg: #FFFFFF;
            --nav-bg: #FFFFFF;
            --text-primary: #FF5722;
            --text-secondary: #BF360C;
            --text-on-header: #FF5722;
            --text-on-nav: #FF5722;
            --border-color: #FFCCBC;
            --search-bg: rgba(255, 243, 224, 0.8);
            --ripple-color: rgba(255, 87, 34, 0.15);
        }
        /* ✅ FIXED: Dark Theme with Proper Colors for Developer Page */
        [data-theme="dark"] {
            --app-bg: #000000;
            --card-bg: #1A1A1A;
            --primary-color: #BB86FC;
            --secondary-color: #03DAC6;
            --accent-color: #CF6679;
            --header-bg: #1A1A1A;
            --nav-bg: #1A1A1A;
            --text-primary: #FFFFFF;
            --text-secondary: #B3B3B3;
            --text-on-header: #FFFFFF;
            --text-on-nav: #FFFFFF;
            --border-color: #333333;
            --search-bg: rgba(26, 26, 26, 0.95);
            --search-border: rgba(255, 255, 255, 0.2);
            --search-icon: rgba(255, 255, 255, 0.7);
            --search-placeholder: rgba(255, 255, 255, 0.5);
            --ripple-color: rgba(187, 134, 252, 0.15);
            --elevation-1: 0 1px 1px rgba(255,255,255,0.04);
            --elevation-2: 0 1px 2px rgba(255,255,255,0.06);
            --elevation-3: 0 2px 3px rgba(255,255,255,0.08);
        }

        /* Apply theme variables to elements */
        body {
            background: var(--app-bg);
            color: var(--text-primary);
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            transition: all 0.3s ease;
        }

        /* ✅ ANDROID OPTIMIZED: Ultra-Compact Layout */
        .app-container {
            min-height: 100vh;
            background: var(--app-bg);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        /* ✅ ANDROID STATUS BAR FRIENDLY: Header with proper top spacing */
        .new-header {
            position: fixed;
            top: env(safe-area-inset-top, 0px);
            left: 0;
            right: 0;
            z-index: 50;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 6px;
            background: var(--header-bg);
            color: var(--text-on-header);
            border-bottom: 1px solid var(--border-color);
            padding: 6px 8px;
            height: 42px;
            backdrop-filter: blur(10px);
            box-shadow: var(--elevation-1);
            transition: all 0.3s ease;
        }

        .hamburger-btn {
            background: transparent;
            border: none;
            font-size: 16px;
            cursor: pointer;
            padding: 6px;
            border-radius: 50%;
            transition: all 0.15s ease;
            color: var(--primary-color);
            width: 34px;
            height: 34px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 2px;
        }

        .hamburger-btn:active {
            transform: scale(0.95);
            background: var(--ripple-color);
        }

        /* Ultra-Compact Search */
        .search-bar-container {
            flex-grow: 1;
            display: flex;
            align-items: center;
            background: var(--search-bg);
            border-radius: 18px;
            padding: 0 12px;
            height: 28px;
            border: 1px solid var(--search-border);
            transition: all 0.15s ease;
            margin: 0;
            box-shadow: var(--elevation-1);
        }
        
        .search-bar-container:focus-within {
            background: var(--card-bg);
            transform: translateY(-1px);
            box-shadow: var(--elevation-2);
            border-color: var(--primary-color);
        }

        .search-bar-container i {
            color: var(--search-icon);
            font-size: 12px;
            margin-right: 10px;
            flex-shrink: 0;
        }

        .search-input {
            width: 100%;
            background: transparent;
            border: none;
            outline: none;
            font-size: 13px;
            color: var(--text-primary) !important;
            font-weight: 400;
        }

        .search-input::placeholder {
            color: var(--search-placeholder) !important;
            font-size: 12px;
            font-weight: 400;
        }

        /* Theme Selector Button */
        .theme-selector {
            background: transparent;
            border: none;
            font-size: 16px;
            cursor: pointer;
            padding: 6px;
            border-radius: 50%;
            transition: all 0.15s ease;
            color: var(--primary-color);
            width: 34px;
            height: 34px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 2px;
        }

        .theme-selector:active {
            transform: scale(0.95);
            background: var(--ripple-color);
        }

        .theme-selector.rotating {
            animation: rotate 0.3s ease-in-out;
        }

        /* Android Three-Dot Menu - Colorful */
        .menu-dots {
            background: transparent;
            border: none;
            font-size: 16px;
            cursor: pointer;
            padding: 6px;
            border-radius: 50%;
            transition: all 0.15s ease;
            color: var(--accent-color);
            width: 34px;
            height: 34px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 2px;
        }

        .menu-dots:active {
            transform: scale(0.95);
            background: var(--ripple-color);
        }

        /* Dropdown Menu - Ultra-Compact */
        .dropdown-menu {
            position: absolute;
            top: 46px;
            right: 8px;
            background: var(--card-bg);
            border-radius: 6px;
            box-shadow: var(--elevation-2);
            z-index: 100;
            min-width: 140px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-6px);
            transition: all 0.15s ease;
            border: 1px solid var(--border-color);
        }

        .dropdown-menu.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            padding: 8px 10px;
            color: var(--text-primary);
            text-decoration: none;
            font-size: 12px;
            transition: background-color 0.15s;
            cursor: pointer;
        }

        .dropdown-item:hover {
            background: var(--ripple-color);
        }

        .dropdown-item i {
            width: 18px;
            margin-right: 8px;
            text-align: center;
            font-size: 11px;
        }

        /* Colorful Icon Colors */
        .dropdown-item:nth-child(1) i { color: var(--success-color); }
        .dropdown-item:nth-child(2) i { color: var(--primary-color); }
        .dropdown-item:nth-child(3) i { color: var(--warning-color); }
        .dropdown-item:nth-child(4) i { color: var(--danger-color); }
        .dropdown-item:nth-child(5) i { color: var(--indigo-color); }
        .dropdown-item:nth-child(6) i { color: var(--teal-color); }
        .dropdown-item:nth-child(7) i { color: var(--purple-color); }

        /* ✅ RESTORED: Original Promotion Carousel - Slightly More Square */
        .promotion-carousel {
            width: 100%;
            height: 140px;
            margin: 0 0 12px 0;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            box-shadow: var(--elevation-1);
        }

        .carousel-container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .carousel-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.6s ease-in-out;
            z-index: 1;
        }

        .carousel-slide.active {
            opacity: 1;
            z-index: 2;
        }

        .carousel-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        }

        /* ✅ FAST LOADING: Instant image loading */
        .carousel-slide {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        }

        .carousel-slide img {
            opacity: 1;
            transition: opacity 0.3s ease;
        }

        .carousel-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.7));
            color: white;
            padding: 10px 12px;
            text-align: left;
        }

        .carousel-title {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 2px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        .carousel-subtitle {
            font-size: 11px;
            opacity: 0.9;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        .carousel-indicators {
            position: absolute;
            bottom: 8px;
            right: 12px;
            display: flex;
            gap: 4px;
            z-index: 3;
        }

        .indicator {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .indicator.active {
            background: white;
            transform: scale(1.2);
        }

        /* Ultra-Compact Screen Layout */
        .screen {
            height: 100vh;
            overflow-y: auto;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: contain;
            scroll-behavior: smooth;
            position: relative;
        }

        /* ✅ ANDROID STATUS BAR OPTIMIZED: Proper padding for status bar */
        .screen-content {
            padding: 8px 12px;
            min-height: 100vh;
            max-width: 100%;
            margin: 0 auto;
            padding-top: calc(50px + env(safe-area-inset-top, 0px));
            padding-bottom: calc(64px + env(safe-area-inset-bottom, 0px));
            box-sizing: border-box;
        }

        /* Ultra-Compact Bottom Navigation */
        .bottom-nav {
            height: 50px;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-around;
            align-items: center;
            z-index: 100;
            background: var(--nav-bg);
            border-top: 1px solid var(--border-color);
            padding: 3px 0;
            box-shadow: 0 -1px 2px rgba(0,0,0,0.04);
            transition: all 0.3s ease;
        }

        /* Ultra-Compact Navigation with Colorful Icons */
        .nav-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 56px;
            height: 42px;
            border-radius: 10px;
            transition: all 0.2s ease;
            position: relative;
            cursor: pointer;
            color: var(--text-on-nav);
            overflow: hidden;
        }

        .nav-button:active {
            transform: scale(0.95);
        }

        .nav-button.active {
            background: var(--ripple-color);
            transform: translateY(-1px);
        }

        .nav-button.active::after {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 16px;
            height: 2px;
            background: var(--primary-color);
            border-radius: 0 0 2px 2px;
        }

        .nav-icon {
            font-size: 14px;
            margin-bottom: 1px;
            z-index: 1;
        }

        .nav-label {
            font-size: 8px;
            font-weight: 600;
            z-index: 1;
        }

        /* Colorful Nav Icons */
        #nav-home .nav-icon { color: var(--primary-color); }
        #nav-home .nav-label { color: var(--primary-color); }
        
        #nav-developer .nav-icon { color: var(--success-color); }
        #nav-developer .nav-label { color: var(--success-color); }
        
        #nav-upload .nav-icon { color: var(--warning-color); }
        #nav-upload .nav-label { color: var(--warning-color); }
        
        #nav-profile .nav-icon { color: var(--purple-color); }
        #nav-profile .nav-label { color: var(--purple-color); }
        
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }

        /* Ultra-Compact Side Menu */
        .side-menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(2px);
            z-index: 1100;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s ease, visibility 0.2s;
        }

        .side-menu-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .side-menu {
            position: fixed;
            top: 0;
            left: -240px;
            width: 220px;
            height: 100%;
            background-color: var(--card-bg);
            z-index: 1200;
            transition: left 0.25s ease;
            display: flex;
            flex-direction: column;
            padding: 16px;
            box-shadow: var(--elevation-2);
            border-right: 1px solid var(--border-color);
        }

        .side-menu.active {
            left: 0;
        }
        
        .side-menu-header {
            color: var(--primary-color);
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .side-menu-item {
            display: flex;
            align-items: center;
            color: var(--text-primary);
            padding: 10px 0;
            font-size: 13px;
            text-decoration: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.15s ease;
            margin: 1px 0;
        }
        
        .side-menu-item:hover {
            color: var(--primary-color);
            background: var(--ripple-color);
        }

        .side-menu-item i {
            width: 24px;
            margin-right: 10px;
            text-align: center;
            font-size: 12px;
        }

        /* Colorful Side Menu Icons */
        .side-menu-item:nth-child(1) i { color: var(--primary-color); }
        .side-menu-item:nth-child(2) i { color: var(--success-color); }
        .side-menu-item:nth-child(3) i { color: var(--warning-color); }
        .side-menu-item:nth-child(4) i { color: var(--teal-color); }
        .side-menu-item:nth-child(5) i { color: var(--purple-color); }
        .side-menu-item:nth-child(6) i { color: var(--pink-color); }
        .side-menu-item:nth-child(7) i { color: var(--indigo-color); }
        .side-menu-item:nth-child(8) i { color: var(--danger-color); }
        
        .side-menu-close-btn {
            margin-top: auto;
            width: 100%;
            padding: 10px;
            background-color: var(--primary-color);
            color: #FFFFFF;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.15s ease;
            box-shadow: var(--elevation-1);
        }
        
        .side-menu-close-btn:hover {
            box-shadow: var(--elevation-2);
            transform: translateY(-1px);
        }

        .side-menu-close-btn:active {
            transform: translateY(0);
        }

        /* ✅ IMPROVED: Better Card Design with Dark Theme Support */
        .stat-card, .developer-card {
            background: var(--card-bg) !important;
            border: 1px solid var(--border-color) !important;
            color: var(--text-primary) !important;
            box-shadow: var(--elevation-1) !important;
            transition: all 0.15s ease;
        }

        .stat-card:hover, .developer-card:hover {
            box-shadow: var(--elevation-2) !important;
            transform: scale(1.02);
        }

        .bg-white {
            background: var(--card-bg) !important;
            border: 1px solid var(--border-color) !important;
            box-shadow: var(--elevation-1) !important;
        }

        .bg-primary {
            background: var(--primary-color) !important;
            color: #FFFFFF !important;
            box-shadow: none !important;
        }

        .text-primary {
            color: var(--primary-color) !important;
        }

        .text-textDark, .text-gray-900 {
            color: var(--text-primary) !important;
        }

        .text-textMuted, .text-gray-600, .text-gray-500 {
            color: var(--text-secondary) !important;
        }

        /* Enhanced Profile Header - Compact Version */
        .profile-header {
            padding: 6px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 8px;
            margin-bottom: 4px;
            min-height: 50px;
            display: flex;
            align-items: center;
            position: relative;
            overflow: hidden;
            color: white;
        }

        .profile-header::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 20px;
            height: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            transform: translate(8px, -8px);
        }

        .profile-info {
            color: white;
            display: flex;
            align-items: center;
            gap: 4px;
            flex-direction: row;
            flex: 1;
            justify-content: space-between;
            text-align: left;
        }

        .profile-info h1 {
            font-size: 12px;
            font-weight: 700;
            margin-bottom: 1px;
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }

        .profile-info p {
            color: rgba(255,255,255,0.85);
            margin-bottom: 0;
            font-size: 9px;
        }

        /* ✅ FIXED: Home Page 3-Column Grid Layout for Categories */
        .category-scroll-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            padding: 4px;
            justify-items: center;
            max-width: 100%;
        }

        /* ✅ IMPROVED: Better Item Cards with Fixed Grid Layout */
        .item-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: all 0.15s ease;
            position: relative;
            background: transparent !important;
            border: none !important;
            padding: 0;
            width: 100%;
            max-width: 95px;
            flex-shrink: 0;
            margin: 0 auto;
        }

        .item-card:hover { 
            transform: scale(1.05);
        }

        .item-card:active {
            transform: scale(0.95);
        }

        .item-card .card-image {
            width: 76px;
            height: 76px;
            border-radius: 16px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--card-bg);
            box-shadow: var(--elevation-1);
            margin-bottom: 6px;
            position: relative;
            transition: all 0.15s ease;
            border: 1px solid var(--border-color);
        }

        .item-card:hover .card-image {
            box-shadow: var(--elevation-2);
        }

        .item-card img {
            width: 100%; 
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .item-card .fallback-icon {
            font-size: 24px;
            color: var(--primary-color);
        }

        .item-card .card-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            width: 100%;
        }

        .item-card .item-title {
            font-size: 11px;
            font-weight: 500;
            color: var(--text-primary);
            line-height: 1.2;
            width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            margin-bottom: 1px;
            text-align: center;
        }

        /* ✅ PLAY BUTTON FOR ONLINE GAMES */
        .play-button {
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 7px 7px;
            font-size: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 2px;
            width: 90%;
            justify-content: center;
        }

        .play-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .play-button:active {
            transform: translateY(0);
        }
        
        /* ✅ FIXED: Proper 3-Column Grid Layout for APK Games */
        .apk-games-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            padding: 4px;
            justify-items: center;
            max-width: 100%;
        }

        .apk-game-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: all 0.15s ease;
            position: relative;
            background: transparent !important;
            border: none !important;
            padding: 0;
            width: 100%;
            max-width: 95px;
            flex-shrink: 0;
        }

        .apk-game-card:hover {
            transform: scale(1.05);
        }

        .apk-game-card:active {
            transform: scale(0.95);
        }

        .apk-game-card .game-image {
            width: 76px;
            height: 76px;
            border-radius: 16px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--card-bg);
            margin-bottom: 6px;
            position: relative;
            transition: all 0.15s ease;
            border: 1px solid var(--border-color);
            box-shadow: var(--elevation-1);
        }

        .apk-game-card:hover .game-image {
            box-shadow: var(--elevation-2);
        }

        .apk-game-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .apk-game-card .fallback-icon {
            font-size: 24px;
            color: var(--primary-color);
        }

        .apk-game-card .game-title {
            font-size: 11px;
            font-weight: 500;
            color: var(--text-primary);
            line-height: 1.2;
            width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            margin-bottom: 4px;
            text-align: center;
        }

        /* ✅ IMPROVED: Online Games Grid Layout */
        .online-games-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            padding: 4px;
            justify-items: center;
            max-width: 100%;
        }

        .online-game-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: all 0.15s ease;
            position: relative;
            background: transparent !important;
            border: none !important;
            padding: 0;
            width: 100%;
            max-width: 95px;
            flex-shrink: 0;
        }

        .online-game-card:hover {
            transform: scale(1.05);
        }

        .online-game-card:active {
            transform: scale(0.95);
        }

        .online-game-card .game-image {
            width: 76px;
            height: 76px;
            border-radius: 16px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--card-bg);
            margin-bottom: 6px;
            position: relative;
            transition: all 0.15s ease;
            border: 1px solid var(--border-color);
            box-shadow: var(--elevation-1);
        }

        .online-game-card:hover .game-image {
            box-shadow: var(--elevation-2);
        }

        .online-game-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .online-game-card .fallback-icon {
            font-size: 24px;
            color: var(--primary-color);
        }

        .online-game-card .game-title {
            font-size: 10px;
            font-weight: 500;
            color: var(--text-primary);
            line-height: 1.2;
            width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            margin-bottom: 4px;
            text-align: center;
        }

        /* ✅ ULTRA-COMPACT: Stats Cards */
        .stat-card {
            padding: 6px 4px;
            text-align: center;
            transition: all 0.15s ease;
            background: var(--card-bg);
            border-radius: 6px;
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }

        .stat-card:hover {
            transform: translateY(-1px) scale(1.02);
            box-shadow: var(--elevation-2);
        }

        .stat-number { 
            font-size: 14px;
            font-weight: 800; 
            color: var(--primary-color);
            display: block;
            line-height: 1;
        }

        .stat-label { 
            font-size: 8px;
            color: var(--text-secondary); 
            margin-top: 2px;
            font-weight: 600;
            display: block;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        /* Ultra-Compact Filter Buttons with Colorful Icons */
        .filter-btn {
            transition: all 0.15s ease;
            color: var(--text-primary);
            border: 1px solid var(--border-color);
            box-shadow: var(--elevation-1);
            background: var(--card-bg);
        }
        
        .filter-btn.active {
            background: var(--primary-color) !important;
            color: #FFFFFF !important;
            box-shadow: var(--elevation-1);
            border-color: var(--primary-color);
            transform: translateY(-1px);
        }

        .filter-btn i {
            color: var(--primary-color);
        }

        .filter-btn.active i {
            color: #FFFFFF;
        }

        /* Filter button specific colors */
        .filter-btn[data-filter="All"] i { color: var(--primary-color); }
        .filter-btn[data-filter="Game"] i { color: var(--success-color); }
        .filter-btn[data-filter="App"] i { color: var(--warning-color); }
        .filter-btn[data-filter="Tool"] i { color: var(--purple-color); }

        /* Ultra-Compact Play Modal */
        #play-modal {
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 0; 
            height: 100vh;
            background: var(--app-bg); 
            z-index: 2000; 
            display: none;
        }

        #play-modal iframe { 
            width: 100vw; 
            height: 100vh;
            border: none; 
            overflow: auto;
            -webkit-overflow-scrolling: touch;
            background: var(--app-bg);
        }

        #close-modal-btn {
            position: fixed;
            top: 10px;
            right: 10px;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            color: var(--danger-color); 
            border: 1px solid var(--border-color); 
            border-radius: 50%; 
            width: 36px; 
            height: 36px;
            font-size: 14px; 
            cursor: pointer; 
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2001;
            box-shadow: var(--elevation-1);
        }

        #close-modal-btn:hover {
            background: var(--ripple-color);
            transform: scale(1.05);
            box-shadow: var(--elevation-2);
        }

        #close-modal-btn:active {
            transform: scale(0.95);
        }

        /* Ultra-Compact Custom Modal */
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(4px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
        }
        .modal-backdrop.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            width: 90%;
            max-width: 400px;
            max-height: 85vh;
            overflow-y: auto;
            background: var(--card-bg);
            border-radius: 12px;
            transform: scale(0.95);
            transition: transform 0.2s ease;
            color: var(--text-primary);
            box-shadow: var(--elevation-2);
            border: 1px solid var(--border-color);
        }
        .modal-backdrop.active .modal-content {
            transform: scale(1);
        }

        /* ✅ UPLOAD MODAL STYLES */
        .upload-method-btn {
            cursor: pointer;
            transition: all 0.2s ease;
            background: var(--card-bg);
            color: var(--text-primary);
        }

        .upload-method-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .upload-method-btn.border-blue-500 {
            border-color: var(--primary-color) !important;
            background: var(--ripple-color) !important;
        }

        /* ✅ ENHANCED UPLOAD ICON WITH ANIMATION */
        .upload-icon {
            animation: float 2s ease-in-out infinite;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--elevation-2);
            transition: all 0.3s ease;
        }

        .upload-icon:hover {
            transform: scale(1.1) translateY(-2px);
            box-shadow: var(--elevation-3);
        }

        /* Action Icon Buttons for Online Tab - YouTube Theme */
        .action-icon {
            color: white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--elevation-2);
            transition: all 0.3s ease;
            cursor: pointer;
            animation: float 2s ease-in-out infinite;
        }

        .action-icon:hover {
            transform: scale(1.1) translateY(-2px);
            box-shadow: var(--elevation-3);
        }

        .action-icon.youtube-tools {
            background: linear-gradient(135deg, #FF0000, #CC0000);
        }

        .action-icon.creator-tools {
            background: linear-gradient(135deg, #FF4081, #E91E63);
        }

        .action-icon.store {
            background: linear-gradient(135deg, var(--teal-color), var(--success-color));
        }

        .action-icon.crypto {
            background: linear-gradient(135deg, #FF9800, #E91E63);
        }

        .action-icon.explore {
            background: linear-gradient(135deg, var(--indigo-color), var(--primary-color));
        }

        /* ✅ IMPROVED APK DOWNLOAD BUTTON STYLES WITH FREE HTML MESSAGE */
        .apk-download-btn {
            background: var(--success-color);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 6px 8px;
            font-size: 8px;
            font-weight: 1000;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            margin-top: 10px;
            width: 80%;
            justify-content: center;
        }

        .apk-download-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .apk-download-btn:active {
            transform: translateY(0);
        }

        /* APK Page Enhancement */
        .apk-free-notice {
            background: linear-gradient(135deg, var(--success-color), var(--teal-color));
            color: white;
            padding: 5px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 10px;
            box-shadow: var(--elevation-2);
        }

        .apk-free-notice h3 {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .apk-free-notice p {
            font-size: 11px;
            opacity: 0.9;
            margin: 0;
        }

        /* Logo Preview Styles */
        .logo-preview-container {
            transition: all 0.3s ease;
        }

        .logo-preview-success {
            background: #f0f9ff;
            border-color: var(--primary-color);
        }

        .logo-preview-error {
            background: #fef2f2;
            border-color: #ef4444;
        }

        /* Upload Progress Toast */
        .upload-toast {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--card-bg);
            color: var(--text-primary);
            padding: 12px 20px;
            border-radius: 25px;
            box-shadow: var(--elevation-2);
            border: 1px solid var(--border-color);
            z-index: 1001;
            font-size: 14px;
            font-weight: 500;
            backdrop-filter: blur(10px);
        }

        /* Ultra-Compact Scrollbar */
        ::-webkit-scrollbar {
            width: 1px;
            height: 1px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 1px;
        }

        /* Ultra-compact animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(8px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .fade-in {
            animation: fadeInUp 0.4s ease forwards;
        }

        .slide-in {
            animation: slideInUp 0.2s ease-out forwards;
        }

        /* Mobile frame styles for embedded content - Match Home Layout */
        .mobile-frame {
            max-width: 100%;
            margin: 0 auto;
            background: var(--app-bg);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        
        .header-bg {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        }
        
        .game-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .game-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 12px;
        }
        
        .section-title {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 16px;
            margin: 24px 0 16px 0;
        }
        
        .money-tab {
            background: var(--primary-color);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .money-tab.active {
            background: var(--secondary-color);
        }

        /* Additional project card styles */
        .project-card {
            transition: all 0.3s ease;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
        }
        .project-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .loader {
            border: 3px solid var(--border-color);
            border-left: 3px solid var(--primary-color);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Policy modal styling */
        .policy-modal {
            max-height: 70vh;
            overflow-y: auto;
        }

        .policy-section {
            margin-bottom: 16px;
            padding: 12px;
            background: var(--card-bg);
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
            border: 1px solid var(--border-color);
        }

        /* ✅ FIXED: Developer Tab Specific Styles for Dark Theme */
        .bg-gray-50 {
            background: var(--app-bg) !important;
        }
        
        .bg-gray-100, .hover\\:bg-gray-200:hover {
            background: var(--card-bg) !important;
        }
        
        .border-gray-200 {
            border-color: var(--border-color) !important;
        }
        
        .text-gray-700 {
            color: var(--text-primary) !important;
        }

        /* Responsive optimizations */
        @media (max-width: 768px) {
            .developer-card {
                flex-direction: column;
                text-align: center;
            }
            
            .developer-avatar {
                margin-right: 0;
                margin-bottom: 10px;
            }
            
            .developer-info {
                text-align: center;
            }
        }

        /* ✅ SHARED LAYOUT STYLES - All tabs follow home layout */
        .tab-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 50;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 6px;
            background: var(--header-bg);
            color: var(--text-on-header);
            border-bottom: 1px solid var(--border-color);
            padding: 6px 8px;
            height: 42px;
            backdrop-filter: blur(10px);
            box-shadow: var(--elevation-1);
            transition: all 0.3s ease;
        }

        .tab-title {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-on-header);
            text-align: center;
            flex: 1;
        }

        .tab-action-btn {
            background: transparent;
            border: none;
            font-size: 16px;
            cursor: pointer;
            padding: 6px;
            border-radius: 50%;
            transition: all 0.15s ease;
            color: var(--text-on-header);
            width: 34px;
            height: 34px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .tab-action-btn:active {
            transform: scale(0.95);
            background: var(--ripple-color);
        }

        .tab-action-btn.primary {
            background: var(--primary-color);
            color: #FFFFFF;
        }

        .tab-action-btn.primary:active {
            background: var(--secondary-color);
        }

        /* Theme transition animations */
        * {
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }

        /* ✅ ENHANCED CHAT SYSTEM STYLES */
        #chat-system {
            display: none;
        }

        #chat-system.show-chat {
            display: block;
        }

        /* Floating Chat Button */
        #chat-toggle {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background: var(--primary-color);
            color: #fff;
            border: none;
            border-radius: 15px;
            width: 60px;
            height: 60px;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            z-index: 999;
        }

        #chat-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.4);
        }

        /* User Name Input Modal */
        .username-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(4px);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .username-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .username-modal-content {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 24px;
            width: 90%;
            max-width: 320px;
            text-align: center;
            box-shadow: var(--elevation-3);
            border: 1px solid var(--border-color);
        }

        .username-input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            margin: 16px 0;
            outline: none;
            transition: border-color 0.3s ease;
            background: var(--card-bg);
            color: var(--text-primary);
        }

        .username-input:focus {
            border-color: var(--primary-color);
        }

        .username-submit {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .username-submit:hover {
            background: var(--secondary-color);
            transform: translateY(-1px);
        }

        /* Notification Badge */
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4757;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 11px;
            font-weight: bold;
            display: none;
            align-items: center;
            justify-content: center;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Chat Box */
        #chat-box-container {
            position: fixed;
            bottom: 150px;
            right: 20px;
            width: 320px;
            height: 450px;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            display: none;
            flex-direction: column;
            overflow: hidden;
            z-index: 998;
        }

        #chat-header {
            background: var(--primary-color);
            color: white;
            padding: 12px;
            font-weight: bold;
            text-align: center;
            position: relative;
        }

        #close-chat {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #close-chat:hover {
            background: rgba(255,255,255,0.2);
        }

        #chat-box {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            background: var(--app-bg);
        }

        .msg {
            margin: 8px 0;
            padding: 10px 12px;
            border-radius: 8px;
            display: inline-block;
            max-width: 70%;
            position: relative;
            word-wrap: break-word;
            clear: both;
        }

        .user { 
            background: #d1ffd1; 
            float: right; 
            margin-left: 30%;
        }
        
        .admin { 
            background: #d1e0ff; 
            float: left; 
            margin-right: 30%;
        }

        .welcome-msg {
            background: #e3f2fd;
            color: #1565c0;
            text-align: center;
            margin: 10px auto;
            float: none !important;
            max-width: 90%;
            border: 1px solid #bbdefb;
        }

        .timestamp {
            font-size: 10px;
            opacity: 0.7;
            margin-top: 5px;
            display: block;
        }

        /* Delete Icon */
        .delete-btn {
            position: absolute;
            top: -5px;
            right: -5px;
            background: red;
            color: white;
            border: none;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 12px;
            cursor: pointer;
            display: none;
        }
        .msg:hover .delete-btn { display: block; }

        #input-area {
            display: flex;
            border-top: 1px solid var(--border-color);
            padding: 8px;
            background: var(--card-bg);
        }
        
        #msg {
            flex: 1;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            outline: none;
            margin-right: 8px;
            font-size: 14px;
            background: var(--card-bg);
            color: var(--text-primary);
        }
        
        #send {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 20px;
            font-weight: bold;
        }
        
        #send:hover {
            background: var(--secondary-color);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Ultra-Compact Header with Theme Selector and Android Three-Dot Menu -->
        <div class="new-header">
            <button id="hamburger-menu-btn" class="hamburger-btn">
                <i class="fas fa-bars"></i>
            </button>
            <div class="search-bar-container">
                <i class="fas fa-search"></i>
                <input type="text" class="search-input" placeholder="Search games & apps...">
            </div>
            <button id="theme-selector-btn" class="theme-selector">
                <i class="fas fa-palette"></i>
            </button>
            <button id="menu-dots-btn" class="menu-dots">
                <i class="fas fa-ellipsis-v"></i>
            </button>
            <!-- Dropdown Menu -->
            <div id="dropdown-menu" class="dropdown-menu">
                <a class="dropdown-item" onclick="refreshContent()">
                    <i class="fas fa-sync-alt"></i>
                    <span>Refresh</span>
                </a>
                <a class="dropdown-item" onclick="shareApp()">
                    <i class="fas fa-share"></i>
                    <span>Share App</span>
                </a>
                <a class="dropdown-item" onclick="downloadApp()">
                    <i class="fas fa-download"></i>
                    <span>Get App</span>
                </a>
                <a class="dropdown-item" onclick="redirectToAlPlayHub()">
                    <i class="fas fa-external-link-alt"></i>
                    <span>Website</span>
                </a>
                <a class="dropdown-item" onclick="showAbout()">
                    <i class="fas fa-info-circle"></i>
                    <span>About</span>
                </a>
                <a class="dropdown-item" onclick="openSettings()">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </div>
        </div>
        
        <!-- Side Menu -->
        <div id="side-menu-overlay" class="side-menu-overlay">
            <div id="side-menu" class="side-menu">
                <div class="side-menu-header">
                    <i class="fas fa-gamepad"></i>
                    AlPlayHub Menu
                </div>
                
                <a class="side-menu-item" onclick="showTab('home-tab'); closeSideMenu();">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </a>
                <a class="side-menu-item" onclick="openExternalPage('privacy'); closeSideMenu();">
                    <i class="fas fa-shield-alt"></i>
                    <span>Privacy Policy</span>
                </a>
                <a class="side-menu-item" onclick="openExternalPage('terms'); closeSideMenu();">
                    <i class="fas fa-file-contract"></i>
                    <span>Terms of Service</span>
                </a>
                <a class="side-menu-item" onclick="openExternalPage('about'); closeSideMenu();">
                    <i class="fas fa-info-circle"></i>
                    <span>About Us</span>
                </a>
                <a class="side-menu-item" onclick="openExternalPage('contact'); closeSideMenu();">
                    <i class="fas fa-envelope"></i>
                    <span>Contact</span>
                </a>
                <a class="side-menu-item" onclick="openExternalPage('feedback'); closeSideMenu();">
                    <i class="fas fa-comment"></i>
                    <span>Feedback</span>
                </a>
                <a class="side-menu-item" onclick="showTab('developer-tab'); closeSideMenu();">
                    <i class="fas fa-code"></i>
                    <span>Developer Info</span>
                </a>
                <button id="side-menu-close-btn" class="side-menu-close-btn">
                    <i class="fas fa-times mr-2"></i>Close
                </button>
            </div>
        </div>

        <!-- Main App -->
        <div id="main-app">
            <!-- Home Tab -->
            <div id="home-tab" class="tab-content active screen">
                <div class="screen-content">
                    <!-- ✅ HOME PAGE: Promotion Carousel - 3 Slides -->
                    <div class="promotion-carousel">
                        <div class="carousel-container" id="carousel-container">
                            <div class="carousel-slide active">
                                <img src="https://i.ibb.co/qYxJxDNF/Untitled-design-20250827-041333-0000.png" alt="Gaming Hub" class="carousel-image" loading="eager" onload="this.style.opacity=1" style="opacity:0;transition:opacity 0.3s">
                                <div class="carousel-overlay">
                                    <h3 class="carousel-title">🎮 Gaming Hub</h3>
                                    <p class="carousel-subtitle">Play instant games</p>
                                </div>
                            </div>
                            <div class="carousel-slide">
                                <img src="https://i.ibb.co/VY9c7F0X/a0-fgraphic.jpg" alt="App Center" class="carousel-image" loading="eager" onload="this.style.opacity=1" style="opacity:0;transition:opacity 0.3s">
                                <div class="carousel-overlay">
                                    <h3 class="carousel-title">📱 App Center</h3>
                                    <p class="carousel-subtitle">Discover amazing apps</p>
                                </div>
                            </div>
                            <div class="carousel-slide">
                                <img src="https://i.ibb.co/1fCXYQS9/developer-background-images.png" alt="Developer Tools" class="carousel-image" loading="eager" onload="this.style.opacity=1" style="opacity:0;transition:opacity 0.3s">
                                <div class="carousel-overlay">
                                    <h3 class="carousel-title">🔧 Dev Tools</h3>
                                    <p class="carousel-subtitle">Create & publish</p>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-indicators" id="carousel-indicators">
                            <span class="indicator active" data-slide="0"></span>
                            <span class="indicator" data-slide="1"></span>
                            <span class="indicator" data-slide="2"></span>
                        </div>
                    </div>
                    
                    <!-- Ultra-Compact Filter Buttons with Better Center Alignment -->
                    <div class="flex justify-center gap-2 mb-4">
                        <button class="filter-btn px-3 py-2 rounded-full text-xs active font-medium bg-primary text-white" data-filter="All" onclick="filterItems('All')">
                            <i class="fas fa-th-large mr-1"></i>All
                        </button>
                        <button class="filter-btn px-3 py-2 rounded-full text-xs font-medium" data-filter="Game" onclick="filterItems('Game')">
                            <i class="fas fa-gamepad mr-1"></i>Games
                        </button>
                        <button class="filter-btn px-3 py-2 rounded-full text-xs font-medium" data-filter="App" onclick="filterItems('App')">
                            <i class="fas fa-mobile-alt mr-1"></i>Apps
                        </button>
                        <button class="filter-btn px-3 py-2 rounded-full text-xs font-medium" data-filter="Tool" onclick="filterItems('Tool')">
                            <i class="fas fa-tools mr-1"></i>Tools
                        </button>
                    </div>
                    
                    <!-- Container for Categories -->
                    <div id="categories-container">
                        <!-- Items will be dynamically loaded here -->
                    </div>
                </div>
            </div>
            
            <!-- Developer Tab - Using Home Layout Structure -->
            <div id="developer-tab" class="tab-content screen">
                <!-- Tab Header matching home layout -->
                <div class="tab-header" style="display: none;">
                    <button class="tab-action-btn">
                        
                    </button>
                    <div class="tab-title">Developer Info</div>
                    <button onclick="toggleDeveloperMenu()" class="tab-action-btn">
                        <i class="fas fa-ellipsis-v"></i>
                    </button>
                </div>

                <!-- Developer Page Dropdown Menu -->
                <div id="developerMenu" class="hidden absolute top-12 right-2 bg-white rounded-lg shadow-lg border border-gray-200 z-50 min-w-44">
                    <div class="py-2">
                        <a href="#" onclick="refreshProjects(); toggleDeveloperMenu();" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 border-b border-gray-100 transition-all duration-200">
                            <span class="text-sm mr-2">🔄</span>
                            <span class="text-xs font-medium">Refresh Projects</span>
                        </a>
                        <a href="#" onclick="redirectToAlPlayHub(); toggleDeveloperMenu();" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 border-b border-gray-100 transition-all duration-200">
                            <span class="text-sm mr-2">🌐</span>
                            <span class="text-xs font-medium">Visit Website</span>
                        </a>
                        <a href="https://www.crekode.com/developersharif" target="_blank" onclick="toggleDeveloperMenu();" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 border-b border-gray-100 transition-all duration-200">
                            <span class="text-sm mr-2">💼</span>
                            <span class="text-xs font-medium">Portfolio</span>
                        </a>
                        <a href="mailto:ms2600971@gmail.com" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 transition-all duration-200">
                            <span class="text-sm mr-2">📧</span>
                            <span class="text-xs font-medium">Contact</span>
                        </a>
                    </div>
                </div>

                <div class="screen-content">
                    <!-- Profile Section - Same spacing as home carousel -->
                    <div class="h-32 relative overflow-hidden rounded-2xl mb-3">
                        <div class="absolute inset-0 bg-cover bg-center" 
                             style="background-image: url('https://i.ibb.co/1fCXYQS9/developer-background-images.png')"></div>
                        <div class="absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"></div>
                        
                        <!-- Logo positioned on left side -->
                        <div class="absolute bottom-3 left-3">
                            <div class="relative">
                                <img src="https://i.ibb.co/jPjvv9Lc/833-d664fd374556c9aa42509614d-1746341384.png" 
                                     alt="Mohammed Sharif" 
                                     class="w-16 h-16 rounded-xl border-2 border-white bg-white">
                                <div class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white flex items-center justify-center">
                                    <i class="fas fa-check text-white text-xs"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Developer Details - Compact like home content -->
                    <div class="mb-4">
                        <!-- Developer Name & Info -->
                        <div class="text-center mb-4">
                            <h1 class="text-xl font-bold mb-1">MOHAMMED SHARIF</h1>
                            <p class="mb-1 text-sm">Game & Web Developer</p>
                            <p class="text-xs">🇵🇰 Made in Pakistan</p>
                            
                            <!-- Social Media Icons with different colors -->
                            <div class="flex justify-center space-x-3 mt-3">
                                <a href="https://vm.tiktok.com/ZTHW2X4BW5ogt-H4qyl/" style="background: linear-gradient(135deg, #000000, #333333);" class="w-10 h-10 rounded-full flex items-center justify-center text-white hover:opacity-80 transition-colors">
                                    <i class="fab fa-tiktok text-sm"></i>
                                </a>
                                <a href="https://x.com/dcmotorlab?t=iajS-fAz4Iax7LEbPOLq-g&s=09" style="background: linear-gradient(135deg, #1DA1F2, #0D8BD9);" class="w-10 h-10 rounded-full flex items-center justify-center text-white hover:opacity-80 transition-colors">
                                    <i class="fab fa-twitter text-sm"></i>
                                </a>
                                <a href="mailto:ms2600971@gmail.com" style="background: linear-gradient(135deg, #EA4335, #D33B2C);" class="w-10 h-10 rounded-full flex items-center justify-center text-white hover:opacity-80 transition-colors">
                                    <i class="fas fa-envelope text-sm"></i>
                                </a>
                            </div>
                        </div>

                        <!-- Quick Stats - Same spacing as filter buttons -->
                        <div class="grid grid-cols-3 gap-2 mb-3">
                            <div class="stat-card">
                                <p class="stat-number" id="projectCount">0</p>
                                <p class="stat-label">Projects</p>
                            </div>
                            <div class="stat-card">
                                <p class="stat-number">5+</p>
                                <p class="stat-label">Years</p>
                            </div>
                            <div class="stat-card">
                                <p class="stat-number">⭐</p>
                                <p class="stat-label">Quality</p>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="flex space-x-2 mb-4">
                            <a href="https://www.crekode.com/developersharif" target="_blank" 
                               class="flex-1 bg-primary text-white py-2 px-3 rounded-xl text-center hover:bg-opacity-90 transition-colors font-medium text-sm">
                                <i class="fas fa-globe mr-2"></i>Visit Portfolio
                            </a>
                            <button onclick="refreshProjects()" 
                                    class="px-3 py-2 rounded-xl hover:bg-gray-200 transition-colors" style="background: var(--card-bg); color: var(--text-primary);">
                                <i class="fas fa-sync-alt" id="dev-refresh-icon"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Projects Section -->
                    <div class="pb-6">
                        <div class="flex items-center justify-between mb-3">
                            <h2 class="text-base font-bold flex items-center">
                                💼 My Projects
                            </h2>
                            <div class="text-xs" id="lastUpdated" style="color: var(--text-secondary);"></div>
                        </div>

                        <!-- Loading State -->
                        <div id="loadingState" class="flex flex-col items-center justify-center py-6">
                            <div class="loader mb-3"></div>
                            <p class="text-sm">Loading projects...</p>
                        </div>

                        <!-- Error State -->
                        <div id="errorState" class="hidden flex flex-col items-center justify-center py-6">
                            <i class="fas fa-exclamation-triangle text-secondary text-xl mb-3"></i>
                            <p class="text-sm mb-3">Failed to load projects</p>
                            <button onclick="loadProjects()" 
                                    class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-opacity-90 transition-colors text-sm">
                                Try Again
                            </button>
                        </div>

                        <!-- Projects Grid -->
                        <div id="projectsGrid" class="grid grid-cols-2 gap-2"></div>

                        <!-- Empty State -->
                        <div id="emptyState" class="hidden flex flex-col items-center justify-center py-6">
                            <i class="fas fa-folder-open text-xl mb-3" style="color: var(--text-secondary);"></i>
                            <p class="text-sm">No projects found</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- APK Downloader Tab - Enhanced with Free HTML Notice -->
            <div id="upload-tab" class="tab-content screen">
                <!-- Tab Header matching home layout -->
                <div class="tab-header" style="display: none;">
                    <button class="tab-action-btn">
                       
                    </button>
                    <div class="tab-title">Download</div>
                    <button onclick="toggleAPKMenu()" class="tab-action-btn">
                        
                    </button>
                </div>

                <!-- APK Page Dropdown Menu -->
                <div id="apkMenu" class="hidden absolute top-12 right-2 bg-white rounded-lg shadow-lg border border-gray-200 z-50 min-w-44">
                    <div class="py-2">
                        <a href="#" onclick="loadAPKGames(); toggleAPKMenu();" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 border-b border-gray-100 transition-all duration-200">
                            <span class="text-sm mr-2">🔄</span>
                            <span class="text-xs font-medium">Refresh Games</span>
                        </a>
                        <a href="#" onclick="redirectToAlPlayHub(); toggleAPKMenu();" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 border-b border-gray-100 transition-all duration-200">
                            <span class="text-sm mr-2">🌐</span>
                            <span class="text-xs font-medium">Visit Website</span>
                        </a>
                        <a href="#" onclick="openCryptoPage(); toggleAPKMenu();" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 border-b border-gray-100 transition-all duration-200">
                            <span class="text-sm mr-2">🚀</span>
                            <span class="text-xs font-medium">Free Crypto Airdrops</span>
                        </a>
                        <a href="mailto:ms2600971@gmail.com" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 transition-all duration-200">
                            <span class="text-sm mr-2">📧</span>
                            <span class="text-xs font-medium">Support</span>
                        </a>
                    </div>
                </div>

                <div class="screen-content bg-white font-poppins">
                    <!-- ✅ APK PAGE: Promotion Carousel - 3 Slides -->
                    <div class="promotion-carousel">
                        <div class="carousel-container" id="apk-carousel-container">
                            <div class="carousel-slide active">
                                <img src="https://i.ibb.co/ZpmZVKdC/0-fgraphic.png" alt="APK Downloads" class="carousel-image">
                                <div class="carousel-overlay">
                                    <h3 class="carousel-title">📱 APK Downloads</h3>
                                    <p class="carousel-subtitle">Download Android Games</p>
                                </div>
                            </div>
                            <div class="carousel-slide">
                                <img src="https://i.ibb.co/WppmyzYT/inline.png" alt="Gaming Hub" class="carousel-image">
                                <div class="carousel-overlay">
                                    <h3 class="carousel-title">🎮 Mobile Gaming</h3>
                                    <p class="carousel-subtitle">Premium APK Games</p>
                                </div>
                            </div>
                            <div class="carousel-slide">
                                <img src="https://images.unsplash.com/photo-1551650975-87deedd944c3?w=800&h=400&fit=crop" alt="App Center" class="carousel-image">
                                <div class="carousel-overlay">
                                    <h3 class="carousel-title">🚀 Free HTML Source</h3>
                                    <p class="carousel-subtitle">Download Source Code</p>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-indicators" id="apk-carousel-indicators">
                            <span class="indicator active" data-slide="0"></span>
                            <span class="indicator" data-slide="1"></span>
                            <span class="indicator" data-slide="2"></span>
                        </div>
                    </div>

                    <!-- ✅ FREE HTML SOURCE CODE NOTICE -->
                    <div class="apk-free-notice">
                        <h3>💻 Free HTML Source Code Available!</h3>
                        <p>Download APK files + Get complete HTML source code for all projects - Completely FREE!</p>
                    </div>

                    

                    <!-- Search Bar - Same style as home -->
                    <div class="search-bar-container mb-3">
                        <i class="fas fa-search"></i>
                        <input 
                            type="text" 
                            id="apk-searchInput" 
                            placeholder="Search games..." 
                            class="search-input"
                        >
                    </div>

                    <!-- Loading State -->
                    <div id="apk-loadingState" class="text-center py-8">
                        <div class="loader mx-auto mb-3"></div>
                        <p class="text-gray-600 text-sm">Loading games...</p>
                    </div>

                    <!-- Error State -->
                    <div id="apk-errorState" class="hidden text-center py-8">
                        <p class="text-red-500 mb-4 text-sm">Failed to load games</p>
                        <button id="apk-retry-button" class="bg-blue-500 text-white px-4 py-2 rounded-lg text-sm">
                            Try Again
                        </button>
                    </div>

                    <!-- ✅ FIXED: APK Games Grid Layout -->
                    <div id="apk-gamesSections" class="hidden">
                        <h2 class="text-base font-bold my-2 px-1 text-textDark flex items-center">
                            🎮 Games & Source Code <span class="ml-2 text-sm font-semibold opacity-60" id="apk-gameCount"></span>
                        </h2>
                        <!-- ✅ CHANGED: Using proper 3-column grid instead of horizontal scroll -->
                        <div id="apk-allGames" class="apk-games-grid"></div>
                    </div>

                    <!-- No Results -->
                    <div id="apk-noResults" class="hidden text-center py-8">
                        <p class="text-gray-600 text-sm">No games found</p>
                    </div>
                </div>
            </div>
            
            <!-- Online Gaming Tab - Enhanced with YouTube Tools -->
            <div id="profile-tab" class="tab-content screen">
                <!-- Tab Header matching home layout -->
                <div class="tab-header" style="display: none;">
                    <button class="tab-action-btn">
                        
                    </button>
                    <div class="tab-title">Online Games + Tools</div>
                    <button onclick="toggleOnlineMenu()" class="tab-action-btn">
                        <i class="fas fa-ellipsis-v"></i>
                    </button>
                </div>

                <!-- Online Page Dropdown Menu -->
                <div id="onlineMenu" class="hidden absolute top-12 right-2 bg-white rounded-lg shadow-lg border border-gray-200 z-50 min-w-44">
                    <div class="py-2">
                        <a href="#" onclick="showUploadModal(); toggleOnlineMenu();" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 border-b border-gray-100 transition-all duration-200">
                            <span class="text-sm mr-2">📤</span>
                            <span class="text-xs font-medium">Upload Content</span>
                        </a>
                        <a href="#" onclick="redirectToAlPlayHub(); toggleOnlineMenu();" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 border-b border-gray-100 transition-all duration-200">
                            <span class="text-sm mr-2">🌐</span>
                            <span class="text-xs font-medium">Visit Website</span>
                        </a>
                        <a href="#" onclick="showUploadPolicy(); toggleOnlineMenu();" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 border-b border-gray-100 transition-all duration-200">
                            <span class="text-sm mr-2">📋</span>
                            <span class="text-xs font-medium">Upload Guidelines</span>
                        </a>
                        <a href="mailto:ms2600971@gmail.com" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 border-b border-gray-100 transition-all duration-200">
                            <span class="text-sm mr-2">📧</span>
                            <span class="text-xs font-medium">Support Email</span>
                        </a>
                        <a href="#" onclick="showTermsPolicy(); toggleOnlineMenu();" class="flex items-center px-3 py-2 text-gray-700 hover:bg-blue-50 transition-all duration-200">
                            <span class="text-sm mr-2">⚖️</span>
                            <span class="text-xs font-medium">Terms & Policies</span>
                        </a>
                    </div>
                </div>

                <div class="screen-content bg-white font-poppins">
                    <!-- ✅ ONLINE PAGE: Promotion Carousel - 3 Slides -->
                    <div class="promotion-carousel">
                        <div class="carousel-container" id="online-carousel-container">
                            <div class="carousel-slide active">
                                <img src="https://i.ibb.co/bgNxbQSY/images.jpg" alt="Online Gaming" class="carousel-image">
                                <div class="carousel-overlay">
                                    <h3 class="carousel-title">🎮 Online Gaming</h3>
                                    <p class="carousel-subtitle">Play games online instantly</p>
                                </div>
                            </div>
                            <div class="carousel-slide">
                                <img src="https://i.ibb.co/Jj8SsQK2/images.png" alt="Community" class="carousel-image">
                                <div class="carousel-overlay">
                                    <h3 class="carousel-title">👥 Community</h3>
                                    <p class="carousel-subtitle">Join creators worldwide</p>
                                </div>
                            </div>
                            <div class="carousel-slide">
                                <img src="https://images.unsplash.com/photo-1552820728-8b83bb6b773f?w=800&h=400&fit=crop" alt="Featured" class="carousel-image">
                                <div class="carousel-overlay">
                                    <h3 class="carousel-title">⭐ YouTube Tools</h3>
                                    <p class="carousel-subtitle">Creator toolkit available</p>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-indicators" id="online-carousel-indicators">
                            <span class="indicator active" data-slide="0"></span>
                            <span class="indicator" data-slide="1"></span>
                            <span class="indicator" data-slide="2"></span>
                        </div>
                    </div>

                    <!-- Action Icons Section with YouTube Theme -->
                    <div class="flex justify-center items-center gap-3 mb-3">
                        <!-- YouTube Multi Tool Kit Icon -->
                        <div class="text-center w-14">
                            <button onclick="openYouTubeTools()" class="action-icon youtube-tools mx-auto w-9 h-9" title="YouTube Multi Tool Kit">
                                <i class="fab fa-youtube text-sm"></i>
                            </button>
                            <p class="text-xs mt-1 text-gray-600 font-normal leading-tight">ToolKit</p>
                        </div>
                        
                         <!-- Content Creator Tools Icon -->
                        <div class="text-center w-14">
                            <button onclick="openCryptoPage()" class="action-icon creator-tools mx-auto w-9 h-9" title="Content Creator Tools">
                                <i class="fas fa-coins text-sm"></i>
                            </button>
                            <p class="text-xs mt-1 text-gray-600 font-normal leading-tight">crypto</p>
                        </div>
                     
                        <!-- Content Creator Tools Icon -->
                        <div class="text-center w-14">
                            <button onclick="openCreatorTools()" class="action-icon creator-tools mx-auto w-9 h-9" title="Content Creator Tools">
                                <i class="fas fa-video text-sm"></i>
                            </button>
                            <p class="text-xs mt-1 text-gray-600 font-normal leading-tight">AllTool</p>
                        </div>
                        
                        <!-- Center Upload Cloud Icon -->
                        <div class="text-center w-14">
                            <button onclick="showUploadModal()" class="upload-icon mx-auto w-9 h-9" title="Upload Content">
                                <i class="fas fa-cloud-upload-alt text-sm"></i>
                            </button>
                            <p class="text-xs mt-1 text-gray-600 font-normal leading-tight">Upload</p>
                        </div>
                        
                        <!-- My Uploads Icon -->
                        <div class="text-center w-14">
                            <button onclick="showMyUploadsModal()" class="action-icon store mx-auto w-9 h-9" title="My Uploads">
                                <i class="fas fa-folder-open text-sm"></i>
                            </button>
                            <p class="text-xs mt-1 text-gray-600 font-normal leading-tight">Files</p>
                        </div>
                    </div>

                    <!-- Search Bar - Same style as home -->
                    <div class="search-bar-container mb-3">
                        <i class="fas fa-search"></i>
                        <input 
                            type="text" 
                            id="online-searchInput" 
                            placeholder="Search games..." 
                            class="search-input"
                        >
                    </div>

                    <!-- Loading State -->
                    <div id="online-loadingState" class="text-center py-8">
                        <div class="loader mx-auto mb-3"></div>
                        <p class="text-gray-600 text-sm">Loading games...</p>
                    </div>

                    <!-- Error State -->
                    <div id="online-errorState" class="hidden text-center py-8">
                        <p class="text-red-500 mb-4 text-sm">Failed to load games</p>
                        <button id="online-retry-button" class="bg-blue-500 text-white px-4 py-2 rounded-lg text-sm">
                            Try Again
                        </button>
                    </div>

                    <!-- ✅ MODIFIED: Games Grid Layout instead of horizontal scroll -->
                    <div id="online-gamesSections" class="hidden">
                        <h2 class="text-base font-bold my-2 px-1 text-textDark flex items-center">
                            🎮 Games <span class="ml-2 text-sm font-semibold opacity-60" id="online-gameCount"></span>
                        </h2>
                        <!-- Grid Container for games -->
                        <div id="online-allGames" class="online-games-grid"></div>
                    </div>

                    <!-- No Results -->
                    <div id="online-noResults" class="hidden text-center py-8">
                        <p class="text-gray-600 text-sm">No games found</p>
                    </div>
                </div>
            </div>

            <!-- Ultra-Compact Bottom Navigation with Colorful Icons -->
            <div class="bottom-nav">
                <button id="nav-home" class="nav-button active" onclick="showTab('home-tab')">
                    <i class="nav-icon fas fa-home"></i>
                    <span class="nav-label">Home</span>
                </button>
                <button id="nav-developer" class="nav-button" onclick="showTab('developer-tab')">
                    <i class="nav-icon fas fa-user-tie"></i>
                    <span class="nav-label">Developer</span>
                </button>
                <button id="nav-upload" class="nav-button" onclick="showTab('upload-tab')">
                    <i class="nav-icon fas fa-download"></i>
                    <span class="nav-label">APK</span>
                </button>
                <button id="nav-profile" class="nav-button" onclick="showTab('profile-tab')">
                    <i class="nav-icon fas fa-gamepad"></i>
                    <span class="nav-label">Online</span>
                </button>
            </div>
        </div>
        
        <!-- Ultra-Compact Play Modal -->
        <div id="play-modal">
            <iframe id="play-iframe"></iframe>
            <button id="close-modal-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <!-- Ultra-Compact Custom Modal -->
        <div id="custom-modal" class="modal-backdrop">
            <div class="modal-content">
                <div class="p-3 border-b border-borderColor">
                    <h3 id="modal-title" class="font-bold text-textDark text-sm">AlPlayHub Notification</h3>
                </div>
                <div class="p-3">
                    <p id="modal-message" class="text-textMuted mb-3 text-sm"></p>
                    <div class="flex gap-2">
                        <button id="modal-ok" class="flex-1 py-2 bg-primary text-white rounded-lg font-semibold text-sm">OK</button>
                        <button id="modal-cancel" class="flex-1 py-2 bg-gray-200 text-textDark rounded-lg font-semibold hidden text-sm">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- User Name Input Modal -->
        <div id="username-modal" class="username-modal">
            <div class="username-modal-content">
                <h3 class="text-lg font-bold text-gray-900 mb-2">👋 Welcome to Chat Support!</h3>
                <p class="text-gray-600 text-sm mb-4">Please enter your name to start chatting with our support team.</p>
                <input type="text" id="username-input" class="username-input" placeholder="Enter your name..." maxlength="50">
                <button id="username-submit" class="username-submit">Start Chat</button>
            </div>
        </div>

        <!-- Upload Modal -->
        <div id="upload-modal" class="modal-backdrop">
            <div class="modal-content max-w-md">
                <div class="p-4 border-b border-gray-200 bg-gradient-to-r from-primary to-secondary rounded-t-xl">
                    <div class="flex justify-between items-center">
                        <h3 class="text-lg font-bold text-white flex items-center">
                            <i class="fas fa-upload mr-2"></i>Upload Content
                        </h3>
                        <button onclick="closeUploadModal()" class="text-white hover:text-gray-200 transition-colors">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    <p class="text-white/90 text-sm mt-1">Share your game or app with the community</p>
                </div>
                <div class="p-4 max-h-[60vh] overflow-y-auto">
                    <form id="upload-form" class="space-y-4">
                        <!-- App/Game Name -->
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fas fa-gamepad mr-1 text-primary"></i>App/Game Name *
                            </label>
                            <input type="text" id="app-name" required class="w-full p-3 border border-gray-300 rounded-lg focus:border-primary focus:ring-2 focus:ring-blue-200 transition-all text-base" placeholder="Enter your app name">
                        </div>

                        <!-- Logo URL with Preview -->
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fas fa-image mr-1 text-secondary"></i>Logo Image URL *
                            </label>
                            <input type="url" id="logo-url" required class="w-full p-3 border border-gray-300 rounded-lg focus:border-primary focus:ring-2 focus:ring-blue-200 transition-all text-base" placeholder="https://example.com/logo.png" onpaste="setTimeout(previewLogo, 100)" oninput="previewLogo()">
                            <p class="text-xs text-gray-500 mt-1">Square image recommended (512x512px)</p>
                            
                            <!-- Logo Preview -->
                            <div id="logo-preview" class="hidden mt-3 p-3 bg-gray-50 rounded-lg border">
                                <p class="text-sm font-medium text-gray-700 mb-2">Logo Preview:</p>
                                <div class="flex items-center space-x-3">
                                    <img id="preview-image" src="" alt="Logo Preview" class="w-16 h-16 rounded-lg object-cover border">
                                    <div>
                                        <p class="text-sm text-green-600 font-medium">✅ Logo loaded successfully</p>
                                        <p class="text-xs text-gray-500">This will be your app icon</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Logo Error -->
                            <div id="logo-error" class="hidden mt-3 p-3 bg-red-50 rounded-lg border border-red-200">
                                <p class="text-sm text-red-600 font-medium">❌ Invalid logo URL</p>
                                <p class="text-xs text-gray-500">Please provide a valid image URL</p>
                            </div>
                        </div>

                        <!-- Category Selection -->
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fas fa-tags mr-1 text-warning"></i>Category *
                            </label>
                            <select id="category" required class="w-full p-3 border border-gray-300 rounded-lg focus:border-primary focus:ring-2 focus:ring-blue-200 transition-all text-base">
                                <option value="">Select Category</option>
                                <option value="Game">🎮 Game</option>
                                <option value="App">📱 App</option>
                                <option value="Tool">🔧 Tool</option>
                            </select>
                        </div>

                        <!-- Upload Method -->
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fas fa-upload mr-1 text-purple"></i>Upload Method *
                            </label>
                            <div class="grid grid-cols-2 gap-2">
                                <button type="button" onclick="selectUploadMethod('html')" class="upload-method-btn border-2 border-gray-300 rounded-lg p-3 text-center hover:border-primary transition-all" data-method="html">
                                    <i class="fas fa-code text-2xl text-primary mb-2"></i>
                                    <p class="text-sm font-medium">HTML Code</p>
                                </button>
                                <button type="button" onclick="selectUploadMethod('url')" class="upload-method-btn border-2 border-gray-300 rounded-lg p-3 text-center hover:border-primary transition-all" data-method="url">
                                    <i class="fas fa-link text-2xl text-teal mb-2"></i>
                                    <p class="text-sm font-medium">Website URL</p>
                                </button>
                            </div>
                        </div>

                        <!-- HTML Code Upload -->
                        <div id="html-upload" class="hidden">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fas fa-code mr-1 text-indigo"></i>HTML Code *
                            </label>
                            <textarea id="html-code" rows="6" class="w-full p-3 border border-gray-300 rounded-lg focus:border-primary focus:ring-2 focus:ring-blue-200 transition-all text-base font-mono text-sm" placeholder="Paste your HTML code here..."></textarea>
                            <p class="text-xs text-gray-500 mt-1">Include complete HTML with CSS and JavaScript</p>
                        </div>

                        <!-- URL Upload -->
                        <div id="url-upload" class="hidden">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fas fa-link mr-1 text-pink"></i>Website URL *
                            </label>
                            <input type="url" id="website-url" class="w-full p-3 border border-gray-300 rounded-lg focus:border-primary focus:ring-2 focus:ring-blue-200 transition-all text-base" placeholder="https://yourgame.com">
                            <p class="text-xs text-gray-500 mt-1">Direct link to your game or app</p>
                        </div>

                        <!-- Description -->
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fas fa-align-left mr-1 text-success"></i>Description
                            </label>
                            <textarea id="description" rows="3" class="w-full p-3 border border-gray-300 rounded-lg focus:border-primary focus:ring-2 focus:ring-blue-200 transition-all text-base" placeholder="Describe your game or app..."></textarea>
                        </div>

                        <!-- Terms and Privacy Policy -->
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-gray-800 mb-2 flex items-center">
                                <i class="fas fa-shield-alt mr-2 text-primary"></i>Upload Guidelines
                            </h4>
                            <ul class="text-xs text-gray-600 space-y-1">
                                <li>• Content must be family-friendly and appropriate</li>
                                <li>• No copyright infringement or stolen content</li>
                                <li>• Games should be fully functional and tested</li>
                                <li>• Adult content or violence is not allowed</li>
                                <li>• Content will be reviewed before approval</li>
                            </ul>
                            <div class="mt-3">
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" id="agree-terms" required class="mr-2">
                                    <span class="text-gray-700">I agree to the upload guidelines and terms</span>
                                </label>
                            </div>
                        </div>

                        <!-- Upload Status Message -->
                        <div id="upload-status" class="hidden mb-4 p-4 rounded-lg">
                            <div id="upload-status-content"></div>
                        </div>

                        <!-- Submit Button -->
                        <div class="flex gap-3 pt-2">
                            <button type="button" onclick="closeUploadModal()" class="flex-1 py-3 px-4 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition-colors">
                                Cancel
                            </button>
                            <button type="submit" id="upload-submit-btn" class="flex-1 py-3 px-4 bg-gradient-to-r from-primary to-secondary text-white rounded-lg font-semibold hover:shadow-lg transition-all transform hover:scale-105">
                                <i class="fas fa-paper-plane mr-2"></i>Submit for Review
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Policy Modal -->
        <div id="policy-modal" class="modal-backdrop">
            <div class="modal-content policy-modal">
                <div class="p-4 border-b border-gray-200 bg-gradient-to-r from-primary to-secondary rounded-t-xl">
                    <div class="flex justify-between items-center">
                        <h3 id="policy-title" class="text-lg font-bold text-white flex items-center">
                            <i class="fas fa-clipboard-list mr-2"></i>Upload Guidelines
                        </h3>
                        <button onclick="closePolicyModal()" class="text-white hover:text-gray-200 transition-colors">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                </div>
                <div id="policy-content" class="p-4 max-h-[60vh] overflow-y-auto">
                    <!-- Content will be dynamically loaded -->
                </div>
            </div>
        </div>
    </div>

    <!-- ✅ ENHANCED CHAT SYSTEM WITH USERNAME -->
    <div id="chat-system" style="display: none;">
        <!-- Floating Chat Button -->
        <button id="chat-toggle">
            💬
            <div class="notification-badge" id="notification-badge">0</div>
        </button>

        <!-- Chat Box -->
        <div id="chat-box-container">
            <div id="chat-header">
                <span id="chat-header-text">Chat Support</span>
                <button id="close-chat">×</button>
            </div>
            <div id="chat-box"></div>
            <div id="input-area">
                <input type="text" id="msg" placeholder="Type your message...">
                <button id="send">Send</button>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    
    <script>
        // ✅ FIREBASE CONFIG
        const firebaseConfig = {
            apiKey: "AIzaSyCth7R_Lsz4e_2Y1W19Wor-e6e_H-Ha10g",
            authDomain: "alplayhub-d1ea2.firebaseapp.com",
            databaseURL: "https://alplayhub-d1ea2-default-rtdb.firebaseio.com",
            projectId: "alplayhub-d1ea2",
            storageBucket: "alplayhub-d1ea2.firebasestorage.app",
            messagingSenderId: "1000142252130",
            appId: "1:1000142252130:web:b7c455d88dbcacf40a093b"
        };
        
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const storage = firebase.storage();

        // Enhanced App System with Multiple Themes
        let allItems = [];
        let currentFilter = 'All';
        let isLoading = false;
        let carouselCurrentSlide = 0;
        let carouselInterval;
        let currentTheme = 'light'; // Default theme

        // ✅ DEVELOPER TAB SPECIFIC VARIABLES
        let projectsData = [];

        // ✅ APK DOWNLOADER SPECIFIC VARIABLES
        let allGames = [];

        // ✅ ONLINE GAMING SPECIFIC VARIABLES
        let onlineGames = [];

        // ✅ SEPARATE CAROUSEL SYSTEMS FOR DIFFERENT TABS
        let apkCarouselInterval;
        let onlineCarouselInterval;
        let apkCurrentSlide = 0;
        let onlineCurrentSlide = 0;

        const typeIcons = {
            'Game': '🎮',
            'App': '📱', 
            'Tool': '🔧'
        };

        // ✅ ENHANCED CHAT SYSTEM VARIABLES WITH USERNAME
        const senderRole = "user";
        const chatBox = document.getElementById("chat-box");
        const notificationBadge = document.getElementById("notification-badge");
        
        // Enhanced user management
        let userId = sessionStorage.getItem('chatUserId');
        let userName = sessionStorage.getItem('chatUserName');
        
        if (!userId) {
            userId = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            sessionStorage.setItem('chatUserId', userId);
        }

        let unreadCount = 0;
        let isChatOpen = false;
        let hasShownWelcome = false;

        // ✅ ENHANCED THEME MANAGEMENT WITH BLACK THEME
        const themes = [
            { name: 'light', label: 'Classic', icon: '☀️', color: '#FFFFFF' },
            { name: 'ocean', label: 'Ocean', icon: '🌊', color: '#E3F2FD' },
            { name: 'sunset', label: 'Sunset', icon: '🌅', color: '#FFF3E0' },
            { name: 'nature', label: 'Nature', icon: '🌿', color: '#F1F8E9' },
            { name: 'royal', label: 'Royal', icon: '👑', color: '#F3E5F5' },
            { name: 'dark', label: 'Dark', icon: '🌙', color: '#000000' }
        ];

        let currentThemeIndex = 0;

        function initializeTheme() {
            const savedTheme = localStorage.getItem('alplayhub-theme') || 'light';
            const themeIndex = themes.findIndex(t => t.name === savedTheme);
            currentThemeIndex = themeIndex !== -1 ? themeIndex : 0;
            currentTheme = themes[currentThemeIndex].name;
            applyTheme(currentTheme);
        }

        function cycleTheme() {
            const themeSelectorBtn = document.getElementById('theme-selector-btn');
            themeSelectorBtn.classList.add('rotating');
            
            setTimeout(() => {
                themeSelectorBtn.classList.remove('rotating');
            }, 300);

            currentThemeIndex = (currentThemeIndex + 1) % themes.length;
            currentTheme = themes[currentThemeIndex].name;
            
            applyTheme(currentTheme);
            localStorage.setItem('alplayhub-theme', currentTheme);
            
            const themeInfo = themes[currentThemeIndex];
            showToast(`${themeInfo.icon} ${themeInfo.label} Theme Active!`, 2000);
            
            document.getElementById('dropdown-menu').classList.remove('active');
        }

        function applyTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            const themeData = themes.find(t => t.name === theme);
            if (themeData) {
                updateThemeColorImmediate(themeData.color);
            }
        }

        // ✅ URL REDIRECTION - UPDATED LINKS
        function redirectToAlPlayHub() {
            showToast('🌐 Opening FruZo Slicer Game...', 2000);
            setTimeout(() => {
                window.open('https://linktr.ee/SharifDevelopers', '_blank');
            }, 500);
        }

        // ✅ UPDATED DOWNLOAD APP FUNCTION
        window.downloadApp = function() {
            showToast('🚀 Opening APK download...', 2000);
            setTimeout(() => {
                window.open('https://drive.google.com/file/d/1AUZH7Mp6bsZGv8EQaFFnP8T3P3Y59QLa/view?usp=drivesdk', '_blank');
            }, 500);
            document.getElementById('dropdown-menu').classList.remove('active');
        }

        // ✅ ENHANCED YOUTUBE TOOLS FUNCTIONS
        function openYouTubeTools() {
            showToast('📺 Opening YouTube Multi Tool Kit...', 2000);
            setTimeout(() => {
                // Replace with actual YouTube tools URL
                window.open('https://alplayhub.netlify.app/all-ytanalyzr', '_blank');
            }, 500);
        }

        function openCreatorTools() {
            showToast('🎬 Opening Content Creator Tools...', 2000);
            setTimeout(() => {
                // Replace with actual creator tools URL  
                window.open('https://alplayhub.netlify.app/ytanalyzr', '_blank');
            }, 500);
        }

        // ✅ CRYPTO PAGE FUNCTION
        function openCryptoPage() {
            showToast('🚀 Opening Free Crypto Airdrops page...', 2000);
            setTimeout(() => {
                window.open('https://alplayhub.netlify.app/FreeCryptoAirdrops', '_blank');
            }, 500);
        }

        // ✅ LOGO PREVIEW FUNCTIONALITY
        function previewLogo() {
            const logoUrl = document.getElementById('logo-url').value.trim();
            const previewContainer = document.getElementById('logo-preview');
            const errorContainer = document.getElementById('logo-error');
            const previewImage = document.getElementById('preview-image');
            
            previewContainer.classList.add('hidden');
            errorContainer.classList.add('hidden');
            
            if (!logoUrl) {
                return;
            }
            
            const img = new Image();
            img.onload = function() {
                previewImage.src = logoUrl;
                previewContainer.classList.remove('hidden');
                errorContainer.classList.add('hidden');
            };
            img.onerror = function() {
                previewContainer.classList.add('hidden');
                errorContainer.classList.remove('hidden');
            };
            img.src = logoUrl;
        }

        // ✅ ENHANCED CHAT SYSTEM WITH USERNAME INPUT
        function showUsernameModal() {
            document.getElementById('username-modal').classList.add('active');
        }

        function hideUsernameModal() {
            document.getElementById('username-modal').classList.remove('active');
        }

        function handleUsernameSubmit() {
            const usernameInput = document.getElementById('username-input');
            const username = usernameInput.value.trim();
            
            if (username.length < 2) {
                showToast('❌ Please enter a valid name (at least 2 characters)', 3000);
                return;
            }
            
            if (username.length > 50) {
                showToast('❌ Name too long (maximum 50 characters)', 3000);
                return;
            }
            
            // Save username
            userName = username;
            sessionStorage.setItem('chatUserName', userName);
            
            // Update chat header
            document.getElementById('chat-header-text').textContent = `Chat - ${userName}`;
            
            // Hide username modal
            hideUsernameModal();
            
            // Open chat box
            document.getElementById("chat-box-container").style.display = "flex";
            isChatOpen = true;
            
            // Show welcome message
            if (!hasShownWelcome) {
                showWelcomeMessage();
                hasShownWelcome = true;
            }
            
            // Clear notification count
            unreadCount = 0;
            updateNotificationBadge();
            
            showToast(`👋 Welcome ${userName}! Chat started.`, 2000);
        }

        // ✅ CHAT SYSTEM FUNCTIONS
        document.getElementById("chat-toggle").addEventListener("click", () => {
            // Check if user has set name
            if (!userName) {
                showUsernameModal();
                return;
            }
            
            const box = document.getElementById("chat-box-container");
            isChatOpen = (box.style.display === "flex");
            box.style.display = isChatOpen ? "none" : "flex";
            isChatOpen = !isChatOpen;
            
            if (isChatOpen) {
                unreadCount = 0;
                updateNotificationBadge();
                if (!hasShownWelcome) {
                    showWelcomeMessage();
                    hasShownWelcome = true;
                }
            }
        });

        // Username submit handlers
        document.getElementById("username-submit").addEventListener("click", handleUsernameSubmit);
        document.getElementById("username-input").addEventListener("keypress", (e) => {
            if (e.key === "Enter") handleUsernameSubmit();
        });

        // Close Chat
        document.getElementById("close-chat").addEventListener("click", () => {
            document.getElementById("chat-box-container").style.display = "none";
            isChatOpen = false;
        });

        // Send Message
        document.getElementById("send").addEventListener("click", sendMessage);
        document.getElementById("msg").addEventListener("keypress", (e) => {
            if (e.key === "Enter") sendMessage();
        });

        function sendMessage(){
            const text = document.getElementById("msg").value;
            if(text.trim() === "") return;
            
            // Include username in message
            const newMsg = db.ref(`chats/${userId}/messages`).push();
            newMsg.set({
                id: newMsg.key,
                sender: senderRole,
                text: text,
                timestamp: Date.now(),
                userId: userId,
                userName: userName || 'Anonymous'
            });
            
            // Update last activity
            db.ref(`chats/${userId}/lastActivity`).set(Date.now());
            db.ref(`chats/${userId}/userActive`).set(true);
            db.ref(`chats/${userId}/userName`).set(userName || 'Anonymous');
            
            document.getElementById("msg").value = "";
        }

        // ✅ ENHANCED WELCOME MESSAGE WITH DEVELOPER INFO
        function showWelcomeMessage() {
            const welcomeDiv = document.createElement("div");
            welcomeDiv.classList.add("msg", "welcome-msg");
            welcomeDiv.innerHTML = `
                <div>Welcome ${userName}! 👋</div>
                <div style="margin: 8px 0; font-size: 11px;">
                    <strong>Developer: Mohammed Sharif</strong><br>
                    🇵🇰 Pakistan-based Game & Web Developer<br>
                    📧 Contact: ms2600971@gmail.com<br>
                    💼 Portfolio: crekode.com/developersharif
                </div>
                <div class="timestamp">How can I help you today?</div>
            `;
            chatBox.appendChild(welcomeDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        // Listen for Messages
        db.ref(`chats/${userId}/messages`).on("child_added", snapshot => {
            const msg = snapshot.val();
            displayMessage(msg);
            
            // Show notification if chat is closed and message is from admin
            if (!isChatOpen && msg.sender === "admin") {
                unreadCount++;
                updateNotificationBadge();
            }
        });

        // Listen for Message Delete
        db.ref(`chats/${userId}/messages`).on("child_removed", snapshot => {
            const msgDiv = document.getElementById("msg-" + snapshot.key);
            if(msgDiv) msgDiv.remove();
        });

        // Update Notification Badge
        function updateNotificationBadge() {
            if (unreadCount > 0) {
                notificationBadge.style.display = "flex";
                notificationBadge.textContent = unreadCount > 99 ? "99+" : unreadCount;
            } else {
                notificationBadge.style.display = "none";
            }
        }

        // Display Message
        function displayMessage(msg){
            const div = document.createElement("div");
            div.classList.add("msg", msg.sender);
            div.id = "msg-" + msg.id;
            
            const time = new Date(msg.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            const senderLabel = msg.sender === "user" ? (msg.userName || "You") : "Support";
            
            div.innerHTML = `
                <div>${msg.text}</div>
                <span class="timestamp">${senderLabel} • ${time}</span>
            `;

            // Delete button (only for own messages)
            if (msg.sender === senderRole) {
                const delBtn = document.createElement("button");
                delBtn.innerHTML = "×";
                delBtn.classList.add("delete-btn");
                delBtn.onclick = () => {
                    db.ref(`chats/${userId}/messages/${msg.id}`).remove();
                };
                div.appendChild(delBtn);
            }

            chatBox.appendChild(div);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        // Keep user active status updated
        window.addEventListener('beforeunload', () => {
            db.ref(`chats/${userId}/userActive`).set(false);
        });

        setInterval(() => {
            if (isChatOpen) {
                db.ref(`chats/${userId}/userActive`).set(true);
                db.ref(`chats/${userId}/lastActivity`).set(Date.now());
            }
        }, 30000);

        // ✅ FIXED: UPLOAD FUNCTIONALITY WITH PROPER FIREBASE INTEGRATION
        function handleUploadSubmit(event) {
            event.preventDefault();
            console.log('🔥 Upload form submitted!');
            
            showInlineStatus('⏳ Starting upload process...', 'info');
            
            if (!validateUploadForm()) {
                console.log('❌ Form validation failed');
                showInlineStatus('❌ Please fill all required fields correctly', 'error');
                return;
            }
            
            console.log('✅ Form validation passed');
            
            const submitBtn = event.target.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Uploading...';
            submitBtn.disabled = true;
            
            showInlineStatus('📤 Uploading your content to admin for review...', 'loading');
            
            const uploadUserId = sessionStorage.getItem('uploadUserId') || 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            sessionStorage.setItem('uploadUserId', uploadUserId);
            
            const currentTime = Date.now();
            const formData = {
                title: document.getElementById('app-name').value.trim(),
                logo: document.getElementById('logo-url').value.trim(),
                type: document.getElementById('category').value,
                description: document.getElementById('description').value.trim(),
                timestamp: currentTime,
                submitDate: new Date(currentTime).toLocaleDateString(),
                submitTime: new Date(currentTime).toLocaleTimeString(),
                status: 'pending',
                uploader: uploadUserId,
                userAgent: navigator.userAgent,
                uploadId: 'upload_' + currentTime
            };

            const selectedMethod = document.querySelector('.upload-method-btn.border-blue-500');
            if (selectedMethod) {
                const method = selectedMethod.getAttribute('data-method');
                formData.uploadMethod = method;
                
                if (method === 'html') {
                    const htmlCode = document.getElementById('html-code').value.trim();
                    if (!htmlCode) {
                        resetSubmitButton(submitBtn, originalText);
                        showInlineStatus('❌ Please provide HTML code', 'error');
                        return;
                    }
                    formData.htmlCode = htmlCode;
                } else if (method === 'url') {
                    const gameUrl = document.getElementById('website-url').value.trim();
                    if (!gameUrl) {
                        resetSubmitButton(submitBtn, originalText);
                        showInlineStatus('❌ Please provide website URL', 'error');
                        return;
                    }
                    formData.gameUrl = gameUrl;
                    
                    formData.htmlCode = `<!DOCTYPE html>
             <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${formData.title}</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100vh; overflow: hidden; }
        iframe { width: 100vw; height: 100vh; border: none; }
    </style>
</head>
<body>
    <iframe src="${gameUrl}" allowfullscreen allow="autoplay; fullscreen; gamepad; microphone; camera"></iframe>
</body>
</html>`;
                }
            } else {
                resetSubmitButton(submitBtn, originalText);
                showInlineStatus('❌ Please select upload method (HTML or URL)', 'error');
                return;
            }

            console.log('📋 Form data prepared:', formData);

            try {
                db.ref('uploads').push(formData)
                    .then((ref) => {
                        console.log('✅ Upload successful to admin:', ref.key);
                        
                        const userUploadData = {
                            ...formData,
                            adminUploadKey: ref.key,
                            userUploadId: ref.key
                        };
                        
                        return db.ref(`userUploads/${uploadUserId}`).push(userUploadData);
                    })
                    .then((userRef) => {
                        console.log('✅ User upload tracking saved:', userRef.key);
                        
                        resetSubmitButton(submitBtn, originalText);
                        
                        showInlineStatus(`🎉 Upload Successful! "${formData.title}" has been sent to admin for review. You can track status in "My Uploads".`, 'success');
                        
                        setTimeout(() => {
                            document.getElementById('upload-form').reset();
                            resetUploadModal();
                            hideInlineStatus();
                        }, 3000);
                        
                        showToast(`🎉 "${formData.title}" uploaded successfully!`, 3000);
                    })
                    .catch((error) => {
                        console.error('❌ Upload error:', error);
                        resetSubmitButton(submitBtn, originalText);
                        showInlineStatus(`❌ Upload failed: ${error.message}. Please check your connection and try again.`, 'error');
                    });
            } catch (error) {
                console.error('❌ Firebase error:', error);
                resetSubmitButton(submitBtn, originalText);
                showInlineStatus('❌ Firebase connection error. Please try again.', 'error');
            }
        }

        // ✅ MY UPLOADS FUNCTIONALITY WITH DELETE OPTION
        function showMyUploadsModal() {
            const modalHTML = `
                <div id="my-uploads-modal" class="modal-backdrop active">
                    <div class="modal-content max-w-md">
                        <div class="p-4 border-b border-gray-200 bg-gradient-to-r from-primary to-secondary rounded-t-xl">
                            <div class="flex justify-between items-center">
                                <h3 class="text-lg font-bold text-white flex items-center">
                                    <i class="fas fa-folder-open mr-2"></i>My Uploads Dashboard
                                </h3>
                                <button onclick="closeMyUploadsModal()" class="text-white hover:text-gray-200 transition-colors">
                                    <i class="fas fa-times text-xl"></i>
                                </button>
                            </div>
                            <p class="text-white/90 text-sm mt-1">Track your uploaded content status</p>
                        </div>
                        <div class="p-4 max-h-[60vh] overflow-y-auto">
                            <div id="my-uploads-content">
                                <div class="text-center py-8">
                                    <div class="loader mx-auto mb-3"></div>
                                    <p class="text-gray-600 text-sm">Loading your uploads...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            loadMyUploads();
        }

        function closeMyUploadsModal() {
            const modal = document.getElementById('my-uploads-modal');
            if (modal) {
                modal.remove();
            }
        }

        function loadMyUploads() {
            const content = document.getElementById('my-uploads-content');
            const uploadUserId = sessionStorage.getItem('uploadUserId');
            
            if (!uploadUserId) {
                content.innerHTML = `
                    <div class="text-center py-8">
                        <i class="fas fa-inbox text-gray-400 text-4xl mb-3"></i>
                        <h3 class="text-gray-600 font-medium mb-2">No Uploads Yet</h3>
                        <p class="text-gray-500 text-sm mb-4">You haven't uploaded any content yet.</p>
                        <button onclick="closeMyUploadsModal(); showUploadModal();" class="bg-primary text-white px-4 py-2 rounded-lg text-sm">
                            <i class="fas fa-plus mr-2"></i>Upload Content
                        </button>
                    </div>
                `;
                return;
            }
            
            db.ref(`userUploads/${uploadUserId}`).orderByChild('timestamp').once('value')
                .then(snapshot => {
                    const uploads = [];
                    snapshot.forEach(child => {
                        uploads.push({ key: child.key, ...child.val() });
                    });
                    
                    uploads.reverse();
                    
                    if (uploads.length === 0) {
                        content.innerHTML = `
                            <div class="text-center py-8">
                                <i class="fas fa-inbox text-gray-400 text-4xl mb-3"></i>
                                <h3 class="text-gray-600 font-medium mb-2">No Uploads Yet</h3>
                                <p class="text-gray-500 text-sm mb-4">You haven't uploaded any content yet.</p>
                                <button onclick="closeMyUploadsModal(); showUploadModal();" class="bg-primary text-white px-4 py-2 rounded-lg text-sm">
                                    <i class="fas fa-plus mr-2"></i>Upload Content
                                </button>
                            </div>
                        `;
                        return;
                    }
                    
                    const statusColors = {
                        'pending': 'bg-yellow-100 text-yellow-800',
                        'approved': 'bg-green-100 text-green-800',
                        'rejected': 'bg-red-100 text-red-800'
                    };
                    
                    const statusIcons = {
                        'pending': 'fas fa-clock',
                        'approved': 'fas fa-check-circle',
                        'rejected': 'fas fa-times-circle'
                    };
                    
                    const uploadsHTML = uploads.map(upload => {
                        const uploadDate = new Date(upload.timestamp).toLocaleDateString();
                        
                        return `
                            <div class="border border-gray-200 rounded-lg p-3 mb-3 hover:shadow-sm transition-shadow">
                                <div class="flex items-start space-x-3">
                                    <img src="${upload.logo}" alt="${upload.title}" 
                                         class="w-12 h-12 rounded-lg object-cover flex-shrink-0"
                                         onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIGZpbGw9IiNmM2Y0ZjYiLz48Y2lyY2xlIGN4PSIyNCIgY3k9IjI0IiByPSIxMiIgZmlsbD0iIzk5OTk5OSIvPjwvc3ZnPg=='">
                                    
                                    <div class="flex-1 min-w-0">
                                        <h4 class="font-medium text-gray-900 text-sm truncate">${upload.title}</h4>
                                        <p class="text-xs text-gray-500 mt-1">${upload.type} • ${uploadDate}</p>
                                        
                                        <div class="flex items-center justify-between mt-2">
                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${statusColors[upload.status] || statusColors.pending}">
                                                <i class="${statusIcons[upload.status] || statusIcons.pending} mr-1"></i>
                                                ${upload.status || 'pending'}
                                            </span>
                                            
                                            <div class="flex items-center space-x-2">
                                                ${upload.status === 'approved' ? 
                                                    '<span class="text-xs text-green-600 font-medium">✅ Live</span>' : 
                                                    upload.status === 'rejected' ? 
                                                    '<span class="text-xs text-red-600 font-medium">❌ Rejected</span>' :
                                                    '<span class="text-xs text-gray-500 font-medium">⏳ Review</span>'
                                                }
                                                
                                                ${upload.status === 'pending' ? 
                                                    `<button onclick="deleteUpload('${uploadUserId}', '${upload.key}', '${upload.adminUploadKey || ''}')" class="text-red-500 hover:text-red-700 text-xs p-1" title="Delete Upload">
                                                        <i class="fas fa-trash"></i>
                                                    </button>` : ''
                                                }
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                ${upload.description ? 
                                    `<p class="text-xs text-gray-600 mt-2 line-clamp-2">${upload.description}</p>` : 
                                    ''
                                }
                            </div>
                        `;
                    }).join('');
                    
                    content.innerHTML = `
                        <div class="mb-4">
                            <div class="flex items-center justify-between mb-3">
                                <h4 class="font-medium text-gray-900">Your Content (${uploads.length})</h4>
                                <button onclick="closeMyUploadsModal(); showUploadModal();" class="text-primary hover:text-blue-700 text-sm font-medium">
                                    <i class="fas fa-plus mr-1"></i>Add New
                                </button>
                            </div>
                            
                            <div class="bg-gray-50 rounded-lg p-3 mb-4">
                                <p class="text-xs font-medium text-gray-700 mb-2">Status Guide:</p>
                                <div class="grid grid-cols-3 gap-2 text-xs">
                                    <div class="flex items-center">
                                        <span class="inline-block w-2 h-2 bg-yellow-500 rounded-full mr-2"></span>
                                        <span class="text-gray-600">Under Review</span>
                                    </div>
                                    <div class="flex items-center">
                                        <span class="inline-block w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                                        <span class="text-gray-600">Approved</span>
                                    </div>
                                    <div class="flex items-center">
                                        <span class="inline-block w-2 h-2 bg-red-500 rounded-full mr-2"></span>
                                        <span class="text-gray-600">Rejected</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="space-y-3">
                            ${uploadsHTML}
                        </div>
                        
                        <div class="mt-4 pt-4 border-t border-gray-200 text-center">
                            <p class="text-xs text-gray-500">
                                💡 You can delete pending uploads. Contact support for questions.
                            </p>
                        </div>
                    `;
                })
                .catch(error => {
                    console.error('Error loading uploads:', error);
                    content.innerHTML = `
                        <div class="text-center py-8">
                            <i class="fas fa-exclamation-triangle text-red-400 text-4xl mb-3"></i>
                            <h3 class="text-red-600 font-medium mb-2">Loading Failed</h3>
                            <p class="text-gray-500 text-sm mb-4">Failed to load your uploads.</p>
                            <button onclick="loadMyUploads();" class="bg-red-600 text-white px-4 py-2 rounded-lg text-sm">
                                <i class="fas fa-sync-alt mr-2"></i>Try Again
                            </button>
                        </div>
                    `;
                });
        }

        // Delete upload functionality
        function deleteUpload(userId, userUploadKey, adminUploadKey) {
            showCustomConfirm('Are you sure you want to delete this upload?', () => {
                db.ref(`userUploads/${userId}/${userUploadKey}`).remove()
                    .then(() => {
                        if (adminUploadKey) {
                            return db.ref(`uploads/${adminUploadKey}`).remove();
                        }
                        return Promise.resolve();
                    })
                    .then(() => {
                        showToast('🗑️ Upload deleted successfully', 2000);
                        loadMyUploads();
                    })
                    .catch(error => {
                        console.error('Error deleting upload:', error);
                        showToast('❌ Failed to delete upload', 3000);
                    });
            });
        }

        function showCustomConfirm(message, onConfirm) {
            const confirmModal = document.createElement('div');
            confirmModal.className = 'modal-backdrop active';
            confirmModal.innerHTML = `
                <div class="modal-content max-w-sm">
                    <div class="p-4 border-b border-gray-200">
                        <h3 class="font-bold text-gray-900 text-sm">Confirm Delete</h3>
                    </div>
                    <div class="p-4">
                        <p class="text-gray-600 mb-4 text-sm">${message}</p>
                        <div class="flex gap-3">
                            <button onclick="this.closest('.modal-backdrop').remove()" class="flex-1 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold text-sm">Cancel</button>
                            <button onclick="this.closest('.modal-backdrop').remove(); (${onConfirm})()" class="flex-1 py-2 bg-red-500 text-white rounded-lg font-semibold text-sm">Delete</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(confirmModal);
        }

        // ✅ MENU TOGGLE FUNCTIONS
        function toggleDeveloperMenu() {
            const menu = document.getElementById('developerMenu');
            if (menu) {
                menu.classList.toggle('hidden');
            }
        }

        function toggleAPKMenu() {
            const menu = document.getElementById('apkMenu');
            if (menu) {
                menu.classList.toggle('hidden');
            }
        }

        function toggleOnlineMenu() {
            const menu = document.getElementById('onlineMenu');
            if (menu) {
                menu.classList.toggle('hidden');
            }
        }

        // Close all dropdown menus when clicking outside
        document.addEventListener('click', function(event) {
            const menus = ['developerMenu', 'apkMenu', 'onlineMenu'];
            menus.forEach(menuId => {
                const menu = document.getElementById(menuId);
                if (menu && !event.target.closest(`#${menuId}`) && !event.target.closest(`button[onclick="toggle${menuId.replace('Menu', '').charAt(0).toUpperCase() + menuId.replace('Menu', '').slice(1)}Menu()"]`)) {
                    menu.classList.add('hidden');
                }
            });
        });

        // ✅ FIXED: CHAT SYSTEM - SHOW ONLY ON HOME PAGE
        function updateChatVisibility() {
            const chatSystem = document.getElementById('chat-system');
            const homeTab = document.getElementById('home-tab');
            
            if (homeTab && homeTab.classList.contains('active')) {
                chatSystem.classList.add('show-chat');
                chatSystem.style.display = 'block';
            } else {
                chatSystem.classList.remove('show-chat');
                chatSystem.style.display = 'none';
                document.getElementById("chat-box-container").style.display = "none";
                isChatOpen = false;
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            initializeApp();
            setupEventListeners();
            loadData();
            setupSideMenu();
            setupSearch();
            optimizeForAndroid();
            initializeHeaderVisibility();
            setupDropdownMenu();
            setupEngagingFeatures();
            setupCarousel();
            initializeDeveloperTab();
            initializeAPKDownloaderTab();
            initializeOnlineGamingTab();
            setupUploadForm();
            initializeTheme();
            setupAPKCarousel();
            setupOnlineCarousel();
            updateChatVisibility();
            
            // Setup theme selector
            document.getElementById('theme-selector-btn').addEventListener('click', cycleTheme);
        });

        // ✅ SETUP SEPARATE CAROUSEL FOR APK PAGE WITH UNIQUE IMAGES
        function setupAPKCarousel() {
            const slides = document.querySelectorAll('#apk-carousel-container .carousel-slide');
            const indicators = document.querySelectorAll('#apk-carousel-indicators .indicator');
            
            if (slides.length === 0) return;
            
            const totalSlides = slides.length;
            
            indicators.forEach((indicator, index) => {
                indicator.addEventListener('click', () => {
                    goToAPKSlide(index);
                });
            });
            
            function startAPKCarousel() {
                apkCarouselInterval = setInterval(() => {
                    apkCurrentSlide = (apkCurrentSlide + 1) % totalSlides;
                    goToAPKSlide(apkCurrentSlide);
                }, 4000);
            }
            
            function goToAPKSlide(slideIndex) {
                slides.forEach(slide => slide.classList.remove('active'));
                indicators.forEach(indicator => indicator.classList.remove('active'));
                
                slides[slideIndex].classList.add('active');
                indicators[slideIndex].classList.add('active');
                
                apkCurrentSlide = slideIndex;
            }
            
            startAPKCarousel();
            
            const carousel = document.querySelector('#upload-tab .promotion-carousel');
            if (carousel) {
                carousel.addEventListener('mouseenter', () => {
                    clearInterval(apkCarouselInterval);
                });
                
                carousel.addEventListener('mouseleave', () => {
                    startAPKCarousel();
                });
            }
        }

        // ✅ SETUP SEPARATE CAROUSEL FOR ONLINE PAGE WITH UNIQUE IMAGES
        function setupOnlineCarousel() {
            const slides = document.querySelectorAll('#online-carousel-container .carousel-slide');
            const indicators = document.querySelectorAll('#online-carousel-indicators .indicator');
            
            if (slides.length === 0) return;
            
            const totalSlides = slides.length;
            
            indicators.forEach((indicator, index) => {
                indicator.addEventListener('click', () => {
                    goToOnlineSlide(index);
                });
            });
            
            function startOnlineCarousel() {
                onlineCarouselInterval = setInterval(() => {
                    onlineCurrentSlide = (onlineCurrentSlide + 1) % totalSlides;
                    goToOnlineSlide(onlineCurrentSlide);
                }, 4000);
            }
            
            function goToOnlineSlide(slideIndex) {
                slides.forEach(slide => slide.classList.remove('active'));
                indicators.forEach(indicator => indicator.classList.remove('active'));
                
                slides[slideIndex].classList.add('active');
                indicators[slideIndex].classList.add('active');
                
                onlineCurrentSlide = slideIndex;
            }
            
            startOnlineCarousel();
            
            const carousel = document.querySelector('#profile-tab .promotion-carousel');
            if (carousel) {
                carousel.addEventListener('mouseenter', () => {
                    clearInterval(onlineCarouselInterval);
                });
                
                carousel.addEventListener('mouseleave', () => {
                    startOnlineCarousel();
                });
            }
        }

        // ✅ UPLOAD FUNCTIONALITY
        function showUploadModal() {
            document.getElementById('upload-modal').classList.add('active');
        }

        function closeUploadModal() {
            document.getElementById('upload-modal').classList.remove('active');
            document.getElementById('upload-form').reset();
            document.querySelectorAll('.upload-method-btn').forEach(btn => {
                btn.classList.remove('border-primary', 'bg-gray-50');
                btn.classList.add('border-gray-300');
            });
            document.getElementById('html-upload').classList.add('hidden');
            document.getElementById('url-upload').classList.add('hidden');
            document.getElementById('logo-preview').classList.add('hidden');
            document.getElementById('logo-error').classList.add('hidden');
        }

        function selectUploadMethod(method) {
            document.querySelectorAll('.upload-method-btn').forEach(btn => {
                btn.classList.remove('border-primary', 'bg-gray-50', 'border-blue-500');
                btn.classList.add('border-gray-300');
            });
            
            const selectedBtn = document.querySelector(`[data-method="${method}"]`);
            selectedBtn.classList.add('border-blue-500', 'bg-gray-50');
            selectedBtn.classList.remove('border-gray-300');
            
            document.getElementById('html-upload').classList.add('hidden');
            document.getElementById('url-upload').classList.add('hidden');
            
            if (method === 'html') {
                document.getElementById('html-upload').classList.remove('hidden');
            } else if (method === 'url') {
                document.getElementById('url-upload').classList.remove('hidden');
            }
        }

        function setupUploadForm() {
            const uploadForm = document.getElementById('upload-form');
            if (uploadForm) {
                uploadForm.addEventListener('submit', handleUploadSubmit);
            }
        }

        function showInlineStatus(message, type) {
            const statusDiv = document.getElementById('upload-status');
            const contentDiv = document.getElementById('upload-status-content');
            
            statusDiv.className = 'mb-4 p-4 rounded-lg';
            contentDiv.innerHTML = '';
            
            if (type === 'success') {
                statusDiv.classList.add('bg-green-50', 'border', 'border-green-200');
                contentDiv.innerHTML = `
                    <div class="flex items-start">
                        <div class="flex-shrink-0">
                            <i class="fas fa-check-circle text-green-500 text-lg"></i>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium text-green-800">${message}</p>
                            <p class="text-xs text-green-600 mt-1">Form will be cleared automatically in a few seconds.</p>
                        </div>
                    </div>
                `;
            } else if (type === 'error') {
                statusDiv.classList.add('bg-red-50', 'border', 'border-red-200');
                contentDiv.innerHTML = `
                    <div class="flex items-start">
                        <div class="flex-shrink-0">
                            <i class="fas fa-exclamation-circle text-red-500 text-lg"></i>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium text-red-800">${message}</p>
                        </div>
                    </div>
                `;
            } else if (type === 'loading') {
                statusDiv.classList.add('bg-blue-50', 'border', 'border-blue-200');
                contentDiv.innerHTML = `
                    <div class="flex items-start">
                        <div class="flex-shrink-0">
                            <i class="fas fa-spinner fa-spin text-blue-500 text-lg"></i>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium text-blue-800">${message}</p>
                            <p class="text-xs text-blue-600 mt-1">Please wait while we process your upload...</p>
                        </div>
                    </div>
                `;
            } else {
                statusDiv.classList.add('bg-gray-50', 'border', 'border-gray-200');
                contentDiv.innerHTML = `
                    <div class="flex items-start">
                        <div class="flex-shrink-0">
                            <i class="fas fa-info-circle text-gray-500 text-lg"></i>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium text-gray-800">${message}</p>
                        </div>
                    </div>
                `;
            }
            
            statusDiv.classList.remove('hidden');
            statusDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function hideInlineStatus() {
            const statusDiv = document.getElementById('upload-status');
            statusDiv.classList.add('hidden');
        }

        function resetUploadModal() {
            document.querySelectorAll('.upload-method-btn').forEach(btn => {
                btn.classList.remove('border-primary', 'bg-gray-50', 'border-blue-500');
                btn.classList.add('border-gray-300');
            });
            
            document.getElementById('html-upload').classList.add('hidden');
            document.getElementById('url-upload').classList.add('hidden');
            document.getElementById('logo-preview').classList.add('hidden');
            document.getElementById('logo-error').classList.add('hidden');
        }

        function resetSubmitButton(submitBtn, originalText) {
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
        }

        function validateUploadForm() {
            const appName = document.getElementById('app-name').value.trim();
            const logoUrl = document.getElementById('logo-url').value.trim();
            const category = document.getElementById('category').value;
            const agreeTerms = document.getElementById('agree-terms').checked;

            if (!appName) {
                showToast('❌ Please enter app/game name', 3000);
                document.getElementById('app-name').focus();
                return false;
            }

            if (appName.length < 3) {
                showToast('❌ App name must be at least 3 characters', 3000);
                document.getElementById('app-name').focus();
                return false;
            }

            if (!logoUrl) {
                showToast('❌ Please provide logo URL', 3000);
                document.getElementById('logo-url').focus();
                return false;
            }

            if (!category) {
                showToast('❌ Please select a category', 3000);
                document.getElementById('category').focus();
                return false;
            }

            if (!agreeTerms) {
                showToast('❌ Please agree to upload guidelines', 3000);
                document.getElementById('agree-terms').focus();
                return false;
            }

            return true;
        }

        // ✅ ENHANCED POLICY FUNCTIONALITY WITH STEP-BY-STEP IMAGE GUIDE
        function showUploadPolicy() {
            const content = `
                <div class="space-y-4">
                    <!-- Image Upload Guide Section -->
                    <div class="policy-section bg-gradient-to-r from-blue-50 to-purple-50 border-l-4 border-blue-500">
                        <h4 class="font-bold text-gray-800 mb-3 flex items-center text-base">
                            <i class="fas fa-image mr-2 text-blue-600"></i>📱 How to Upload Logo/Icon Images
                        </h4>
                        <div class="space-y-3">
                            <div class="bg-white rounded-lg p-3 border-l-4 border-green-500">
                                <h5 class="font-semibold text-green-700 mb-2 flex items-center">
                                    <span class="bg-green-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs mr-2">1</span>
                                    Recommended: ImgBB (Free & Easy)
                                </h5>
                                <div class="text-sm text-gray-700 space-y-1">
                                    <p><strong>Website:</strong> <a href="https://imgbb.com" target="_blank" class="text-blue-600 underline font-semibold">imgbb.com</a></p>
                                    <p><strong>Steps:</strong></p>
                                    <ol class="list-decimal list-inside ml-3 space-y-1 text-xs">
                                        <li>Go to <strong>imgbb.com</strong></li>
                                        <li>Click <strong>"Choose Images"</strong> or drag your logo</li>
                                        <li>Wait for upload to complete</li>
                                        <li>Right-click on image → <strong>"Copy image address"</strong></li>
                                        <li>Paste the URL in logo field above</li>
                                    </ol>
                                    <p class="text-green-600 text-xs mt-2">✅ <strong>Best Choice:</strong> No registration needed, permanent links</p>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-3 border-l-4 border-blue-500">
                                <h5 class="font-semibold text-blue-700 mb-2 flex items-center">
                                    <span class="bg-blue-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs mr-2">2</span>
                                    Alternative: Imgur
                                </h5>
                                <div class="text-sm text-gray-700 space-y-1">
                                    <p><strong>Website:</strong> <a href="https://imgur.com/upload" target="_blank" class="text-blue-600 underline font-semibold">imgur.com/upload</a></p>
                                    <p class="text-xs">• Upload → Right-click image → "Copy image address"</p>
                                    <p class="text-blue-600 text-xs">💡 Popular choice, very reliable</p>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-3 border-l-4 border-purple-500">
                                <h5 class="font-semibold text-purple-700 mb-2 flex items-center">
                                    <span class="bg-purple-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs mr-2">3</span>
                                    Professional: Postimages
                                </h5>
                                <div class="text-sm text-gray-700 space-y-1">
                                    <p><strong>Website:</strong> <a href="https://postimages.org" target="_blank" class="text-blue-600 underline font-semibold">postimages.org</a></p>
                                    <p class="text-xs">• High quality uploads, permanent hosting</p>
                                    <p class="text-purple-600 text-xs">🚀 Professional grade hosting</p>
                                </div>
                            </div>

                            <div class="bg-yellow-50 rounded-lg p-3 border border-yellow-300">
                                <h5 class="font-semibold text-yellow-800 mb-1 flex items-center">
                                    <i class="fas fa-lightbulb mr-2 text-yellow-600"></i>💡 Pro Tips:
                                </h5>
                                <ul class="text-xs text-yellow-800 space-y-1">
                                    <li>• Use square images (512x512px recommended)</li>
                                    <li>• PNG format works best for logos</li>
                                    <li>• Keep file size under 2MB for faster loading</li>
                                    <li>• Make sure image has transparent background if needed</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Content Guidelines -->
                    <div class="policy-section bg-gradient-to-r from-green-50 to-blue-50 border-l-4 border-green-500">
                        <h4 class="font-bold text-gray-800 mb-2 flex items-center">
                            <i class="fas fa-shield-check mr-2 text-green-600"></i>📋 Content Upload Guidelines
                        </h4>
                        <div class="grid grid-cols-1 gap-3">
                            <div class="bg-white rounded-lg p-3 border border-green-200">
                                <h5 class="font-semibold text-green-700 mb-1 text-sm">✅ Allowed Content:</h5>
                                <ul class="text-xs text-gray-700 space-y-1">
                                    <li>• Original games/apps created by you</li>
                                    <li>• Open-source projects with proper attribution</li>
                                    <li>• Educational and learning content</li>
                                    <li>• Family-friendly games and tools</li>
                                    <li>• Well-tested and functional applications</li>
                                </ul>
                            </div>
                            <div class="bg-white rounded-lg p-3 border border-red-200">
                                <h5 class="font-semibold text-red-700 mb-1 text-sm">❌ Prohibited Content:</h5>
                                <ul class="text-xs text-gray-700 space-y-1">
                                    <li>• Copyrighted games without permission</li>
                                    <li>• Malicious code or viruses</li>
                                    <li>• Adult or inappropriate content</li>
                                    <li>• Broken or non-functional applications</li>
                                    <li>• Spam or misleading content</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Review Process -->
                    <div class="policy-section bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500">
                        <h4 class="font-bold text-gray-800 mb-2 flex items-center">
                            <i class="fas fa-clock mr-2 text-blue-600"></i>⏱️ Review Process Timeline
                        </h4>
                        <div class="space-y-2">
                            <div class="flex items-center bg-white rounded-lg p-2 border border-blue-200">
                                <div class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mr-3">1</div>
                                <div class="flex-1">
                                    <p class="font-semibold text-sm text-gray-800">Submission</p>
                                    <p class="text-xs text-gray-600">Your content is submitted for review</p>
                                </div>
                                <span class="text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded">Instant</span>
                            </div>
                            <div class="flex items-center bg-white rounded-lg p-2 border border-yellow-200">
                                <div class="bg-yellow-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mr-3">2</div>
                                <div class="flex-1">
                                    <p class="font-semibold text-sm text-gray-800">Admin Review</p>
                                    <p class="text-xs text-gray-600">Quality check & content verification</p>
                                </div>
                                <span class="text-xs text-yellow-600 bg-yellow-100 px-2 py-1 rounded">24-48 hrs</span>
                            </div>
                            <div class="flex items-center bg-white rounded-lg p-2 border border-green-200">
                                <div class="bg-green-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mr-3">3</div>
                                <div class="flex-1">
                                    <p class="font-semibold text-sm text-gray-800">Published</p>
                                    <p class="text-xs text-gray-600">Your content goes live on platform</p>
                                </div>
                                <span class="text-xs text-green-600 bg-green-100 px-2 py-1 rounded">Auto</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Support Section -->
                    <div class="policy-section bg-gradient-to-r from-purple-50 to-pink-50 border-l-4 border-purple-500">
                        <h4 class="font-bold text-gray-800 mb-2 flex items-center">
                            <i class="fas fa-headset mr-2 text-purple-600"></i>💬 Need Help?
                        </h4>
                        <div class="bg-white rounded-lg p-3 border border-purple-200">
                            <div class="grid grid-cols-1 gap-3">
                                <div class="flex items-center">
                                    <i class="fas fa-envelope text-purple-600 mr-3"></i>
                                    <div>
                                        <p class="font-semibold text-sm text-gray-800">Email Support</p>
                                        <a href="mailto:ms2600971@gmail.com" class="text-purple-600 underline text-sm font-semibold">ms2600971@gmail.com</a>
                                    </div>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-comments text-green-600 mr-3"></i>
                                    <div>
                                        <p class="font-semibold text-sm text-gray-800">Live Chat Support</p>
                                        <p class="text-xs text-gray-600">Available on home page (bottom right)</p>
                                    </div>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-clock text-blue-600 mr-3"></i>
                                    <div>
                                        <p class="font-semibold text-sm text-gray-800">Response Time</p>
                                        <p class="text-xs text-gray-600">Usually within 2-6 hours</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Developer Info -->
                    <div class="policy-section bg-gradient-to-r from-gray-50 to-blue-50 border-l-4 border-gray-500">
                        <h4 class="font-bold text-gray-800 mb-2 flex items-center">
                            <i class="fas fa-user-tie mr-2 text-gray-600"></i>👨‍💻 About Developer
                        </h4>
                        <div class="bg-white rounded-lg p-3 border border-gray-200">
                            <div class="flex items-center space-x-3">
                                <img src="https://i.ibb.co/jPjvv9Lc/833-d664fd374556c9aa42509614d-1746341384.png" 
                                     alt="Mohammed Sharif" class="w-12 h-12 rounded-full border-2 border-blue-500">
                                <div>
                                    <p class="font-bold text-gray-800">Mohammed Sharif</p>
                                    <p class="text-xs text-gray-600">🇵🇰 Pakistan • Game & Web Developer</p>
                                    <p class="text-xs text-gray-600">5+ years experience • 50+ projects completed</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            showPolicyModal('📱 Complete Upload Guide & Guidelines', content);
        }

        function showTermsPolicy() {
            const content = `
                <div class="space-y-4">
                    <div class="policy-section">
                        <h4 class="font-semibold text-gray-800 mb-2">Terms of Service</h4>
                        <div class="text-sm text-gray-600 space-y-2">
                            <p>By using AlPlayHub, you agree to:</p>
                            <ul class="list-disc list-inside space-y-1 ml-4">
                                <li>Comply with all platform guidelines</li>
                                <li>Submit only legal and appropriate content</li>
                                <li>Respect intellectual property rights</li>
                                <li>Accept admin decisions on content approval</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="policy-section">
                        <h4 class="font-semibold text-gray-800 mb-2">Privacy Policy</h4>
                        <div class="text-sm text-gray-600 space-y-2">
                            <p>We respect your privacy:</p>
                            <ul class="list-disc list-inside space-y-1 ml-4">
                                <li>We collect minimal necessary information</li>
                                <li>Your email is used only for notifications</li>
                                <li>Content metadata is stored for platform functionality</li>
                                <li>We don't share personal data with third parties</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="policy-section">
                        <h4 class="font-semibold text-gray-800 mb-2">Content Ownership</h4>
                        <div class="text-sm text-gray-600 space-y-2">
                            <p>Important notes:</p>
                            <ul class="list-disc list-inside space-y-1 ml-4">
                                <li>You retain ownership of your original content</li>
                                <li>By uploading, you grant us license to distribute</li>
                                <li>We reserve the right to moderate content</li>
                                <li>Removal requests must go through admin</li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
            
            showPolicyModal('Terms & Privacy Policy', content);
        }

        function showPolicyModal(title, content) {
            document.getElementById('policy-title').innerHTML = `<i class="fas fa-clipboard-list mr-2"></i>${title}`;
            document.getElementById('policy-content').innerHTML = content;
            document.getElementById('policy-modal').classList.add('active');
        }

        function closePolicyModal() {
            document.getElementById('policy-modal').classList.remove('active');
        }

        // ✅ DEVELOPER TAB FUNCTIONS
        function initializeDeveloperTab() {
            loadProjects();
        }

        const CSV_URL = 'https://docs.google.com/spreadsheets/d/1-vZsrXfNFY4zoAI7jbBvyj8SD8yzhSIlT7RHmc0OhH0/export?format=csv';

        function showLoadingState() {
            document.getElementById('loadingState').classList.remove('hidden');
            document.getElementById('errorState').classList.add('hidden');
            document.getElementById('emptyState').classList.add('hidden');
        }

        function showErrorState() {
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('errorState').classList.remove('hidden');
            document.getElementById('emptyState').classList.add('hidden');
        }

        function showEmptyState() {
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('errorState').classList.add('hidden');
            document.getElementById('emptyState').classList.remove('hidden');
        }

        function hideAllStates() {
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('errorState').classList.add('hidden');
            document.getElementById('emptyState').classList.add('hidden');
        }

        function parseCSV(text) {
            const lines = text.trim().split('\n');
            const headers = lines[0].split(',').map(h => h.trim());
            const projects = [];

            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split(',').map(v => v.trim());
                if (values.length >= headers.length && values[0]) {
                    const project = {};
                    headers.forEach((header, index) => {
                        project[header] = values[index] || '';
                    });
                    projects.push(project);
                }
            }

            return projects;
        }

        function createProjectCard(project) {
            return `
                <div class="project-card rounded-xl shadow-sm overflow-hidden">
                    <img src="${project.logo}" 
                         alt="${project.name}" 
                         class="w-full h-20 object-cover"
                         onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9Ijk2IiB2aWV3Qm94PSIwIDAgMTYwIDk2IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxNjAiIGhlaWdodD0iOTYiIGZpbGw9IiNmM2Y0ZjYiLz48Y2lyY2xlIGN4PSI4MCIgY3k9IjQ4IiByPSIyMCIgZmlsbD0iIzk5OTk5OSIvPjwvc3ZnPg=='">
                    
                    <div class="p-2">
                        <h3 class="font-semibold text-xs mb-1 line-clamp-2 leading-tight">
                            ${project.name}
                        </h3>
                        <p class="text-xs text-gray-500 mb-2">HTML5 Game</p>
                        
                        <div class="flex space-x-1">
                            <button onclick="buyProject('${project.URL}')" 
                                    class="bg-primary text-white px-2 py-1 rounded-lg hover:bg-opacity-90 transition-colors text-xs font-medium flex-1">
                                <i class="fas fa-shopping-cart mr-1"></i>Buy
                            </button>
                            <button onclick="previewProject('${project.URL}')" 
                                    class="bg-gray-100 text-gray-700 px-2 py-1 rounded-lg hover:bg-gray-200 transition-colors text-xs">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function displayProjects() {
            const grid = document.getElementById('projectsGrid');
            
            if (projectsData.length === 0) {
                showEmptyState();
                return;
            }

            hideAllStates();
            grid.innerHTML = projectsData.map(createProjectCard).join('');
            
            document.getElementById('projectCount').textContent = projectsData.length;
            document.getElementById('lastUpdated').textContent = `Updated: ${new Date().toLocaleTimeString()}`;
        }

        async function loadProjects() {
            try {
                showLoadingState();
                
                const response = await fetch(CSV_URL);
                if (!response.ok) {
                    throw new Error('Failed to fetch data');
                }
                
                const csvText = await response.text();
                projectsData = parseCSV(csvText);
                displayProjects();
                
            } catch (error) {
                console.error('Error loading projects:', error);
                showErrorState();
            }
        }

        function refreshProjects() {
            const refreshIcon = document.getElementById('dev-refresh-icon');
            refreshIcon.classList.add('fa-spin');
            
            setTimeout(() => {
                refreshIcon.classList.remove('fa-spin');
            }, 1000);
            
            loadProjects();
        }

        function buyProject(url) {
            if (url) {
                window.open(url, '_blank');
            }
        }

        function previewProject(url) {
            if (url) {
                window.open(url, '_blank');
            }
        }

        // ✅ APK DOWNLOADER TAB FUNCTIONS - FIXED WITH PROPER 3-COLUMN GRID
        function initializeAPKDownloaderTab() {
            loadAPKGames();
        }

        function parseAPKCSV(csvText) {
            const lines = csvText.split('\n');
            const result = [];
            
            for (let i = 1; i < lines.length; i++) {
                const line = lines[i].trim();
                if (!line) continue;
                
                const values = line.split(',').map(val => val.trim());
                if (values.length >= 3) {
                    result.push({
                        name: values[0] || 'Untitled Game',
                        logo: values[1] || '',
                        url: values[2] || '#'
                    });
                }
            }
            
            return result;
        }

        // ✅ FIXED: APK Card with proper 3-column layout
        function createAPKGameCard(game) {
            return `
                <div class="apk-game-card">
                    <div class="game-image">
                        ${game.logo ? 
                            `<img src="${game.logo}" alt="${game.name}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                             <div class="fallback-icon" style="display:none;">🎮</div>` : 
                            `<div class="fallback-icon">🎮</div>`
                        }
                    </div>
                    <div class="game-title">${game.name}</div>
                    <button class="apk-download-btn" onclick="downloadGame('${game.url}', '${game.name}')">
                        <i class="fas fa-download"></i>
                        APK + HTML
                    </button>
                </div>
            `;
        }

        function downloadGame(url, gameName) {
            if (url && url !== '#') {
                window.open(url, '_blank');
                showToast(`📱 Downloading ${gameName} APK + HTML source...`, 3000);
            }
        }

        function renderAPKMobileDashboard() {
            const gamesSections = document.querySelector('#apk-gamesSections');
            const loadingState = document.querySelector('#apk-loadingState');
            
            if (gamesSections && loadingState) {
                loadingState.classList.add('hidden');
                gamesSections.classList.remove('hidden');
                
                const allGamesContainer = document.querySelector('#apk-allGames');
                const gameCount = document.querySelector('#apk-gameCount');
                if (allGamesContainer && gameCount) {
                    allGamesContainer.innerHTML = '';
                    // ✅ FIXED: Proper grid layout instead of horizontal append
                    allGames.forEach(game => {
                        const gameDiv = document.createElement('div');
                        gameDiv.innerHTML = createAPKGameCard(game);
                        allGamesContainer.appendChild(gameDiv.firstElementChild);
                    });
                    gameCount.textContent = `(${allGames.length})`;
                }
            }
        }

        function searchAPKGames(query) {
            if (!query.trim()) {
                renderAPKMobileDashboard();
                return;
            }
            
            const filteredGames = allGames.filter(game => 
                game.name.toLowerCase().includes(query.toLowerCase())
            );
            
            const gamesSections = document.querySelector('#apk-gamesSections');
            const noResults = document.querySelector('#apk-noResults');
            
            if (gamesSections && noResults) {
                if (filteredGames.length === 0) {
                    gamesSections.classList.add('hidden');
                    noResults.classList.remove('hidden');
                    return;
                }
                
                noResults.classList.add('hidden');
                gamesSections.classList.remove('hidden');
                
                const allGamesContainer = document.querySelector('#apk-allGames');
                const gameCount = document.querySelector('#apk-gameCount');
                if (allGamesContainer && gameCount) {
                    allGamesContainer.innerHTML = '';
                    filteredGames.forEach(game => {
                        const gameDiv = document.createElement('div');
                        gameDiv.innerHTML = createAPKGameCard(game);
                        allGamesContainer.appendChild(gameDiv.firstElementChild);
                    });
                    gameCount.textContent = `(${filteredGames.length})`;
                    document.querySelector('#apk-gamesSections h2').innerHTML = '🔍 Search Results <span class="ml-2 text-sm font-semibold opacity-60" id="apk-gameCount">('+filteredGames.length+')</span>';
                }
            }
        }

        async function loadAPKGames() {
            const loadingState = document.querySelector('#apk-loadingState');
            const errorState = document.querySelector('#apk-errorState');
            
            try {
                if (loadingState && errorState) {
                    loadingState.classList.remove('hidden');
                    errorState.classList.add('hidden');
                }
                
                const csvUrl = 'https://docs.google.com/spreadsheets/d/1D0atQH6PpjL4zS15gHOVHHdWtyOmsmfvxoY27QEsJTY/export?format=csv';
                const response = await fetch(csvUrl);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const csvText = await response.text();
                allGames = parseAPKCSV(csvText);
                
                renderAPKMobileDashboard();
                
            } catch (error) {
                console.error('Error loading APK games:', error);
                if (loadingState && errorState) {
                    loadingState.classList.add('hidden');
                    errorState.classList.remove('hidden');
                }
            }
        }

        // ✅ ONLINE GAMING TAB FUNCTIONS - MODIFIED TO SHOW GRID LAYOUT
        function initializeOnlineGamingTab() {
            loadOnlineGames();
        }

        function createOnlineGameCardForGrid(game) {
            return `
                <div class="online-game-card">
                    <div class="game-image">
                        ${game.logo ? 
                            `<img src="${game.logo}" alt="${game.name}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                             <div class="fallback-icon" style="display:none;">🎮</div>` : 
                            `<div class="fallback-icon">🎮</div>`
                        }
                    </div>
                    <div class="game-title">${game.name}</div>
                    <button class="play-button" onclick="openGame('${game.url}')">
                        <i class="fas fa-play"></i>
                        Play
                    </button>
                </div>
            `;
        }

        function openGame(url) {
            if (url && url !== '#') {
                window.open(url, '_blank');
            }
        }

        function renderOnlineMobileDashboard() {
            const gamesSections = document.querySelector('#online-gamesSections');
            const loadingState = document.querySelector('#online-loadingState');
            
            if (gamesSections && loadingState) {
                loadingState.classList.add('hidden');
                gamesSections.classList.remove('hidden');
                
                const allGamesContainer = document.querySelector('#online-allGames');
                const gameCount = document.querySelector('#online-gameCount');
                if (allGamesContainer && gameCount) {
                    allGamesContainer.innerHTML = '';
                    onlineGames.forEach(game => {
                        const gameDiv = document.createElement('div');
                        gameDiv.innerHTML = createOnlineGameCardForGrid(game);
                        allGamesContainer.appendChild(gameDiv.firstElementChild);
                    });
                    gameCount.textContent = `(${onlineGames.length})`;
                }
            }
        }

        function searchOnlineGames(query) {
            if (!query.trim()) {
                renderOnlineMobileDashboard();
                return;
            }
            
            const filteredGames = onlineGames.filter(game => 
                game.name.toLowerCase().includes(query.toLowerCase())
            );
            
            const gamesSections = document.querySelector('#online-gamesSections');
            const noResults = document.querySelector('#online-noResults');
            
            if (gamesSections && noResults) {
                if (filteredGames.length === 0) {
                    gamesSections.classList.add('hidden');
                    noResults.classList.remove('hidden');
                    return;
                }
                
                noResults.classList.add('hidden');
                gamesSections.classList.remove('hidden');
                
                const allGamesContainer = document.querySelector('#online-allGames');
                const gameCount = document.querySelector('#online-gameCount');
                if (allGamesContainer && gameCount) {
                    allGamesContainer.innerHTML = '';
                    filteredGames.forEach(game => {
                        const gameDiv = document.createElement('div');
                        gameDiv.innerHTML = createOnlineGameCardForGrid(game);
                        allGamesContainer.appendChild(gameDiv.firstElementChild);
                    });
                    gameCount.textContent = `(${filteredGames.length})`;
                    document.querySelector('#online-gamesSections h2').innerHTML = '🔍 Search Results <span class="ml-2 text-sm font-semibold opacity-60" id="online-gameCount">('+filteredGames.length+')</span>';
                }
            }
        }

        async function loadOnlineGames() {
            const loadingState = document.querySelector('#online-loadingState');
            const errorState = document.querySelector('#online-errorState');
            
            try {
                if (loadingState && errorState) {
                    loadingState.classList.remove('hidden');
                    errorState.classList.add('hidden');
                }
                
                const csvUrl = 'https://docs.google.com/spreadsheets/d/13Ym7uD8sHWBffzWhdCSuNeSLp3MV6szOfgyZTKQ750M/export?format=csv';
                const response = await fetch(csvUrl);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const csvText = await response.text();
                onlineGames = parseAPKCSV(csvText);
                
                renderOnlineMobileDashboard();
                
            } catch (error) {
                console.error('Error loading online games:', error);
                if (loadingState && errorState) {
                    loadingState.classList.add('hidden');
                    errorState.classList.remove('hidden');
                }
            }
        }

        // ✅ HOME PAGE CAROUSEL SYSTEM - ONLY 3 SLIDES WITH DIFFERENT IMAGES
        function setupCarousel() {
            const slides = document.querySelectorAll('#home-tab .carousel-slide');
            const indicators = document.querySelectorAll('#home-tab .indicator');
            const totalSlides = slides.length;
            
            if (totalSlides === 0) return;
            
            indicators.forEach((indicator, index) => {
                indicator.addEventListener('click', () => {
                    goToSlide(index);
                });
            });
            
            function startCarousel() {
                carouselInterval = setInterval(() => {
                    carouselCurrentSlide = (carouselCurrentSlide + 1) % totalSlides;
                    goToSlide(carouselCurrentSlide);
                }, 4000);
            }
            
            function goToSlide(slideIndex) {
                slides.forEach(slide => slide.classList.remove('active'));
                indicators.forEach(indicator => indicator.classList.remove('active'));
                
                slides[slideIndex].classList.add('active');
                indicators[slideIndex].classList.add('active');
                
                carouselCurrentSlide = slideIndex;
            }
            
            startCarousel();
            
            const carousel = document.querySelector('#home-tab .promotion-carousel');
            if (carousel) {
                carousel.addEventListener('mouseenter', () => {
                    clearInterval(carouselInterval);
                });
                
                carousel.addEventListener('mouseleave', () => {
                    startCarousel();
                });
            }
        }

        function initializeHeaderVisibility() {
            const header = document.querySelector('.new-header');
            const homeTab = document.getElementById('home-tab');
            
            if (homeTab.classList.contains('active')) {
                header.style.display = 'flex';
                header.style.opacity = '1';
                header.style.visibility = 'visible';
            }
        }

        function setupDropdownMenu() {
            const menuBtn = document.getElementById('menu-dots-btn');
            const dropdown = document.getElementById('dropdown-menu');
            
            menuBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                dropdown.classList.toggle('active');
            });
            
            document.addEventListener('click', () => {
                dropdown.classList.remove('active');
            });
            
            dropdown.addEventListener('click', (e) => {
                e.stopPropagation();
            });
        }

        // Android Functions
        window.refreshContent = function() {
            showToast('🔄 Refreshing content...', 2000);
            loadData();
            document.getElementById('dropdown-menu').classList.remove('active');
        }

        window.shareApp = function() {
            if (navigator.share) {
                navigator.share({
                    title: 'AlPlayHub - Ultimate Gaming Platform',
                    text: 'Check out AlPlayHub - thousands of games & apps!',
                    url: 'https://alplayhub.netlify.app/'
                });
            } else {
                const url = 'https://alplayhub.netlify.app/';
                navigator.clipboard.writeText(url).then(() => {
                    showToast('📋 App link copied to clipboard!', 3000);
                });
            }
            document.getElementById('dropdown-menu').classList.remove('active');
        }

        window.showAbout = function() {
            showModal('AlPlayHub v3.0\n\nUltimate HTML5 Games & Apps Platform\n\nDeveloped by Mohammed Sharif\n\nFeatures:\n• 6 Dynamic Themes (including Dark)\n• YouTube Creator Tools\n• Enhanced Chat System\n• APK + Source Downloads\n• Material Design\n• Android Optimized', '📱 About AlPlayHub');
            document.getElementById('dropdown-menu').classList.remove('active');
        }

        window.openSettings = function() {
            showTab('profile-tab');
            document.getElementById('dropdown-menu').classList.remove('active');
        }

        function setupEngagingFeatures() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.engaging-card, .stat-card, .item-card').forEach(card => {
                observer.observe(card);
            });
        }

        function optimizeForAndroid() {
            document.body.style.webkitUserSelect = 'none';
            document.body.style.userSelect = 'none';
            document.body.style.webkitTouchCallout = 'none';
            document.body.style.webkitTapHighlightColor = 'transparent';
            
            setTimeout(() => {
                window.scrollTo(0, 1);
            }, 100);
        }

        function updateThemeColorImmediate(color) {
            document.getElementById('theme-color-meta').setAttribute('content', color);
            document.getElementById('ms-theme-color').setAttribute('content', color);
        }

        function initializeApp() {
            // Basic initialization
        }

        function setupEventListeners() {
            setupModals();
        }

        function setupSearch() {
            const searchInput = document.querySelector('.search-input');
            let searchTimeout;
            
            searchInput.addEventListener('input', (e) => {
                clearTimeout(searchTimeout);
                const query = e.target.value.toLowerCase().trim();
                searchTimeout = setTimeout(() => {
                    renderItems(allItems, query);
                }, 300);
            });
        }
        
        function setupSideMenu() {
            const hamburgerBtn = document.getElementById('hamburger-menu-btn');
            const sideMenu = document.getElementById('side-menu');
            const overlay = document.getElementById('side-menu-overlay');
            const closeBtn = document.getElementById('side-menu-close-btn');

            hamburgerBtn.addEventListener('click', () => {
                overlay.classList.add('active');
                sideMenu.classList.add('active');
            });

            const closeMenu = () => {
                overlay.classList.remove('active');
                sideMenu.classList.remove('active');
            }
            
            closeBtn.addEventListener('click', closeMenu);
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    closeMenu();
                }
            });
        }
        
        window.closeSideMenu = function() {
            document.getElementById('side-menu-overlay').classList.remove('active');
            document.getElementById('side-menu').classList.remove('active');
        }

        function openExternalPage(page) {
            const pages = {
                'privacy': 'https://alplayhub.netlify.app/privacy-policy',
                'terms': 'https://alplayhub.netlify.app/terms-of-service',
                'about': 'https://alplayhub.netlify.app/about-us',
                'contact': 'https://alplayhub.netlify.app/contact',
                'feedback': 'https://alplayhub.netlify.app/feedback'
            };
            
            if (pages[page]) {
                showToast(`Opening ${page} page...`);
                setTimeout(() => {
                    window.open(pages[page], '_blank');
                }, 500);
            }
        }

        function showTab(tabId) {
            document.querySelectorAll('[id$="Menu"]').forEach(menu => {
                menu.classList.add('hidden');
            });
            
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            
            const newHeader = document.querySelector('.new-header');
            const bottomNav = document.querySelector('.bottom-nav');
            
            if (tabId === 'home-tab') {
                newHeader.style.display = 'flex';
            } else {
                newHeader.style.display = 'none';
            }
            
            document.querySelectorAll('.tab-header').forEach(header => {
                header.style.display = 'none';
            });
            
            if (tabId !== 'home-tab') {
                const tabHeader = document.querySelector(`#${tabId} .tab-header`);
                if (tabHeader) {
                    tabHeader.style.display = 'flex';
                }
            }
            
            bottomNav.style.display = 'flex';
            
            document.querySelectorAll('.nav-button').forEach(btn => btn.classList.remove('active'));
            const activeNavId = 'nav-' + tabId.replace('-tab', '');
            const activeBtn = document.getElementById(activeNavId);
            if (activeBtn) {
                activeBtn.classList.add('active');
                activeBtn.style.animation = 'scale-in 0.2s ease-out';
            }
            
            const targetScreen = document.querySelector(`#${tabId}`);
            if(targetScreen) targetScreen.scrollTop = 0;
            
            updateChatVisibility();
            
            if (tabId === 'developer-tab') {
                loadProjects();
            } else if (tabId === 'upload-tab') {
                loadAPKGames();
                setupAPKCarousel();
            } else if (tabId === 'profile-tab') {
                loadOnlineGames();
                setupOnlineCarousel();
            }
        }

        function filterItems(filter) {
            currentFilter = filter;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-primary', 'text-white');
                if (btn.dataset.filter === filter) {
                    btn.classList.add('active', 'bg-primary', 'text-white');
                }
            });
            renderItems(allItems);
        }

        function setupModals() {
            document.querySelectorAll('.close-modal').forEach(btn => btn.addEventListener('click', (e) => e.target.closest('.modal-backdrop').classList.remove('active')));
            document.querySelectorAll('.modal-backdrop').forEach(modal => modal.addEventListener('click', (e) => { if (e.target === modal) modal.classList.remove('active'); }));
            document.getElementById('modal-ok').addEventListener('click', () => closeModal('custom-modal'));
            document.getElementById('modal-cancel').addEventListener('click', () => closeModal('custom-modal'));
        }

        function showModal(message, title = 'AlPlayHub Notification', isConfirm = false) {
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-message').textContent = message;
            document.getElementById('modal-cancel').classList.toggle('hidden', !isConfirm);
            document.getElementById('custom-modal').classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }
        
        function loadData() {
            if (isLoading) return;
            isLoading = true;
            const container = document.getElementById('categories-container');
            container.innerHTML = '<div class="text-center py-6 w-full"><div class="loading mx-auto mb-3"></div><p class="text-textMuted text-sm">Loading amazing content...</p></div>';
            
            db.ref('items').on('value', snapshot => {
                allItems = [];
                if (snapshot.exists()) {
                    snapshot.forEach(child => {
                        allItems.push({ key: child.key, ...child.val() });
                    });
                    allItems.reverse();
                }
                renderItems(allItems);
                isLoading = false;
            }, (error) => {
                console.error("Firebase Read Failed: " + error.code);
                isLoading = false;
                container.innerHTML = '<div class="text-center py-6 w-full"><p class="text-red-500 text-sm">Failed to load content.</p></div>';
            });
        }
        
        function renderItems(items, searchQuery = '') {
            const mainContainer = document.getElementById('categories-container');
            mainContainer.innerHTML = '';

            let sourceItems = items;
            if (searchQuery) {
                sourceItems = items.filter(item => 
                    item.title.toLowerCase().includes(searchQuery)
                );
            }
            
            const categoriesToShow = currentFilter === 'All' ? ['Game', 'App', 'Tool'] : [currentFilter];
            let itemsFound = false;

            categoriesToShow.forEach(category => {
                const categoryItems = sourceItems.filter(item => item.type === category);

                if (categoryItems.length > 0) {
                    itemsFound = true;
                    
                    const header = document.createElement('h2');
                    header.className = 'text-base font-bold my-2 px-1 text-textDark flex items-center';
                    header.innerHTML = `${getTypeIcon(category)} ${category}s <span class="ml-2 text-sm font-semibold opacity-60">(${categoryItems.length})</span>`;
                    mainContainer.appendChild(header);

                    const scrollContainer = document.createElement('div');
                    scrollContainer.className = 'category-scroll-container';
                    
                    const fragment = document.createDocumentFragment();
                    categoryItems.forEach((item, index) => {
                        const card = createItemCard(item, index);
                        fragment.appendChild(card);
                    });
                    scrollContainer.appendChild(fragment);
                    mainContainer.appendChild(scrollContainer);
                }
            });

            if (!itemsFound) {
                mainContainer.innerHTML = `<div class="text-center py-6 w-full"><h3 class="text-sm font-bold text-textDark">No items found</h3><p class="text-textMuted mt-1 text-sm">Try a different search term</p></div>`;
            }
        }
        
        function createItemCard(item, index = 0) {
            const card = document.createElement('div');
            card.className = 'item-card fade-in';
            
            const imageDiv = document.createElement('div');
            imageDiv.className = 'card-image';
            
            const img = document.createElement('img');
            img.src = item.logo || getPlaceholderImage(item.type, item.title);
            img.alt = `${item.title} - ${item.type}`;
            img.loading = index > 6 ? 'lazy' : 'eager';
            img.onerror = function() {
                this.style.display = 'none';
                const fallback = document.createElement('div');
                fallback.className = 'fallback-icon';
                fallback.innerHTML = getTypeIcon(item.type);
                imageDiv.appendChild(fallback);
            };
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'card-content';
            
            const titleDiv = document.createElement('div');
            titleDiv.className = 'item-title';
            titleDiv.textContent = item.title;
            
            imageDiv.appendChild(img);
            contentDiv.appendChild(titleDiv);
            card.appendChild(imageDiv);
            card.appendChild(contentDiv);
            
            card.addEventListener('click', () => {
                playItem(item);
            });
            
            return card;
        }

        function playItem(item) {
            const playModal = document.getElementById('play-modal');
            const iframe = document.getElementById('play-iframe');
            
            if (item.key) {
                db.ref(`items/${item.key}/playCount`).transaction(current => (current || 0) + 1);
            }
            
            if (item.uploadMethod === 'url' && item.gameUrl) {
                const fullScreenStyle = `
                    <style>
                        html, body { margin: 0 !important; padding: 0 !important; height: 100vh !important; width: 100vw !important; overflow: hidden !important; }
                        iframe { width: 100vw !important; height: 100vh !important; border: none !important; }
                    </style>
                `;
                const iframeHTML = `${fullScreenStyle}<iframe src="${item.gameUrl}" allowfullscreen allow="autoplay; fullscreen; gamepad; microphone; camera"></iframe>`;
                iframe.srcdoc = iframeHTML;
            } else {
                const fullScreenStyle = `
                    <style>
                        html, body { margin: 0 !important; padding: 0 !important; height: 100vh !important; width: 100vw !important; overflow: auto !important; -webkit-overflow-scrolling: touch !important; }
                        * { box-sizing: border-box !important; }
                        body { background: var(--app-bg) !important; }
                    </style>
                `;
                iframe.srcdoc = fullScreenStyle + item.htmlCode;
            }
            
            playModal.style.display = 'block';
            showToast(`🎮 Loading ${item.title}...`, 2000);
        }

        document.getElementById('close-modal-btn').addEventListener('click', () => {
            document.getElementById('play-modal').style.display = 'none';
            document.getElementById('play-iframe').srcdoc = '';
        });
        
        function getTypeIcon(type) {
            return typeIcons[type] || '📄';
        }

        function getPlaceholderImage(type, title) {
            const colors = { 'Game': '2196F3', 'App': '4CAF50', 'Tool': 'FF9800' };
            const color = colors[type] || '999999';
            const letter = encodeURIComponent(title.charAt(0).toUpperCase());
            return `https://via.placeholder.com/200x200/${color}/ffffff?text=${letter}`;
        }

        function showToast(message, duration = 3000) {
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-16 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg z-50 text-sm font-medium';
            toast.style.backdropFilter = 'blur(8px)';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.transform = 'translateX(-50%) translateY(-3px)';
                toast.style.opacity = '1';
            }, 10);
            
            setTimeout(() => {
                if (document.body.contains(toast)) {
                    document.body.removeChild(toast);
                }
            }, duration);
        }

        // Add search functionality for embedded tabs
        document.addEventListener('DOMContentLoaded', function() {
            const apkSearchInput = document.querySelector('#apk-searchInput');
            if (apkSearchInput) {
                apkSearchInput.addEventListener('input', (e) => {
                    searchAPKGames(e.target.value);
                });
            }

            const onlineSearchInput = document.querySelector('#online-searchInput');
            if (onlineSearchInput) {
                onlineSearchInput.addEventListener('input', (e) => {
                    searchOnlineGames(e.target.value);
                });
            }

            const apkRetryButton = document.querySelector('#apk-retry-button');
            if (apkRetryButton) {
                apkRetryButton.addEventListener('click', loadAPKGames);
            }

            const onlineRetryButton = document.querySelector('#online-retry-button');
            if (onlineRetryButton) {
                onlineRetryButton.addEventListener('click', loadOnlineGames);
            }
        });
    </script>
</body>
</html>
