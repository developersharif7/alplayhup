<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YouTube Video Transcript Generator</title>
  <meta name="description" content="Generate a text-only or timestamped transcript from any YouTube video URL.">
  <meta name="keywords" content="YouTube, transcript, closed captioning, captions, text, video to text, tool">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    /* Minimal CSS for this tool */
    :root {
      --primary-color: #E53935;
      --primary-dark: #B71C1C;
      --primary-light: #FFCDD2;
      --text-primary: #212121;
      --text-secondary: #757575;
      --divider-color: #E0E0E0;
      --background-color: #F5F5F5;
      --card-color: #FFFFFF;
      --card-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    body.dark-mode {
      --primary-color: #FF5252;
      --primary-dark: #D32F2F;
      --primary-light: #420D0D;
      --text-primary: #E0E0E0;
      --text-secondary: #B0B0B0;
      --divider-color: #424242;
      --background-color: #121212;
      --card-color: #212121;
      --card-shadow: 0 2px 4px rgba(0,0,0,0.4);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      font-family: 'Roboto', sans-serif;
      background-color: var(--background-color);
      color: var(--text-primary);
      transition: background-color 0.3s, color 0.3s;
      padding: 16px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }

    .tool-container {
      width: 100%;
      max-width: 600px;
    }

    .material-card {
      background-color: var(--card-color);
      border-radius: 8px;
      overflow: hidden;
      box-shadow: var(--card-shadow);
      margin-bottom: 16px;
      position: relative;
    }

    .card-title {
      padding: 16px;
      font-size: 18px;
      font-weight: 500;
      color: var(--text-primary);
      border-bottom: 1px solid var(--divider-color);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card-content {
      padding: 16px;
      color: var(--text-secondary);
    }

    .url-input-container {
      position: relative;
      margin-bottom: 16px;
      display: flex;
      flex-direction: column;
    }

    .url-input {
      width: 100%;
      background-color: var(--background-color);
      border: 1px solid var(--divider-color);
      padding: 12px 16px;
      font-size: 16px;
      color: var(--text-primary);
      border-radius: 4px;
      transition: border-color 0.3s;
      height: 48px;
      resize: vertical;
      min-height: 48px;
    }

    .url-input:focus {
      outline: none;
      border: 1px solid var(--primary-color);
    }

    .paste-btn {
      position: absolute;
      right: 8px;
      top: 8px;
      background-color: var(--primary-light);
      color: var(--primary-dark);
      border: none;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 14px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .material-btn {
      display: inline-block;
      background-color: var(--primary-color);
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      font-size: 14px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: background-color 0.3s;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
      text-align: center;
      width: 100%;
    }

    .material-btn:hover {
      background-color: var(--primary-dark);
    }

    .progress-container {
      width: 100%;
      height: 4px;
      background-color: var(--primary-light);
      position: relative;
      overflow: hidden;
      display: none;
      margin-bottom: 16px;
    }

    .progress-bar {
      position: absolute;
      height: 100%;
      width: 50%;
      background-color: var(--primary-color);
      animation: progress 1.5s infinite ease-in-out;
    }

    @keyframes progress {
      0% { left: -50%; }
      100% { left: 100%; }
    }

    .toast {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #323232;
      color: white;
      padding: 8px 16px;
      border-radius: 4px;
      font-size: 14px;
      z-index: 1050;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      display: none;
      animation: fadeInOut 3s ease forwards;
    }

    @keyframes fadeInOut {
      0%, 100% { opacity: 0; transform: translate(-50%, 20px); }
      10%, 90% { opacity: 1; transform: translate(-50%, 0); }
    }

    .results-container {
      background-color: var(--card-color);
      border-radius: 8px;
      box-shadow: var(--card-shadow);
      margin-top: 16px;
      overflow: hidden;
      display: none;
    }

    .results-header {
      background-color: var(--primary-color);
      color: white;
      padding: 12px 16px;
      font-size: 16px;
      font-weight: 500;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .results-content {
      padding: 16px;
    }

    .copy-btn {
      background-color: var(--primary-light);
      color: var(--primary-dark);
      border: none;
      width: 28px;
      height: 28px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    .tabs-container {
      display: flex;
      border-bottom: 1px solid var(--divider-color);
      margin-bottom: 16px;
      overflow-x: auto;
      scrollbar-width: none;
    }

    .tabs-container::-webkit-scrollbar {
      display: none;
    }

    .tab {
      padding: 12px 16px;
      font-size: 14px;
      font-weight: 500;
      color: var(--text-secondary);
      cursor: pointer;
      white-space: nowrap;
      position: relative;
    }

    .tab.active {
      color: var(--primary-color);
    }

    .tab.active::after {
      content: '';
      position: absolute;
      bottom: -1px;
      left: 0;
      right: 0;
      height: 2px;
      background-color: var(--primary-color);
    }

    .transcript-container {
      background-color: var(--background-color);
      border-radius: 4px;
      padding: 12px;
      margin-top: 16px;
      max-height: 400px;
      overflow-y: auto;
      white-space: pre-wrap;
      font-size: 14px;
      line-height: 1.5;
      color: var(--text-primary);
    }

    .transcript-container .timestamp {
      color: var(--primary-color);
      font-weight: 500;
      margin-right: 8px;
    }

    .transcript-line {
      margin-bottom: 8px;
    }

    /* Media Queries */
    @media (max-width: 480px) {
      .card-title {
        font-size: 16px;
      }
      .material-btn {
        font-size: 13px;
        padding: 10px;
      }
    }
  </style>
</head>
<body>
  <div class="tool-container">
    <div class="material-card">
      <div class="card-title">
        <i class="fas fa-closed-captioning"></i> YouTube Transcript Generator
      </div>
      <div class="card-content">
        <div class="url-input-container">
          <input type="text" class="url-input" id="transcriptUrl" placeholder="Paste YouTube Video URL" required>
          <button class="paste-btn" id="pasteTranscriptUrlBtn">
            <i class="fas fa-paste"></i> Paste
          </button>
        </div>
        <button class="material-btn" id="getTranscriptBtn">
          <i class="fas fa-search me-2"></i> Get Transcript
        </button>
      </div>
    </div>

    <div class="progress-container" id="transcriptProgress">
      <div class="progress-bar"></div>
    </div>

    <div id="transcriptResults" class="results-container">
      <div class="results-header">
        <span>Video Transcript</span>
        <div style="display: flex; gap: 8px;">
          <button class="copy-btn" onclick="copyToClipboard('transcriptContent')">
            <i class="fas fa-copy"></i>
          </button>
          <button class="copy-btn" onclick="exportTranscript()">
            <i class="fas fa-download"></i>
          </button>
        </div>
      </div>
      <div class="results-content">
        <div class="tabs-container">
          <div class="tab active" data-transcript-format="text">Text Only</div>
          <div class="tab" data-transcript-format="timestamps">With Timestamps</div>
        </div>
        
        <div class="transcript-container" id="transcriptContent">
          <!-- Transcript will be loaded here -->
        </div>
      </div>
    </div>
  </div>
  
  <div class="toast" id="toast"></div>

  <script>
    // Note: YouTube API is not used for transcript generation in this local version,
    // as it would require a backend. A fake transcript generator is used instead.
    // The API_KEY is left here for consistency if you choose to implement a backend later.
    const API_KEY = "AIzaSyCmnNbFK889CClqOpnRw_-w8n1GkS2KJxE"; 
    let currentTranscript = null; // Store the transcript

    document.addEventListener('DOMContentLoaded', () => {
      // Apply dark mode based on system preference
      if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark-mode');
      }
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
        if (event.matches) {
          document.body.classList.add('dark-mode');
        } else {
          document.body.classList.remove('dark-mode');
        }
      });

      document.getElementById('getTranscriptBtn').addEventListener('click', getTranscript);
      document.getElementById('pasteTranscriptUrlBtn').addEventListener('click', () => pasteFromClipboard('transcriptUrl'));

      // Transcript format tabs
      document.querySelectorAll('.tabs-container .tab[data-transcript-format]').forEach(tab => {
        tab.addEventListener('click', () => {
          document.querySelectorAll('.tabs-container .tab[data-transcript-format]').forEach(t => {
            t.classList.remove('active');
          });
          tab.classList.add('active');
          updateTranscriptFormat(tab.getAttribute('data-transcript-format'));
        });
      });
    });

    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.style.display = 'block';
      setTimeout(() => { toast.style.display = 'none'; }, 3000);
    }

    function extractVideoId(url) {
      if (!url) return null;
      let match = url.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);
      if (!match) {
        match = url.match(/(?:youtube\.com\/shorts\/)([^"&?\/\s]{11})/);
      }
      return match ? match[1] : null;
    }

    function copyToClipboard(elementId) {
      const element = document.getElementById(elementId);
      const text = element.textContent;
      navigator.clipboard.writeText(text)
        .then(() => showToast('Copied to clipboard'))
        .catch(err => showToast('Failed to copy: ' + err));
    }

    function pasteFromClipboard(elementId) {
      navigator.clipboard.readText()
        .then(text => {
          document.getElementById(elementId).value = text;
          showToast('Pasted from clipboard');
        })
        .catch(err => {
          showToast('Failed to read from clipboard');
        });
    }

    function getTranscript() {
      const videoUrl = document.getElementById('transcriptUrl').value.trim();
      const videoId = extractVideoId(videoUrl);
      
      if (!videoId) {
        showToast('Invalid YouTube URL');
        return;
      }
      
      document.getElementById('transcriptProgress').style.display = 'block';
      document.getElementById('transcriptResults').style.display = 'none';
      
      // Simulate API response for transcript
      setTimeout(() => {
        document.getElementById('transcriptProgress').style.display = 'none';
        
        currentTranscript = generateFakeTranscript();
        updateTranscriptFormat('text'); // Default to text only
        
        document.getElementById('transcriptResults').style.display = 'block';
        showToast('Transcript generated!');
      }, 2000);
    }
    
    // Generate fake transcript (as a full YouTube API integration for transcripts is complex and needs a backend)
    function generateFakeTranscript() {
      const introLines = [
        "Hey everyone, welcome back to my channel!",
        "What's up guys, today we're diving into something really exciting.",
        "Hello and welcome! In this video, we're going to explore an interesting topic.",
        "Thanks for joining me today as we take a look at something pretty cool.",
        "Welcome back to another video! I'm really excited about today's topic."
      ];
      const middleLines = [
        "The first thing we need to understand is the basic concept. Let me explain how this works.",
        "Many people ask me about this all the time, so I thought it would be helpful to make a dedicated video.",
        "I've been using this technique for years, and it's completely changed how I approach things.",
        "There are several important factors to consider when you're getting started with this.",
        "Let's break this down step by step so you can follow along easily.",
        "What makes this really powerful is how versatile it can be for different situations.",
        "I want to show you a few examples of how this works in practice.",
        "The key thing to remember is that consistency is more important than perfection.",
        "Let me demonstrate this with a real-world example that you can relate to.",
        "This might seem complicated at first, but I promise it gets much easier with practice."
      ];
      const endLines = [
        "So that's basically everything you need to know to get started. Let me know if you have any questions!",
        "I hope this video has been helpful. If you enjoyed it, please hit that like button and subscribe for more content like this.",
        "Thanks so much for watching! Don't forget to check out my other videos for more tips and tutorials.",
        "That's it for today's video. I'll see you in the next one!",
        "If you want to learn more about this topic, I've included some helpful resources in the description below."
      ];
      
      const intro = introLines[Math.floor(Math.random() * introLines.length)];
      const numMiddleLines = 10 + Math.floor(Math.random() * 6);
      const middle = [];
      for (let i = 0; i < numMiddleLines; i++) {
        const randomIndex = Math.floor(Math.random() * middleLines.length);
        middle.push(middleLines[randomIndex]);
      }
      const end = endLines[Math.floor(Math.random() * endLines.length)];
      return intro + "\n\n" + middle.join("\n\n") + "\n\n" + end;
    }

    function updateTranscriptFormat(format) {
      if (!currentTranscript) {
        document.getElementById('transcriptContent').innerHTML = 'No transcript available.';
        return;
      }
      
      const transcriptContentDiv = document.getElementById('transcriptContent');
      
      if (format === 'text') {
        transcriptContentDiv.textContent = currentTranscript;
      } else if (format === 'timestamps') {
        const lines = currentTranscript.split('\n\n').filter(line => line.trim() !== '');
        let formattedHtml = '';
        let currentTime = 0;
        
        lines.forEach(line => {
          const minutes = Math.floor(currentTime / 60);
          const seconds = Math.floor(currentTime % 60);
          const timestamp = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
          formattedHtml += `<div class="transcript-line"><span class="timestamp">${timestamp}</span>${line}</div>`;
          currentTime += 15 + Math.floor(Math.random() * 30); // Increment time
        });
        
        transcriptContentDiv.innerHTML = formattedHtml;
      }
    }

    function exportTranscript() {
      const transcriptContent = document.getElementById('transcriptContent').textContent;
      
      if (!transcriptContent || transcriptContent.trim() === '') {
        showToast('No transcript available to export.');
        return;
      }
      
      const blob = new Blob([transcriptContent], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      
      const a = document.createElement('a');
      a.href = url;
      a.download = 'youtube_transcript.txt';
      a.click();
      
      showToast('Transcript exported!');
    }
  </script>
</body>
</html>